var Tx=Object.defineProperty;var Fx=(e,t,r)=>t in e?Tx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $t=(e,t,r)=>Fx(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function o0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c0={exports:{}},oi={},d0={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=Symbol.for("react.element"),Ax=Symbol.for("react.portal"),Dx=Symbol.for("react.fragment"),$x=Symbol.for("react.strict_mode"),Rx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),Vx=Symbol.for("react.forward_ref"),zx=Symbol.for("react.suspense"),Wx=Symbol.for("react.memo"),Hx=Symbol.for("react.lazy"),Qc=Symbol.iterator;function Ux(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p0=Object.assign,f0={};function Ps(e,t,r){this.props=e,this.context=t,this.refs=f0,this.updater=r||u0}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function m0(){}m0.prototype=Ps.prototype;function So(e,t,r){this.props=e,this.context=t,this.refs=f0,this.updater=r||u0}var Co=So.prototype=new m0;Co.constructor=So;p0(Co,Ps.prototype);Co.isPureReactComponent=!0;var Xc=Array.isArray,x0=Object.prototype.hasOwnProperty,Mo={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,r){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)x0.call(t,n)&&!h0.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:In,type:e,key:i,ref:l,props:a,_owner:Mo.current}}function Gx(e,t){return{$$typeof:In,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===In}function Kx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var qc=/\/+/g;function Pi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kx(""+e.key):t.toString(36)}function pa(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case In:case Ax:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+Pi(l,0):n,Xc(a)?(r="",e!=null&&(r=e.replace(qc,"$&/")+"/"),pa(a,t,r,"",function(d){return d})):a!=null&&(Lo(a)&&(a=Gx(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(qc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",Xc(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+Pi(i,o);l+=pa(i,t,r,c,a)}else if(c=Ux(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+Pi(i,o++),l+=pa(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function On(e,t,r){if(e==null)return e;var n=[],a=0;return pa(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Yx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},fa={transition:null},Qx={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:fa,ReactCurrentOwner:Mo};function v0(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:On,forEach:function(e,t,r){On(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return On(e,function(){t++}),t},toArray:function(e){return On(e,function(t){return t})||[]},only:function(e){if(!Lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Ps;J.Fragment=Dx;J.Profiler=Rx;J.PureComponent=So;J.StrictMode=$x;J.Suspense=zx;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qx;J.act=v0;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=p0({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Mo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)x0.call(t,c)&&!h0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:In,type:e.type,key:a,ref:i,props:n,_owner:l}};J.createContext=function(e){return e={$$typeof:Bx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ox,_context:e},e.Consumer=e};J.createElement=g0;J.createFactory=function(e){var t=g0.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Vx,render:e}};J.isValidElement=Lo;J.lazy=function(e){return{$$typeof:Hx,_payload:{_status:-1,_result:e},_init:Yx}};J.memo=function(e,t){return{$$typeof:Wx,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=fa.transition;fa.transition={};try{e()}finally{fa.transition=t}};J.unstable_act=v0;J.useCallback=function(e,t){return Ue.current.useCallback(e,t)};J.useContext=function(e){return Ue.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};J.useEffect=function(e,t){return Ue.current.useEffect(e,t)};J.useId=function(){return Ue.current.useId()};J.useImperativeHandle=function(e,t,r){return Ue.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Ue.current.useMemo(e,t)};J.useReducer=function(e,t,r){return Ue.current.useReducer(e,t,r)};J.useRef=function(e){return Ue.current.useRef(e)};J.useState=function(e){return Ue.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return Ue.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return Ue.current.useTransition()};J.version="18.3.1";d0.exports=J;var S=d0.exports;const _o=o0(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=S,qx=Symbol.for("react.element"),Zx=Symbol.for("react.fragment"),Jx=Object.prototype.hasOwnProperty,eh=Xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,th={key:!0,ref:!0,__self:!0,__source:!0};function k0(e,t,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Jx.call(t,n)&&!th.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:qx,type:e,key:i,ref:l,props:a,_owner:eh.current}}oi.Fragment=Zx;oi.jsx=k0;oi.jsxs=k0;c0.exports=oi;var s=c0.exports,hl={},y0={exports:{}},it={},b0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var D=T.length;T.push($);e:for(;0<D;){var B=D-1>>>1,Y=T[B];if(0<a(Y,$))T[B]=$,T[D]=Y,D=B;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var $=T[0],D=T.pop();if(D!==$){T[0]=D;e:for(var B=0,Y=T.length,G=Y>>>1;B<G;){var Q=2*(B+1)-1,K=T[Q],re=Q+1,ge=T[re];if(0>a(K,D))re<Y&&0>a(ge,K)?(T[B]=ge,T[re]=D,B=re):(T[B]=K,T[Q]=D,B=Q);else if(re<Y&&0>a(ge,D))T[B]=ge,T[re]=D,B=re;else break e}}return $}function a(T,$){var D=T.sortIndex-$.sortIndex;return D!==0?D:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,p=null,f=3,h=!1,v=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var $=r(d);$!==null;){if($.callback===null)n(d);else if($.startTime<=T)n(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(d)}}function j(T){if(k=!1,x(T),!v)if(r(c)!==null)v=!0,R(N);else{var $=r(d);$!==null&&V(j,$.startTime-T)}}function N(T,$){v=!1,k&&(k=!1,g(M),M=-1),h=!0;var D=f;try{for(x($),p=r(c);p!==null&&(!(p.expirationTime>$)||T&&!_());){var B=p.callback;if(typeof B=="function"){p.callback=null,f=p.priorityLevel;var Y=B(p.expirationTime<=$);$=e.unstable_now(),typeof Y=="function"?p.callback=Y:p===r(c)&&n(c),x($)}else n(c);p=r(c)}if(p!==null)var G=!0;else{var Q=r(d);Q!==null&&V(j,Q.startTime-$),G=!1}return G}finally{p=null,f=D,h=!1}}var y=!1,C=null,M=-1,P=5,w=-1;function _(){return!(e.unstable_now()-w<P)}function L(){if(C!==null){var T=e.unstable_now();w=T;var $=!0;try{$=C(!0,T)}finally{$?I():(y=!1,C=null)}}else y=!1}var I;if(typeof m=="function")I=function(){m(L)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,A=E.port2;E.port1.onmessage=L,I=function(){A.postMessage(null)}}else I=function(){b(L,0)};function R(T){C=T,y||(y=!0,I())}function V(T,$){M=b(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,R(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var D=f;f=$;try{return T()}finally{f=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var D=f;f=T;try{return $()}finally{f=D}},e.unstable_scheduleCallback=function(T,$,D){var B=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,T){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=D+Y,T={id:u++,callback:$,priorityLevel:T,startTime:D,expirationTime:Y,sortIndex:-1},D>B?(T.sortIndex=D,t(d,T),r(c)===null&&T===r(d)&&(k?(g(M),M=-1):k=!0,V(j,D-B))):(T.sortIndex=Y,t(c,T),v||h||(v=!0,R(N))),T},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(T){var $=f;return function(){var D=f;f=$;try{return T.apply(this,arguments)}finally{f=D}}}})(j0);b0.exports=j0;var rh=b0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=S,at=rh;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,cn={};function Vr(e,t){ks(e,t),ks(e+"Capture",t)}function ks(e,t){for(cn[e]=t,e=0;e<t.length;e++)w0.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gl=Object.prototype.hasOwnProperty,nh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zc={},Jc={};function ah(e){return gl.call(Jc,e)?!0:gl.call(Zc,e)?!1:nh.test(e)?Jc[e]=!0:(Zc[e]=!0,!1)}function ih(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lh(e,t,r,n){if(t===null||typeof t>"u"||ih(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,r,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var Eo=/[\-:]([a-z])/g;function Po(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Eo,Po);Ie[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Eo,Po);Ie[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Eo,Po);Ie[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function Io(e,t,r,n){var a=Ie.hasOwnProperty(t)?Ie[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lh(t,r,a,n)&&(r=null),n||a===null?ah(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xt=sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bn=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),To=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),Fo=Symbol.for("react.forward_ref"),kl=Symbol.for("react.suspense"),yl=Symbol.for("react.suspense_list"),Ao=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),ed=Symbol.iterator;function Fs(e){return e===null||typeof e!="object"?null:(e=ed&&e[ed]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,Ii;function Us(e){if(Ii===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ii=t&&t[1]||""}return`
`+Ii+e}var Ti=!1;function Fi(e,t){if(!e||Ti)return"";Ti=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Ti=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Us(e):""}function oh(e){switch(e.tag){case 5:return Us(e.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return e=Fi(e.type,!1),e;case 11:return e=Fi(e.type.render,!1),e;case 1:return e=Fi(e.type,!0),e;default:return""}}function bl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Xr:return"Portal";case vl:return"Profiler";case To:return"StrictMode";case kl:return"Suspense";case yl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S0:return(e.displayName||"Context")+".Consumer";case N0:return(e._context.displayName||"Context")+".Provider";case Fo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ao:return t=e.displayName||null,t!==null?t:bl(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return bl(e(t))}catch{}}return null}function ch(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bl(t);case 8:return t===To?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function M0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dh(e){var t=M0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vn(e){e._valueTracker||(e._valueTracker=dh(e))}function L0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=M0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ma(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jl(e,t){var r=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function td(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _0(e,t){t=t.checked,t!=null&&Io(e,"checked",t,!1)}function wl(e,t){_0(e,t);var r=xr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Nl(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Nl(e,t,r){(t!=="number"||Ma(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Gs=Array.isArray;function us(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Sl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if(Gs(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xr(r)}}function E0(e,t){var r=xr(t.value),n=xr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function nd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function P0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zn,I0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zn=zn||document.createElement("div"),zn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uh=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(e){uh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qs[t]=qs[e]})});function T0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||qs.hasOwnProperty(e)&&qs[e]?(""+t).trim():t+"px"}function F0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=T0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var ph=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ml(e,t){if(t){if(ph[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Ll(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _l=null;function Do(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var El=null,ps=null,fs=null;function ad(e){if(e=An(e)){if(typeof El!="function")throw Error(O(280));var t=e.stateNode;t&&(t=fi(t),El(e.stateNode,e.type,t))}}function A0(e){ps?fs?fs.push(e):fs=[e]:ps=e}function D0(){if(ps){var e=ps,t=fs;if(fs=ps=null,ad(e),t)for(e=0;e<t.length;e++)ad(t[e])}}function $0(e,t){return e(t)}function R0(){}var Ai=!1;function O0(e,t,r){if(Ai)return e(t,r);Ai=!0;try{return $0(e,t,r)}finally{Ai=!1,(ps!==null||fs!==null)&&(R0(),D0())}}function un(e,t){var r=e.stateNode;if(r===null)return null;var n=fi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var Pl=!1;if(Ut)try{var As={};Object.defineProperty(As,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{Pl=!1}function fh(e,t,r,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Zs=!1,La=null,_a=!1,Il=null,mh={onError:function(e){Zs=!0,La=e}};function xh(e,t,r,n,a,i,l,o,c){Zs=!1,La=null,fh.apply(mh,arguments)}function hh(e,t,r,n,a,i,l,o,c){if(xh.apply(this,arguments),Zs){if(Zs){var d=La;Zs=!1,La=null}else throw Error(O(198));_a||(_a=!0,Il=d)}}function zr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function B0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function id(e){if(zr(e)!==e)throw Error(O(188))}function gh(e){var t=e.alternate;if(!t){if(t=zr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return id(a),e;if(i===n)return id(a),t;i=i.sibling}throw Error(O(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function V0(e){return e=gh(e),e!==null?z0(e):null}function z0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=z0(e);if(t!==null)return t;e=e.sibling}return null}var W0=at.unstable_scheduleCallback,ld=at.unstable_cancelCallback,vh=at.unstable_shouldYield,kh=at.unstable_requestPaint,ye=at.unstable_now,yh=at.unstable_getCurrentPriorityLevel,$o=at.unstable_ImmediatePriority,H0=at.unstable_UserBlockingPriority,Ea=at.unstable_NormalPriority,bh=at.unstable_LowPriority,U0=at.unstable_IdlePriority,ci=null,Pt=null;function jh(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(ci,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Sh,wh=Math.log,Nh=Math.LN2;function Sh(e){return e>>>=0,e===0?32:31-(wh(e)/Nh|0)|0}var Wn=64,Hn=4194304;function Ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=Ks(o):(i&=l,i!==0&&(n=Ks(i)))}else l=r&~a,l!==0?n=Ks(l):i!==0&&(n=Ks(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Nt(t),a=1<<r,n|=e[r],t&=~a;return n}function Ch(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mh(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Nt(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&n)&&(a[l]=Ch(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Tl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function G0(){var e=Wn;return Wn<<=1,!(Wn&4194240)&&(Wn=64),e}function Di(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Tn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=r}function Lh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Nt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Ro(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Nt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ne=0;function K0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Y0,Oo,Q0,X0,q0,Fl=!1,Un=[],ir=null,lr=null,or=null,pn=new Map,fn=new Map,tr=[],_h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":pn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(t.pointerId)}}function Ds(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=An(t),t!==null&&Oo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Eh(e,t,r,n,a){switch(t){case"focusin":return ir=Ds(ir,e,t,r,n,a),!0;case"dragenter":return lr=Ds(lr,e,t,r,n,a),!0;case"mouseover":return or=Ds(or,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return pn.set(i,Ds(pn.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,fn.set(i,Ds(fn.get(i)||null,e,t,r,n,a)),!0}return!1}function Z0(e){var t=Cr(e.target);if(t!==null){var r=zr(t);if(r!==null){if(t=r.tag,t===13){if(t=B0(r),t!==null){e.blockedOn=t,q0(e.priority,function(){Q0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ma(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Al(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);_l=n,r.target.dispatchEvent(n),_l=null}else return t=An(r),t!==null&&Oo(t),e.blockedOn=r,!1;t.shift()}return!0}function cd(e,t,r){ma(e)&&r.delete(t)}function Ph(){Fl=!1,ir!==null&&ma(ir)&&(ir=null),lr!==null&&ma(lr)&&(lr=null),or!==null&&ma(or)&&(or=null),pn.forEach(cd),fn.forEach(cd)}function $s(e,t){e.blockedOn===t&&(e.blockedOn=null,Fl||(Fl=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,Ph)))}function mn(e){function t(a){return $s(a,e)}if(0<Un.length){$s(Un[0],e);for(var r=1;r<Un.length;r++){var n=Un[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ir!==null&&$s(ir,e),lr!==null&&$s(lr,e),or!==null&&$s(or,e),pn.forEach(t),fn.forEach(t),r=0;r<tr.length;r++)n=tr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<tr.length&&(r=tr[0],r.blockedOn===null);)Z0(r),r.blockedOn===null&&tr.shift()}var ms=Xt.ReactCurrentBatchConfig,Ia=!0;function Ih(e,t,r,n){var a=ne,i=ms.transition;ms.transition=null;try{ne=1,Bo(e,t,r,n)}finally{ne=a,ms.transition=i}}function Th(e,t,r,n){var a=ne,i=ms.transition;ms.transition=null;try{ne=4,Bo(e,t,r,n)}finally{ne=a,ms.transition=i}}function Bo(e,t,r,n){if(Ia){var a=Al(e,t,r,n);if(a===null)Gi(e,t,n,Ta,r),od(e,n);else if(Eh(a,e,t,r,n))n.stopPropagation();else if(od(e,n),t&4&&-1<_h.indexOf(e)){for(;a!==null;){var i=An(a);if(i!==null&&Y0(i),i=Al(e,t,r,n),i===null&&Gi(e,t,n,Ta,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Gi(e,t,n,null,r)}}var Ta=null;function Al(e,t,r,n){if(Ta=null,e=Do(n),e=Cr(e),e!==null)if(t=zr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=B0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ta=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yh()){case $o:return 1;case H0:return 4;case Ea:case bh:return 16;case U0:return 536870912;default:return 16}default:return 16}}var sr=null,Vo=null,xa=null;function ep(){if(xa)return xa;var e,t=Vo,r=t.length,n,a="value"in sr?sr.value:sr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[i-n];n++);return xa=a.slice(e,1<n?1-n:void 0)}function ha(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gn(){return!0}function dd(){return!1}function lt(e){function t(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gn:dd,this.isPropagationStopped=dd,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),t}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=lt(Is),Fn=fe({},Is,{view:0,detail:0}),Fh=lt(Fn),$i,Ri,Rs,di=fe({},Fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?($i=e.screenX-Rs.screenX,Ri=e.screenY-Rs.screenY):Ri=$i=0,Rs=e),$i)},movementY:function(e){return"movementY"in e?e.movementY:Ri}}),ud=lt(di),Ah=fe({},di,{dataTransfer:0}),Dh=lt(Ah),$h=fe({},Fn,{relatedTarget:0}),Oi=lt($h),Rh=fe({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),Oh=lt(Rh),Bh=fe({},Is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vh=lt(Bh),zh=fe({},Is,{data:0}),pd=lt(zh),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uh[e])?!!t[e]:!1}function Wo(){return Gh}var Kh=fe({},Fn,{key:function(e){if(e.key){var t=Wh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ha(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wo,charCode:function(e){return e.type==="keypress"?ha(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ha(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yh=lt(Kh),Qh=fe({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=lt(Qh),Xh=fe({},Fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wo}),qh=lt(Xh),Zh=fe({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jh=lt(Zh),eg=fe({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tg=lt(eg),rg=[9,13,27,32],Ho=Ut&&"CompositionEvent"in window,Js=null;Ut&&"documentMode"in document&&(Js=document.documentMode);var sg=Ut&&"TextEvent"in window&&!Js,tp=Ut&&(!Ho||Js&&8<Js&&11>=Js),md=" ",xd=!1;function rp(e,t){switch(e){case"keyup":return rg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function ng(e,t){switch(e){case"compositionend":return sp(t);case"keypress":return t.which!==32?null:(xd=!0,md);case"textInput":return e=t.data,e===md&&xd?null:e;default:return null}}function ag(e,t){if(Zr)return e==="compositionend"||!Ho&&rp(e,t)?(e=ep(),xa=Vo=sr=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tp&&t.locale!=="ko"?null:t.data;default:return null}}var ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ig[e.type]:t==="textarea"}function np(e,t,r,n){A0(n),t=Fa(t,"onChange"),0<t.length&&(r=new zo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var en=null,xn=null;function lg(e){xp(e,0)}function ui(e){var t=ts(e);if(L0(t))return e}function og(e,t){if(e==="change")return t}var ap=!1;if(Ut){var Bi;if(Ut){var Vi="oninput"in document;if(!Vi){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),Vi=typeof gd.oninput=="function"}Bi=Vi}else Bi=!1;ap=Bi&&(!document.documentMode||9<document.documentMode)}function vd(){en&&(en.detachEvent("onpropertychange",ip),xn=en=null)}function ip(e){if(e.propertyName==="value"&&ui(xn)){var t=[];np(t,xn,e,Do(e)),O0(lg,t)}}function cg(e,t,r){e==="focusin"?(vd(),en=t,xn=r,en.attachEvent("onpropertychange",ip)):e==="focusout"&&vd()}function dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ui(xn)}function ug(e,t){if(e==="click")return ui(t)}function pg(e,t){if(e==="input"||e==="change")return ui(t)}function fg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:fg;function hn(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!gl.call(t,a)||!Ct(e[a],t[a]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var r=kd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kd(r)}}function lp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function op(){for(var e=window,t=Ma();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ma(e.document)}return t}function Uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mg(e){var t=op(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lp(r.ownerDocument.documentElement,r)){if(n!==null&&Uo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=yd(r,i);var l=yd(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xg=Ut&&"documentMode"in document&&11>=document.documentMode,Jr=null,Dl=null,tn=null,$l=!1;function bd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$l||Jr==null||Jr!==Ma(n)||(n=Jr,"selectionStart"in n&&Uo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),tn&&hn(tn,n)||(tn=n,n=Fa(Dl,"onSelect"),0<n.length&&(t=new zo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Jr)))}function Kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var es={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionend:Kn("Transition","TransitionEnd")},zi={},cp={};Ut&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function pi(e){if(zi[e])return zi[e];if(!es[e])return e;var t=es[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cp)return zi[e]=t[r];return e}var dp=pi("animationend"),up=pi("animationiteration"),pp=pi("animationstart"),fp=pi("transitionend"),mp=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){mp.set(e,t),Vr(t,[e])}for(var Wi=0;Wi<jd.length;Wi++){var Hi=jd[Wi],hg=Hi.toLowerCase(),gg=Hi[0].toUpperCase()+Hi.slice(1);kr(hg,"on"+gg)}kr(dp,"onAnimationEnd");kr(up,"onAnimationIteration");kr(pp,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(fp,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function wd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,hh(n,t,void 0,e),e.currentTarget=null}function xp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;wd(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;wd(a,o,d),i=c}}}if(_a)throw e=Il,_a=!1,Il=null,e}function le(e,t){var r=t[zl];r===void 0&&(r=t[zl]=new Set);var n=e+"__bubble";r.has(n)||(hp(t,e,2,!1),r.add(n))}function Ui(e,t,r){var n=0;t&&(n|=4),hp(r,e,n,t)}var Yn="_reactListening"+Math.random().toString(36).slice(2);function gn(e){if(!e[Yn]){e[Yn]=!0,w0.forEach(function(r){r!=="selectionchange"&&(vg.has(r)||Ui(r,!1,e),Ui(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yn]||(t[Yn]=!0,Ui("selectionchange",!1,t))}}function hp(e,t,r,n){switch(J0(t)){case 1:var a=Ih;break;case 4:a=Th;break;default:a=Bo}r=a.bind(null,t,r,e),a=void 0,!Pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Gi(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Cr(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}O0(function(){var d=i,u=Do(r),p=[];e:{var f=mp.get(e);if(f!==void 0){var h=zo,v=e;switch(e){case"keypress":if(ha(r)===0)break e;case"keydown":case"keyup":h=Yh;break;case"focusin":v="focus",h=Oi;break;case"focusout":v="blur",h=Oi;break;case"beforeblur":case"afterblur":h=Oi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=qh;break;case dp:case up:case pp:h=Oh;break;case fp:h=Jh;break;case"scroll":h=Fh;break;case"wheel":h=tg;break;case"copy":case"cut":case"paste":h=Vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=fd}var k=(t&4)!==0,b=!k&&e==="scroll",g=k?f!==null?f+"Capture":null:f;k=[];for(var m=d,x;m!==null;){x=m;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,g!==null&&(j=un(m,g),j!=null&&k.push(vn(m,j,x)))),b)break;m=m.return}0<k.length&&(f=new h(f,v,null,r,u),p.push({event:f,listeners:k}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&r!==_l&&(v=r.relatedTarget||r.fromElement)&&(Cr(v)||v[Gt]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=d,v=v?Cr(v):null,v!==null&&(b=zr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=d),h!==v)){if(k=ud,j="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(k=fd,j="onPointerLeave",g="onPointerEnter",m="pointer"),b=h==null?f:ts(h),x=v==null?f:ts(v),f=new k(j,m+"leave",h,r,u),f.target=b,f.relatedTarget=x,j=null,Cr(u)===d&&(k=new k(g,m+"enter",v,r,u),k.target=x,k.relatedTarget=b,j=k),b=j,h&&v)t:{for(k=h,g=v,m=0,x=k;x;x=Wr(x))m++;for(x=0,j=g;j;j=Wr(j))x++;for(;0<m-x;)k=Wr(k),m--;for(;0<x-m;)g=Wr(g),x--;for(;m--;){if(k===g||g!==null&&k===g.alternate)break t;k=Wr(k),g=Wr(g)}k=null}else k=null;h!==null&&Nd(p,f,h,k,!1),v!==null&&b!==null&&Nd(p,b,v,k,!0)}}e:{if(f=d?ts(d):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var N=og;else if(hd(f))if(ap)N=pg;else{N=dg;var y=cg}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=ug);if(N&&(N=N(e,d))){np(p,N,r,u);break e}y&&y(e,f,d),e==="focusout"&&(y=f._wrapperState)&&y.controlled&&f.type==="number"&&Nl(f,"number",f.value)}switch(y=d?ts(d):window,e){case"focusin":(hd(y)||y.contentEditable==="true")&&(Jr=y,Dl=d,tn=null);break;case"focusout":tn=Dl=Jr=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,bd(p,r,u);break;case"selectionchange":if(xg)break;case"keydown":case"keyup":bd(p,r,u)}var C;if(Ho)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Zr?rp(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(tp&&r.locale!=="ko"&&(Zr||M!=="onCompositionStart"?M==="onCompositionEnd"&&Zr&&(C=ep()):(sr=u,Vo="value"in sr?sr.value:sr.textContent,Zr=!0)),y=Fa(d,M),0<y.length&&(M=new pd(M,e,null,r,u),p.push({event:M,listeners:y}),C?M.data=C:(C=sp(r),C!==null&&(M.data=C)))),(C=sg?ng(e,r):ag(e,r))&&(d=Fa(d,"onBeforeInput"),0<d.length&&(u=new pd("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=C))}xp(p,t)})}function vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=un(e,r),i!=null&&n.unshift(vn(e,i,a)),i=un(e,t),i!=null&&n.push(vn(e,i,a))),e=e.return}return n}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nd(e,t,r,n,a){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=un(r,i),c!=null&&l.unshift(vn(r,c,o))):a||(c=un(r,i),c!=null&&l.push(vn(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var kg=/\r\n?/g,yg=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(kg,`
`).replace(yg,"")}function Qn(e,t,r){if(t=Sd(t),Sd(e)!==t&&r)throw Error(O(425))}function Aa(){}var Rl=null,Ol=null;function Bl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(e){return Cd.resolve(null).then(e).catch(wg)}:Vl;function wg(e){setTimeout(function(){throw e})}function Ki(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),mn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);mn(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Md(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ts,kn="__reactProps$"+Ts,Gt="__reactContainer$"+Ts,zl="__reactEvents$"+Ts,Ng="__reactListeners$"+Ts,Sg="__reactHandles$"+Ts;function Cr(e){var t=e[_t];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gt]||r[_t]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Md(e);e!==null;){if(r=e[_t])return r;e=Md(e)}return t}e=r,r=e.parentNode}return null}function An(e){return e=e[_t]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function fi(e){return e[kn]||null}var Wl=[],rs=-1;function yr(e){return{current:e}}function ce(e){0>rs||(e.current=Wl[rs],Wl[rs]=null,rs--)}function ie(e,t){rs++,Wl[rs]=e.current,e.current=t}var hr={},Re=yr(hr),Xe=yr(!1),Ar=hr;function ys(e,t){var r=e.type.contextTypes;if(!r)return hr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qe(e){return e=e.childContextTypes,e!=null}function Da(){ce(Xe),ce(Re)}function Ld(e,t,r){if(Re.current!==hr)throw Error(O(168));ie(Re,t),ie(Xe,r)}function gp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(O(108,ch(e)||"Unknown",a));return fe({},r,n)}function $a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,Ar=Re.current,ie(Re,e),ie(Xe,Xe.current),!0}function _d(e,t,r){var n=e.stateNode;if(!n)throw Error(O(169));r?(e=gp(e,t,Ar),n.__reactInternalMemoizedMergedChildContext=e,ce(Xe),ce(Re),ie(Re,e)):ce(Xe),ie(Xe,r)}var Bt=null,mi=!1,Yi=!1;function vp(e){Bt===null?Bt=[e]:Bt.push(e)}function Cg(e){mi=!0,vp(e)}function br(){if(!Yi&&Bt!==null){Yi=!0;var e=0,t=ne;try{var r=Bt;for(ne=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Bt=null,mi=!1}catch(a){throw Bt!==null&&(Bt=Bt.slice(e+1)),W0($o,br),a}finally{ne=t,Yi=!1}}return null}var ss=[],ns=0,Ra=null,Oa=0,ct=[],dt=0,Dr=null,Vt=1,zt="";function Nr(e,t){ss[ns++]=Oa,ss[ns++]=Ra,Ra=e,Oa=t}function kp(e,t,r){ct[dt++]=Vt,ct[dt++]=zt,ct[dt++]=Dr,Dr=e;var n=Vt;e=zt;var a=32-Nt(n)-1;n&=~(1<<a),r+=1;var i=32-Nt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Vt=1<<32-Nt(t)+a|r<<a|n,zt=i+e}else Vt=1<<i|r<<a|n,zt=e}function Go(e){e.return!==null&&(Nr(e,1),kp(e,1,0))}function Ko(e){for(;e===Ra;)Ra=ss[--ns],ss[ns]=null,Oa=ss[--ns],ss[ns]=null;for(;e===Dr;)Dr=ct[--dt],ct[dt]=null,zt=ct[--dt],ct[dt]=null,Vt=ct[--dt],ct[dt]=null}var nt=null,st=null,de=!1,jt=null;function yp(e,t){var r=ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ed(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nt=e,st=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nt=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dr!==null?{id:Vt,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,nt=e,st=null,!0):!1;default:return!1}}function Hl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ul(e){if(de){var t=st;if(t){var r=t;if(!Ed(e,t)){if(Hl(e))throw Error(O(418));t=cr(r.nextSibling);var n=nt;t&&Ed(e,t)?yp(n,r):(e.flags=e.flags&-4097|2,de=!1,nt=e)}}else{if(Hl(e))throw Error(O(418));e.flags=e.flags&-4097|2,de=!1,nt=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nt=e}function Xn(e){if(e!==nt)return!1;if(!de)return Pd(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bl(e.type,e.memoizedProps)),t&&(t=st)){if(Hl(e))throw bp(),Error(O(418));for(;t;)yp(e,t),t=cr(t.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){st=cr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}st=null}}else st=nt?cr(e.stateNode.nextSibling):null;return!0}function bp(){for(var e=st;e;)e=cr(e.nextSibling)}function bs(){st=nt=null,de=!1}function Yo(e){jt===null?jt=[e]:jt.push(e)}var Mg=Xt.ReactCurrentBatchConfig;function Os(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function qn(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Id(e){var t=e._init;return t(e._payload)}function jp(e){function t(g,m){if(e){var x=g.deletions;x===null?(g.deletions=[m],g.flags|=16):x.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function a(g,m){return g=fr(g,m),g.index=0,g.sibling=null,g}function i(g,m,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<m?(g.flags|=2,m):x):(g.flags|=2,m)):(g.flags|=1048576,m)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,m,x,j){return m===null||m.tag!==6?(m=tl(x,g.mode,j),m.return=g,m):(m=a(m,x),m.return=g,m)}function c(g,m,x,j){var N=x.type;return N===qr?u(g,m,x.props.children,j,x.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&Id(N)===m.type)?(j=a(m,x.props),j.ref=Os(g,m,x),j.return=g,j):(j=wa(x.type,x.key,x.props,null,g.mode,j),j.ref=Os(g,m,x),j.return=g,j)}function d(g,m,x,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=rl(x,g.mode,j),m.return=g,m):(m=a(m,x.children||[]),m.return=g,m)}function u(g,m,x,j,N){return m===null||m.tag!==7?(m=Tr(x,g.mode,j,N),m.return=g,m):(m=a(m,x),m.return=g,m)}function p(g,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=tl(""+m,g.mode,x),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bn:return x=wa(m.type,m.key,m.props,null,g.mode,x),x.ref=Os(g,null,m),x.return=g,x;case Xr:return m=rl(m,g.mode,x),m.return=g,m;case Jt:var j=m._init;return p(g,j(m._payload),x)}if(Gs(m)||Fs(m))return m=Tr(m,g.mode,x,null),m.return=g,m;qn(g,m)}return null}function f(g,m,x,j){var N=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:o(g,m,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bn:return x.key===N?c(g,m,x,j):null;case Xr:return x.key===N?d(g,m,x,j):null;case Jt:return N=x._init,f(g,m,N(x._payload),j)}if(Gs(x)||Fs(x))return N!==null?null:u(g,m,x,j,null);qn(g,x)}return null}function h(g,m,x,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(x)||null,o(m,g,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Bn:return g=g.get(j.key===null?x:j.key)||null,c(m,g,j,N);case Xr:return g=g.get(j.key===null?x:j.key)||null,d(m,g,j,N);case Jt:var y=j._init;return h(g,m,x,y(j._payload),N)}if(Gs(j)||Fs(j))return g=g.get(x)||null,u(m,g,j,N,null);qn(m,j)}return null}function v(g,m,x,j){for(var N=null,y=null,C=m,M=m=0,P=null;C!==null&&M<x.length;M++){C.index>M?(P=C,C=null):P=C.sibling;var w=f(g,C,x[M],j);if(w===null){C===null&&(C=P);break}e&&C&&w.alternate===null&&t(g,C),m=i(w,m,M),y===null?N=w:y.sibling=w,y=w,C=P}if(M===x.length)return r(g,C),de&&Nr(g,M),N;if(C===null){for(;M<x.length;M++)C=p(g,x[M],j),C!==null&&(m=i(C,m,M),y===null?N=C:y.sibling=C,y=C);return de&&Nr(g,M),N}for(C=n(g,C);M<x.length;M++)P=h(C,g,M,x[M],j),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?M:P.key),m=i(P,m,M),y===null?N=P:y.sibling=P,y=P);return e&&C.forEach(function(_){return t(g,_)}),de&&Nr(g,M),N}function k(g,m,x,j){var N=Fs(x);if(typeof N!="function")throw Error(O(150));if(x=N.call(x),x==null)throw Error(O(151));for(var y=N=null,C=m,M=m=0,P=null,w=x.next();C!==null&&!w.done;M++,w=x.next()){C.index>M?(P=C,C=null):P=C.sibling;var _=f(g,C,w.value,j);if(_===null){C===null&&(C=P);break}e&&C&&_.alternate===null&&t(g,C),m=i(_,m,M),y===null?N=_:y.sibling=_,y=_,C=P}if(w.done)return r(g,C),de&&Nr(g,M),N;if(C===null){for(;!w.done;M++,w=x.next())w=p(g,w.value,j),w!==null&&(m=i(w,m,M),y===null?N=w:y.sibling=w,y=w);return de&&Nr(g,M),N}for(C=n(g,C);!w.done;M++,w=x.next())w=h(C,g,M,w.value,j),w!==null&&(e&&w.alternate!==null&&C.delete(w.key===null?M:w.key),m=i(w,m,M),y===null?N=w:y.sibling=w,y=w);return e&&C.forEach(function(L){return t(g,L)}),de&&Nr(g,M),N}function b(g,m,x,j){if(typeof x=="object"&&x!==null&&x.type===qr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Bn:e:{for(var N=x.key,y=m;y!==null;){if(y.key===N){if(N=x.type,N===qr){if(y.tag===7){r(g,y.sibling),m=a(y,x.props.children),m.return=g,g=m;break e}}else if(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&Id(N)===y.type){r(g,y.sibling),m=a(y,x.props),m.ref=Os(g,y,x),m.return=g,g=m;break e}r(g,y);break}else t(g,y);y=y.sibling}x.type===qr?(m=Tr(x.props.children,g.mode,j,x.key),m.return=g,g=m):(j=wa(x.type,x.key,x.props,null,g.mode,j),j.ref=Os(g,m,x),j.return=g,g=j)}return l(g);case Xr:e:{for(y=x.key;m!==null;){if(m.key===y)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(g,m.sibling),m=a(m,x.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=rl(x,g.mode,j),m.return=g,g=m}return l(g);case Jt:return y=x._init,b(g,m,y(x._payload),j)}if(Gs(x))return v(g,m,x,j);if(Fs(x))return k(g,m,x,j);qn(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(g,m.sibling),m=a(m,x),m.return=g,g=m):(r(g,m),m=tl(x,g.mode,j),m.return=g,g=m),l(g)):r(g,m)}return b}var js=jp(!0),wp=jp(!1),Ba=yr(null),Va=null,as=null,Qo=null;function Xo(){Qo=as=Va=null}function qo(e){var t=Ba.current;ce(Ba),e._currentValue=t}function Gl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function xs(e,t){Va=e,Qo=as=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(Qo!==e)if(e={context:e,memoizedValue:t,next:null},as===null){if(Va===null)throw Error(O(308));as=e,Va.dependencies={lanes:0,firstContext:e}}else as=as.next=e;return t}var Mr=null;function Zo(e){Mr===null?Mr=[e]:Mr.push(e)}function Np(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Zo(t)):(r.next=a.next,a.next=r),t.interleaved=r,Kt(e,n)}function Kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var er=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,te&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Kt(e,r)}return a=n.interleaved,a===null?(t.next=t,Zo(n)):(t.next=a.next,a.next=t),n.interleaved=t,Kt(e,r)}function ga(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ro(e,r)}}function Td(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function za(e,t,r,n){var a=e.updateQueue;er=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,h=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,k=o;switch(f=t,h=r,k.tag){case 1:if(v=k.payload,typeof v=="function"){p=v.call(h,p,f);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,f=typeof v=="function"?v.call(h,p,f):v,f==null)break e;p=fe({},p,f);break e;case 2:er=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=h,c=p):u=u.next=h,l|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Rr|=l,e.lanes=l,e.memoizedState=p}}function Fd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(O(191,a));a.call(n)}}}var Dn={},It=yr(Dn),yn=yr(Dn),bn=yr(Dn);function Lr(e){if(e===Dn)throw Error(O(174));return e}function ec(e,t){switch(ie(bn,t),ie(yn,e),ie(It,Dn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cl(t,e)}ce(It),ie(It,t)}function ws(){ce(It),ce(yn),ce(bn)}function Cp(e){Lr(bn.current);var t=Lr(It.current),r=Cl(t,e.type);t!==r&&(ie(yn,e),ie(It,r))}function tc(e){yn.current===e&&(ce(It),ce(yn))}var ue=yr(0);function Wa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qi=[];function rc(){for(var e=0;e<Qi.length;e++)Qi[e]._workInProgressVersionPrimary=null;Qi.length=0}var va=Xt.ReactCurrentDispatcher,Xi=Xt.ReactCurrentBatchConfig,$r=0,pe=null,we=null,Ce=null,Ha=!1,rn=!1,jn=0,Lg=0;function Fe(){throw Error(O(321))}function sc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ct(e[r],t[r]))return!1;return!0}function nc(e,t,r,n,a,i){if($r=i,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,va.current=e===null||e.memoizedState===null?Ig:Tg,e=r(n,a),rn){i=0;do{if(rn=!1,jn=0,25<=i)throw Error(O(301));i+=1,Ce=we=null,t.updateQueue=null,va.current=Fg,e=r(n,a)}while(rn)}if(va.current=Ua,t=we!==null&&we.next!==null,$r=0,Ce=we=pe=null,Ha=!1,t)throw Error(O(300));return e}function ac(){var e=jn!==0;return jn=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?pe.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function mt(){if(we===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Ce===null?pe.memoizedState:Ce.next;if(t!==null)Ce=t,we=e;else{if(e===null)throw Error(O(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Ce===null?pe.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function wn(e,t){return typeof t=="function"?t(e):t}function qi(e){var t=mt(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=we,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if(($r&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=n):c=c.next=p,pe.lanes|=u,Rr|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,Ct(n,t.memoizedState)||(Ye=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,pe.lanes|=i,Rr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Zi(e){var t=mt(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Ct(i,t.memoizedState)||(Ye=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Mp(){}function Lp(e,t){var r=pe,n=mt(),a=t(),i=!Ct(n.memoizedState,a);if(i&&(n.memoizedState=a,Ye=!0),n=n.queue,ic(Pp.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,Nn(9,Ep.bind(null,r,n,a,t),void 0,null),Me===null)throw Error(O(349));$r&30||_p(r,t,a)}return a}function _p(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ep(e,t,r,n){t.value=r,t.getSnapshot=n,Ip(t)&&Tp(e)}function Pp(e,t,r){return r(function(){Ip(t)&&Tp(e)})}function Ip(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ct(e,r)}catch{return!0}}function Tp(e){var t=Kt(e,1);t!==null&&St(t,e,1,-1)}function Ad(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},t.queue=e,e=e.dispatch=Pg.bind(null,pe,e),[t.memoizedState,e]}function Nn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Fp(){return mt().memoizedState}function ka(e,t,r,n){var a=Lt();pe.flags|=e,a.memoizedState=Nn(1|t,r,void 0,n===void 0?null:n)}function xi(e,t,r,n){var a=mt();n=n===void 0?null:n;var i=void 0;if(we!==null){var l=we.memoizedState;if(i=l.destroy,n!==null&&sc(n,l.deps)){a.memoizedState=Nn(t,r,i,n);return}}pe.flags|=e,a.memoizedState=Nn(1|t,r,i,n)}function Dd(e,t){return ka(8390656,8,e,t)}function ic(e,t){return xi(2048,8,e,t)}function Ap(e,t){return xi(4,2,e,t)}function Dp(e,t){return xi(4,4,e,t)}function $p(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,r){return r=r!=null?r.concat([e]):null,xi(4,4,$p.bind(null,t,e),r)}function lc(){}function Op(e,t){var r=mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Bp(e,t){var r=mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vp(e,t,r){return $r&21?(Ct(r,t)||(r=G0(),pe.lanes|=r,Rr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=r)}function _g(e,t){var r=ne;ne=r!==0&&4>r?r:4,e(!0);var n=Xi.transition;Xi.transition={};try{e(!1),t()}finally{ne=r,Xi.transition=n}}function zp(){return mt().memoizedState}function Eg(e,t,r){var n=pr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Wp(e))Hp(t,r);else if(r=Np(e,t,r,n),r!==null){var a=He();St(r,e,n,a),Up(r,t,n)}}function Pg(e,t,r){var n=pr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Wp(e))Hp(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,Ct(o,l)){var c=t.interleaved;c===null?(a.next=a,Zo(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Np(e,t,a,n),r!==null&&(a=He(),St(r,e,n,a),Up(r,t,n))}}function Wp(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Hp(e,t){rn=Ha=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Up(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ro(e,r)}}var Ua={readContext:ft,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},Ig={readContext:ft,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:Dd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ka(4194308,4,$p.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var r=Lt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Lt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Eg.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Ad,useDebugValue:lc,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Ad(!1),t=e[0];return e=_g.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=pe,a=Lt();if(de){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),Me===null)throw Error(O(349));$r&30||_p(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Dd(Pp.bind(null,n,i,e),[e]),n.flags|=2048,Nn(9,Ep.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Lt(),t=Me.identifierPrefix;if(de){var r=zt,n=Vt;r=(n&~(1<<32-Nt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=jn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Lg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tg={readContext:ft,useCallback:Op,useContext:ft,useEffect:ic,useImperativeHandle:Rp,useInsertionEffect:Ap,useLayoutEffect:Dp,useMemo:Bp,useReducer:qi,useRef:Fp,useState:function(){return qi(wn)},useDebugValue:lc,useDeferredValue:function(e){var t=mt();return Vp(t,we.memoizedState,e)},useTransition:function(){var e=qi(wn)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Mp,useSyncExternalStore:Lp,useId:zp,unstable_isNewReconciler:!1},Fg={readContext:ft,useCallback:Op,useContext:ft,useEffect:ic,useImperativeHandle:Rp,useInsertionEffect:Ap,useLayoutEffect:Dp,useMemo:Bp,useReducer:Zi,useRef:Fp,useState:function(){return Zi(wn)},useDebugValue:lc,useDeferredValue:function(e){var t=mt();return we===null?t.memoizedState=e:Vp(t,we.memoizedState,e)},useTransition:function(){var e=Zi(wn)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Mp,useSyncExternalStore:Lp,useId:zp,unstable_isNewReconciler:!1};function kt(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Kl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hi={isMounted:function(e){return(e=e._reactInternals)?zr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=He(),a=pr(e),i=Ht(n,a);i.payload=t,r!=null&&(i.callback=r),t=dr(e,i,a),t!==null&&(St(t,e,a,n),ga(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=He(),a=pr(e),i=Ht(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=dr(e,i,a),t!==null&&(St(t,e,a,n),ga(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=He(),n=pr(e),a=Ht(r,n);a.tag=2,t!=null&&(a.callback=t),t=dr(e,a,n),t!==null&&(St(t,e,n,r),ga(t,e,n))}};function $d(e,t,r,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!hn(r,n)||!hn(a,i):!0}function Gp(e,t,r){var n=!1,a=hr,i=t.contextType;return typeof i=="object"&&i!==null?i=ft(i):(a=qe(t)?Ar:Re.current,n=t.contextTypes,i=(n=n!=null)?ys(e,a):hr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Rd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function Yl(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Jo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ft(i):(i=qe(t)?Ar:Re.current,a.context=ys(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Kl(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),za(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ns(e,t){try{var r="",n=t;do r+=oh(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ji(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ql(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ag=typeof WeakMap=="function"?WeakMap:Map;function Kp(e,t,r){r=Ht(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ka||(Ka=!0,ao=n),Ql(e,t)},r}function Yp(e,t,r){r=Ht(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ql(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ql(e,t),typeof n!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Od(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ag;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Qg.bind(null,e,t,r),t.then(e,e))}function Bd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vd(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ht(-1,1),t.tag=2,dr(r,t,1))),r.lanes|=1),e)}var Dg=Xt.ReactCurrentOwner,Ye=!1;function Be(e,t,r,n){t.child=e===null?wp(t,null,r,n):js(t,e.child,r,n)}function zd(e,t,r,n,a){r=r.render;var i=t.ref;return xs(t,a),n=nc(e,t,r,n,i,a),r=ac(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yt(e,t,a)):(de&&r&&Go(t),t.flags|=1,Be(e,t,n,a),t.child)}function Wd(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!xc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Qp(e,t,i,n,a)):(e=wa(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:hn,r(l,n)&&e.ref===t.ref)return Yt(e,t,a)}return t.flags|=1,e=fr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Qp(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(hn(i,n)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Yt(e,t,a)}return Xl(e,t,r,n,a)}function Xp(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(ls,rt),rt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(ls,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ie(ls,rt),rt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ie(ls,rt),rt|=n;return Be(e,t,a,r),t.child}function qp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xl(e,t,r,n,a){var i=qe(r)?Ar:Re.current;return i=ys(t,i),xs(t,a),r=nc(e,t,r,n,i,a),n=ac(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yt(e,t,a)):(de&&n&&Go(t),t.flags|=1,Be(e,t,r,a),t.child)}function Hd(e,t,r,n,a){if(qe(r)){var i=!0;$a(t)}else i=!1;if(xs(t,a),t.stateNode===null)ya(e,t),Gp(t,r,n),Yl(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=ft(d):(d=qe(r)?Ar:Re.current,d=ys(t,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Rd(t,l,n,d),er=!1;var f=t.memoizedState;l.state=f,za(t,n,l,a),c=t.memoizedState,o!==n||f!==c||Xe.current||er?(typeof u=="function"&&(Kl(t,r,u,n),c=t.memoizedState),(o=er||$d(t,r,o,n,f,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Sp(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:kt(t.type,o),l.props=d,p=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=ft(c):(c=qe(r)?Ar:Re.current,c=ys(t,c));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||f!==c)&&Rd(t,l,n,c),er=!1,f=t.memoizedState,l.state=f,za(t,n,l,a);var v=t.memoizedState;o!==p||f!==v||Xe.current||er?(typeof h=="function"&&(Kl(t,r,h,n),v=t.memoizedState),(d=er||$d(t,r,d,n,f,v,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),l.props=n,l.state=v,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return ql(e,t,r,n,i,a)}function ql(e,t,r,n,a,i){qp(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&_d(t,r,!1),Yt(e,t,i);n=t.stateNode,Dg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=js(t,e.child,null,i),t.child=js(t,null,o,i)):Be(e,t,o,i),t.memoizedState=n.state,a&&_d(t,r,!0),t.child}function Zp(e){var t=e.stateNode;t.pendingContext?Ld(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ld(e,t.context,!1),ec(e,t.containerInfo)}function Ud(e,t,r,n,a){return bs(),Yo(a),t.flags|=256,Be(e,t,r,n),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function Jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jp(e,t,r){var n=t.pendingProps,a=ue.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(ue,a&1),e===null)return Ul(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=ki(l,n,0,null),e=Tr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Jl(r),t.memoizedState=Zl,e):oc(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return $g(e,t,l,n,o,a,r);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=fr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=fr(o,i):(i=Tr(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Jl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Zl,n}return i=e.child,e=i.sibling,n=fr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function oc(e,t){return t=ki({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zn(e,t,r,n){return n!==null&&Yo(n),js(t,e.child,null,r),e=oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $g(e,t,r,n,a,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Ji(Error(O(422))),Zn(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=ki({mode:"visible",children:n.children},a,0,null),i=Tr(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&js(t,e.child,null,l),t.child.memoizedState=Jl(l),t.memoizedState=Zl,i);if(!(t.mode&1))return Zn(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(O(419)),n=Ji(i,n,void 0),Zn(e,t,l,n)}if(o=(l&e.childLanes)!==0,Ye||o){if(n=Me,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Kt(e,a),St(n,e,a,-1))}return mc(),n=Ji(Error(O(421))),Zn(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Xg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,st=cr(a.nextSibling),nt=t,de=!0,jt=null,e!==null&&(ct[dt++]=Vt,ct[dt++]=zt,ct[dt++]=Dr,Vt=e.id,zt=e.overflow,Dr=t),t=oc(t,n.children),t.flags|=4096,t)}function Gd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Gl(e.return,t,r)}function el(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function ef(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Be(e,t,n.children,r),n=ue.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gd(e,r,t);else if(e.tag===19)Gd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ie(ue,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Wa(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),el(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wa(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}el(t,!0,r,null,i);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=fr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Rg(e,t,r){switch(t.tag){case 3:Zp(t),bs();break;case 5:Cp(t);break;case 1:qe(t.type)&&$a(t);break;case 4:ec(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ie(Ba,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ie(ue,ue.current&1),t.flags|=128,null):r&t.child.childLanes?Jp(e,t,r):(ie(ue,ue.current&1),e=Yt(e,t,r),e!==null?e.sibling:null);ie(ue,ue.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ef(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(ue,ue.current),n)break;return null;case 22:case 23:return t.lanes=0,Xp(e,t,r)}return Yt(e,t,r)}var tf,eo,rf,sf;tf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eo=function(){};rf=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Lr(It.current);var i=null;switch(r){case"input":a=jl(e,a),n=jl(e,n),i=[];break;case"select":a=fe({},a,{value:void 0}),n=fe({},n,{value:void 0}),i=[];break;case"textarea":a=Sl(e,a),n=Sl(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Aa)}Ml(r,n);var l;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(cn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(cn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&le("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};sf=function(e,t,r,n){r!==n&&(t.flags|=4)};function Bs(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Og(e,t,r){var n=t.pendingProps;switch(Ko(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return qe(t.type)&&Da(),Ae(t),null;case 3:return n=t.stateNode,ws(),ce(Xe),ce(Re),rc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(oo(jt),jt=null))),eo(e,t),Ae(t),null;case 5:tc(t);var a=Lr(bn.current);if(r=t.type,e!==null&&t.stateNode!=null)rf(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(O(166));return Ae(t),null}if(e=Lr(It.current),Xn(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[_t]=t,n[kn]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(a=0;a<Ys.length;a++)le(Ys[a],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":td(n,i),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},le("invalid",n);break;case"textarea":sd(n,i),le("invalid",n)}Ml(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Qn(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Qn(n.textContent,o,e),a=["children",""+o]):cn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",n)}switch(r){case"input":Vn(n),rd(n,i,!0);break;case"textarea":Vn(n),nd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Aa)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=P0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[_t]=t,e[kn]=n,tf(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ll(r,n),r){case"dialog":le("cancel",e),le("close",e),a=n;break;case"iframe":case"object":case"embed":le("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ys.length;a++)le(Ys[a],e);a=n;break;case"source":le("error",e),a=n;break;case"img":case"image":case"link":le("error",e),le("load",e),a=n;break;case"details":le("toggle",e),a=n;break;case"input":td(e,n),a=jl(e,n),le("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=fe({},n,{value:void 0}),le("invalid",e);break;case"textarea":sd(e,n),a=Sl(e,n),le("invalid",e);break;default:a=n}Ml(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?F0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&I0(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&dn(e,c):typeof c=="number"&&dn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&le("scroll",e):c!=null&&Io(e,i,c,l))}switch(r){case"input":Vn(e),rd(e,n,!1);break;case"textarea":Vn(e),nd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?us(e,!!n.multiple,i,!1):n.defaultValue!=null&&us(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Aa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ae(t),null;case 6:if(e&&t.stateNode!=null)sf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(O(166));if(r=Lr(bn.current),Lr(It.current),Xn(t)){if(n=t.stateNode,r=t.memoizedProps,n[_t]=t,(i=n.nodeValue!==r)&&(e=nt,e!==null))switch(e.tag){case 3:Qn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qn(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_t]=t,t.stateNode=n}return Ae(t),null;case 13:if(ce(ue),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&st!==null&&t.mode&1&&!(t.flags&128))bp(),bs(),t.flags|=98560,i=!1;else if(i=Xn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[_t]=t}else bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ae(t),i=!1}else jt!==null&&(oo(jt),jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ue.current&1?Se===0&&(Se=3):mc())),t.updateQueue!==null&&(t.flags|=4),Ae(t),null);case 4:return ws(),eo(e,t),e===null&&gn(t.stateNode.containerInfo),Ae(t),null;case 10:return qo(t.type._context),Ae(t),null;case 17:return qe(t.type)&&Da(),Ae(t),null;case 19:if(ce(ue),i=t.memoizedState,i===null)return Ae(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Bs(i,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Wa(e),l!==null){for(t.flags|=128,Bs(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(ue,ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&ye()>Ss&&(t.flags|=128,n=!0,Bs(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wa(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Bs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!de)return Ae(t),null}else 2*ye()-i.renderingStartTime>Ss&&r!==1073741824&&(t.flags|=128,n=!0,Bs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ye(),t.sibling=null,r=ue.current,ie(ue,n?r&1|2:r&1),t):(Ae(t),null);case 22:case 23:return fc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?rt&1073741824&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Bg(e,t){switch(Ko(t),t.tag){case 1:return qe(t.type)&&Da(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ws(),ce(Xe),ce(Re),rc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tc(t),null;case 13:if(ce(ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(ue),null;case 4:return ws(),null;case 10:return qo(t.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var Jn=!1,De=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,W=null;function is(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xe(e,t,n)}else r.current=null}function to(e,t,r){try{r()}catch(n){xe(e,t,n)}}var Kd=!1;function zg(e,t){if(Rl=Ia,e=op(),Uo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,p=e,f=null;t:for(;;){for(var h;p!==r||a!==0&&p.nodeType!==3||(o=l+a),p!==i||n!==0&&p.nodeType!==3||(c=l+n),p.nodeType===3&&(l+=p.nodeValue.length),(h=p.firstChild)!==null;)f=p,p=h;for(;;){if(p===e)break t;if(f===r&&++d===a&&(o=l),f===i&&++u===n&&(c=l),(h=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ol={focusedElem:e,selectionRange:r},Ia=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,b=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?k:kt(t.type,k),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(j){xe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return v=Kd,Kd=!1,v}function sn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&to(t,r,i)}a=a.next}while(a!==n)}}function gi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ro(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nf(e){var t=e.alternate;t!==null&&(e.alternate=null,nf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_t],delete t[kn],delete t[zl],delete t[Ng],delete t[Sg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function af(e){return e.tag===5||e.tag===3||e.tag===4}function Yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function so(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Aa));else if(n!==4&&(e=e.child,e!==null))for(so(e,t,r),e=e.sibling;e!==null;)so(e,t,r),e=e.sibling}function no(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(no(e,t,r),e=e.sibling;e!==null;)no(e,t,r),e=e.sibling}var Le=null,yt=!1;function qt(e,t,r){for(r=r.child;r!==null;)lf(e,t,r),r=r.sibling}function lf(e,t,r){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(ci,r)}catch{}switch(r.tag){case 5:De||is(r,t);case 6:var n=Le,a=yt;Le=null,qt(e,t,r),Le=n,yt=a,Le!==null&&(yt?(e=Le,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Le.removeChild(r.stateNode));break;case 18:Le!==null&&(yt?(e=Le,r=r.stateNode,e.nodeType===8?Ki(e.parentNode,r):e.nodeType===1&&Ki(e,r),mn(e)):Ki(Le,r.stateNode));break;case 4:n=Le,a=yt,Le=r.stateNode.containerInfo,yt=!0,qt(e,t,r),Le=n,yt=a;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&to(r,t,l),a=a.next}while(a!==n)}qt(e,t,r);break;case 1:if(!De&&(is(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){xe(r,t,o)}qt(e,t,r);break;case 21:qt(e,t,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,qt(e,t,r),De=n):qt(e,t,r);break;default:qt(e,t,r)}}function Qd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Vg),t.forEach(function(n){var a=qg.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Le=o.stateNode,yt=!1;break e;case 3:Le=o.stateNode.containerInfo,yt=!0;break e;case 4:Le=o.stateNode.containerInfo,yt=!0;break e}o=o.return}if(Le===null)throw Error(O(160));lf(i,l,a),Le=null,yt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){xe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)of(t,e),t=t.sibling}function of(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),Mt(e),n&4){try{sn(3,e,e.return),gi(3,e)}catch(k){xe(e,e.return,k)}try{sn(5,e,e.return)}catch(k){xe(e,e.return,k)}}break;case 1:vt(t,e),Mt(e),n&512&&r!==null&&is(r,r.return);break;case 5:if(vt(t,e),Mt(e),n&512&&r!==null&&is(r,r.return),e.flags&32){var a=e.stateNode;try{dn(a,"")}catch(k){xe(e,e.return,k)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&_0(a,i),Ll(o,l);var d=Ll(o,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];u==="style"?F0(a,p):u==="dangerouslySetInnerHTML"?I0(a,p):u==="children"?dn(a,p):Io(a,u,p,d)}switch(o){case"input":wl(a,i);break;case"textarea":E0(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?us(a,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?us(a,!!i.multiple,i.defaultValue,!0):us(a,!!i.multiple,i.multiple?[]:"",!1))}a[kn]=i}catch(k){xe(e,e.return,k)}}break;case 6:if(vt(t,e),Mt(e),n&4){if(e.stateNode===null)throw Error(O(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(k){xe(e,e.return,k)}}break;case 3:if(vt(t,e),Mt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mn(t.containerInfo)}catch(k){xe(e,e.return,k)}break;case 4:vt(t,e),Mt(e);break;case 13:vt(t,e),Mt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(uc=ye())),n&4&&Qd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(De=(d=De)||u,vt(t,e),De=d):vt(t,e),Mt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(W=e,u=e.child;u!==null;){for(p=W=u;W!==null;){switch(f=W,h=f.child,f.tag){case 0:case 11:case 14:case 15:sn(4,f,f.return);break;case 1:is(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){xe(n,r,k)}}break;case 5:is(f,f.return);break;case 22:if(f.memoizedState!==null){qd(p);continue}}h!==null?(h.return=f,W=h):qd(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{a=p.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=T0("display",l))}catch(k){xe(e,e.return,k)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){xe(e,e.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vt(t,e),Mt(e),n&4&&Qd(e);break;case 21:break;default:vt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(af(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(dn(a,""),n.flags&=-33);var i=Yd(e);no(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Yd(e);so(e,o,l);break;default:throw Error(O(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wg(e,t,r){W=e,cf(e)}function cf(e,t,r){for(var n=(e.mode&1)!==0;W!==null;){var a=W,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Jn;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||De;o=Jn;var d=De;if(Jn=l,(De=c)&&!d)for(W=a;W!==null;)l=W,c=l.child,l.tag===22&&l.memoizedState!==null?Zd(a):c!==null?(c.return=l,W=c):Zd(a);for(;i!==null;)W=i,cf(i),i=i.sibling;W=a,Jn=o,De=d}Xd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,W=i):Xd(e)}}function Xd(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||gi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!De)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:kt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fd(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Fd(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&mn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}De||t.flags&512&&ro(t)}catch(f){xe(t,t.return,f)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function qd(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function Zd(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gi(4,t)}catch(c){xe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){xe(t,a,c)}}var i=t.return;try{ro(t)}catch(c){xe(t,i,c)}break;case 5:var l=t.return;try{ro(t)}catch(c){xe(t,l,c)}}}catch(c){xe(t,t.return,c)}if(t===e){W=null;break}var o=t.sibling;if(o!==null){o.return=t.return,W=o;break}W=t.return}}var Hg=Math.ceil,Ga=Xt.ReactCurrentDispatcher,cc=Xt.ReactCurrentOwner,pt=Xt.ReactCurrentBatchConfig,te=0,Me=null,be=null,Ee=0,rt=0,ls=yr(0),Se=0,Sn=null,Rr=0,vi=0,dc=0,nn=null,Ke=null,uc=0,Ss=1/0,Ot=null,Ka=!1,ao=null,ur=null,ea=!1,nr=null,Ya=0,an=0,io=null,ba=-1,ja=0;function He(){return te&6?ye():ba!==-1?ba:ba=ye()}function pr(e){return e.mode&1?te&2&&Ee!==0?Ee&-Ee:Mg.transition!==null?(ja===0&&(ja=G0()),ja):(e=ne,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function St(e,t,r,n){if(50<an)throw an=0,io=null,Error(O(185));Tn(e,r,n),(!(te&2)||e!==Me)&&(e===Me&&(!(te&2)&&(vi|=r),Se===4&&rr(e,Ee)),Ze(e,n),r===1&&te===0&&!(t.mode&1)&&(Ss=ye()+500,mi&&br()))}function Ze(e,t){var r=e.callbackNode;Mh(e,t);var n=Pa(e,e===Me?Ee:0);if(n===0)r!==null&&ld(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ld(r),t===1)e.tag===0?Cg(Jd.bind(null,e)):vp(Jd.bind(null,e)),jg(function(){!(te&6)&&br()}),r=null;else{switch(K0(n)){case 1:r=$o;break;case 4:r=H0;break;case 16:r=Ea;break;case 536870912:r=U0;break;default:r=Ea}r=gf(r,df.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function df(e,t){if(ba=-1,ja=0,te&6)throw Error(O(327));var r=e.callbackNode;if(hs()&&e.callbackNode!==r)return null;var n=Pa(e,e===Me?Ee:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Qa(e,n);else{t=n;var a=te;te|=2;var i=pf();(Me!==e||Ee!==t)&&(Ot=null,Ss=ye()+500,Ir(e,t));do try{Kg();break}catch(o){uf(e,o)}while(!0);Xo(),Ga.current=i,te=a,be!==null?t=0:(Me=null,Ee=0,t=Se)}if(t!==0){if(t===2&&(a=Tl(e),a!==0&&(n=a,t=lo(e,a))),t===1)throw r=Sn,Ir(e,0),rr(e,n),Ze(e,ye()),r;if(t===6)rr(e,n);else{if(a=e.current.alternate,!(n&30)&&!Ug(a)&&(t=Qa(e,n),t===2&&(i=Tl(e),i!==0&&(n=i,t=lo(e,i))),t===1))throw r=Sn,Ir(e,0),rr(e,n),Ze(e,ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(O(345));case 2:Sr(e,Ke,Ot);break;case 3:if(rr(e,n),(n&130023424)===n&&(t=uc+500-ye(),10<t)){if(Pa(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){He(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Vl(Sr.bind(null,e,Ke,Ot),t);break}Sr(e,Ke,Ot);break;case 4:if(rr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-Nt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hg(n/1960))-n,10<n){e.timeoutHandle=Vl(Sr.bind(null,e,Ke,Ot),n);break}Sr(e,Ke,Ot);break;case 5:Sr(e,Ke,Ot);break;default:throw Error(O(329))}}}return Ze(e,ye()),e.callbackNode===r?df.bind(null,e):null}function lo(e,t){var r=nn;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Qa(e,t),e!==2&&(t=Ke,Ke=r,t!==null&&oo(t)),e}function oo(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function Ug(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ct(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~dc,t&=~vi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Nt(t),n=1<<r;e[r]=-1,t&=~n}}function Jd(e){if(te&6)throw Error(O(327));hs();var t=Pa(e,0);if(!(t&1))return Ze(e,ye()),null;var r=Qa(e,t);if(e.tag!==0&&r===2){var n=Tl(e);n!==0&&(t=n,r=lo(e,n))}if(r===1)throw r=Sn,Ir(e,0),rr(e,t),Ze(e,ye()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,Ke,Ot),Ze(e,ye()),null}function pc(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(Ss=ye()+500,mi&&br())}}function Or(e){nr!==null&&nr.tag===0&&!(te&6)&&hs();var t=te;te|=1;var r=pt.transition,n=ne;try{if(pt.transition=null,ne=1,e)return e()}finally{ne=n,pt.transition=r,te=t,!(te&6)&&br()}}function fc(){rt=ls.current,ce(ls)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,bg(r)),be!==null)for(r=be.return;r!==null;){var n=r;switch(Ko(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Da();break;case 3:ws(),ce(Xe),ce(Re),rc();break;case 5:tc(n);break;case 4:ws();break;case 13:ce(ue);break;case 19:ce(ue);break;case 10:qo(n.type._context);break;case 22:case 23:fc()}r=r.return}if(Me=e,be=e=fr(e.current,null),Ee=rt=t,Se=0,Sn=null,dc=vi=Rr=0,Ke=nn=null,Mr!==null){for(t=0;t<Mr.length;t++)if(r=Mr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}Mr=null}return e}function uf(e,t){do{var r=be;try{if(Xo(),va.current=Ua,Ha){for(var n=pe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ha=!1}if($r=0,Ce=we=pe=null,rn=!1,jn=0,cc.current=null,r===null||r.return===null){Se=1,Sn=t,be=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Ee,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Bd(l);if(h!==null){h.flags&=-257,Vd(h,l,o,i,t),h.mode&1&&Od(i,d,t),t=h,c=d;var v=t.updateQueue;if(v===null){var k=new Set;k.add(c),t.updateQueue=k}else v.add(c);break e}else{if(!(t&1)){Od(i,d,t),mc();break e}c=Error(O(426))}}else if(de&&o.mode&1){var b=Bd(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Vd(b,l,o,i,t),Yo(Ns(c,o));break e}}i=c=Ns(c,o),Se!==4&&(Se=2),nn===null?nn=[i]:nn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Kp(i,c,t);Td(i,g);break e;case 1:o=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ur===null||!ur.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Yp(i,o,t);Td(i,j);break e}}i=i.return}while(i!==null)}mf(r)}catch(N){t=N,be===r&&r!==null&&(be=r=r.return);continue}break}while(!0)}function pf(){var e=Ga.current;return Ga.current=Ua,e===null?Ua:e}function mc(){(Se===0||Se===3||Se===2)&&(Se=4),Me===null||!(Rr&268435455)&&!(vi&268435455)||rr(Me,Ee)}function Qa(e,t){var r=te;te|=2;var n=pf();(Me!==e||Ee!==t)&&(Ot=null,Ir(e,t));do try{Gg();break}catch(a){uf(e,a)}while(!0);if(Xo(),te=r,Ga.current=n,be!==null)throw Error(O(261));return Me=null,Ee=0,Se}function Gg(){for(;be!==null;)ff(be)}function Kg(){for(;be!==null&&!vh();)ff(be)}function ff(e){var t=hf(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?mf(e):be=t,cc.current=null}function mf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Bg(r,t),r!==null){r.flags&=32767,be=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,be=null;return}}else if(r=Og(r,t,rt),r!==null){be=r;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Se===0&&(Se=5)}function Sr(e,t,r){var n=ne,a=pt.transition;try{pt.transition=null,ne=1,Yg(e,t,r,n)}finally{pt.transition=a,ne=n}return null}function Yg(e,t,r,n){do hs();while(nr!==null);if(te&6)throw Error(O(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Lh(e,i),e===Me&&(be=Me=null,Ee=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ea||(ea=!0,gf(Ea,function(){return hs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var l=ne;ne=1;var o=te;te|=4,cc.current=null,zg(e,r),of(r,e),mg(Ol),Ia=!!Rl,Ol=Rl=null,e.current=r,Wg(r),kh(),te=o,ne=l,pt.transition=i}else e.current=r;if(ea&&(ea=!1,nr=e,Ya=a),i=e.pendingLanes,i===0&&(ur=null),jh(r.stateNode),Ze(e,ye()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ka)throw Ka=!1,e=ao,ao=null,e;return Ya&1&&e.tag!==0&&hs(),i=e.pendingLanes,i&1?e===io?an++:(an=0,io=e):an=0,br(),null}function hs(){if(nr!==null){var e=K0(Ya),t=pt.transition,r=ne;try{if(pt.transition=null,ne=16>e?16:e,nr===null)var n=!1;else{if(e=nr,nr=null,Ya=0,te&6)throw Error(O(331));var a=te;for(te|=4,W=e.current;W!==null;){var i=W,l=i.child;if(W.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(W=d;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:sn(8,u,i)}var p=u.child;if(p!==null)p.return=u,W=p;else for(;W!==null;){u=W;var f=u.sibling,h=u.return;if(nf(u),u===d){W=null;break}if(f!==null){f.return=h,W=f;break}W=h}}}var v=i.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}W=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,W=l;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,W=g;break e}W=i.return}}var m=e.current;for(W=m;W!==null;){l=W;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,W=x;else e:for(l=m;W!==null;){if(o=W,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gi(9,o)}}catch(N){xe(o,o.return,N)}if(o===l){W=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,W=j;break e}W=o.return}}if(te=a,br(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(ci,e)}catch{}n=!0}return n}finally{ne=r,pt.transition=t}}return!1}function eu(e,t,r){t=Ns(r,t),t=Kp(e,t,1),e=dr(e,t,1),t=He(),e!==null&&(Tn(e,1,t),Ze(e,t))}function xe(e,t,r){if(e.tag===3)eu(e,e,r);else for(;t!==null;){if(t.tag===3){eu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ur===null||!ur.has(n))){e=Ns(r,e),e=Yp(t,e,1),t=dr(t,e,1),e=He(),t!==null&&(Tn(t,1,e),Ze(t,e));break}}t=t.return}}function Qg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&r,Me===e&&(Ee&r)===r&&(Se===4||Se===3&&(Ee&130023424)===Ee&&500>ye()-uc?Ir(e,0):dc|=r),Ze(e,t)}function xf(e,t){t===0&&(e.mode&1?(t=Hn,Hn<<=1,!(Hn&130023424)&&(Hn=4194304)):t=1);var r=He();e=Kt(e,t),e!==null&&(Tn(e,t,r),Ze(e,r))}function Xg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xf(e,r)}function qg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(t),xf(e,r)}var hf;hf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Ye=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ye=!1,Rg(e,t,r);Ye=!!(e.flags&131072)}else Ye=!1,de&&t.flags&1048576&&kp(t,Oa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ya(e,t),e=t.pendingProps;var a=ys(t,Re.current);xs(t,r),a=nc(null,t,n,e,a,r);var i=ac();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(n)?(i=!0,$a(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jo(t),a.updater=hi,t.stateNode=a,a._reactInternals=t,Yl(t,n,e,r),t=ql(null,t,n,!0,i,r)):(t.tag=0,de&&i&&Go(t),Be(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ya(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Jg(n),e=kt(n,e),a){case 0:t=Xl(null,t,n,e,r);break e;case 1:t=Hd(null,t,n,e,r);break e;case 11:t=zd(null,t,n,e,r);break e;case 14:t=Wd(null,t,n,kt(n.type,e),r);break e}throw Error(O(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:kt(n,a),Xl(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:kt(n,a),Hd(e,t,n,a,r);case 3:e:{if(Zp(t),e===null)throw Error(O(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Sp(e,t),za(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ns(Error(O(423)),t),t=Ud(e,t,n,r,a);break e}else if(n!==a){a=Ns(Error(O(424)),t),t=Ud(e,t,n,r,a);break e}else for(st=cr(t.stateNode.containerInfo.firstChild),nt=t,de=!0,jt=null,r=wp(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bs(),n===a){t=Yt(e,t,r);break e}Be(e,t,n,r)}t=t.child}return t;case 5:return Cp(t),e===null&&Ul(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Bl(n,a)?l=null:i!==null&&Bl(n,i)&&(t.flags|=32),qp(e,t),Be(e,t,l,r),t.child;case 6:return e===null&&Ul(t),null;case 13:return Jp(e,t,r);case 4:return ec(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=js(t,null,n,r):Be(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:kt(n,a),zd(e,t,n,a,r);case 7:return Be(e,t,t.pendingProps,r),t.child;case 8:return Be(e,t,t.pendingProps.children,r),t.child;case 12:return Be(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ie(Ba,n._currentValue),n._currentValue=l,i!==null)if(Ct(i.value,l)){if(i.children===a.children&&!Xe.current){t=Yt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ht(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Gl(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(O(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Gl(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Be(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,xs(t,r),a=ft(a),n=n(a),t.flags|=1,Be(e,t,n,r),t.child;case 14:return n=t.type,a=kt(n,t.pendingProps),a=kt(n.type,a),Wd(e,t,n,a,r);case 15:return Qp(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:kt(n,a),ya(e,t),t.tag=1,qe(n)?(e=!0,$a(t)):e=!1,xs(t,r),Gp(t,n,a),Yl(t,n,a,r),ql(null,t,n,!0,e,r);case 19:return ef(e,t,r);case 22:return Xp(e,t,r)}throw Error(O(156,t.tag))};function gf(e,t){return W0(e,t)}function Zg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,r,n){return new Zg(e,t,r,n)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jg(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fo)return 11;if(e===Ao)return 14}return 2}function fr(e,t){var r=e.alternate;return r===null?(r=ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wa(e,t,r,n,a,i){var l=2;if(n=e,typeof e=="function")xc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case qr:return Tr(r.children,a,i,t);case To:l=8,a|=8;break;case vl:return e=ut(12,r,t,a|2),e.elementType=vl,e.lanes=i,e;case kl:return e=ut(13,r,t,a),e.elementType=kl,e.lanes=i,e;case yl:return e=ut(19,r,t,a),e.elementType=yl,e.lanes=i,e;case C0:return ki(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N0:l=10;break e;case S0:l=9;break e;case Fo:l=11;break e;case Ao:l=14;break e;case Jt:l=16,n=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=ut(l,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Tr(e,t,r,n){return e=ut(7,e,n,t),e.lanes=r,e}function ki(e,t,r,n){return e=ut(22,e,n,t),e.elementType=C0,e.lanes=r,e.stateNode={isHidden:!1},e}function tl(e,t,r){return e=ut(6,e,null,t),e.lanes=r,e}function rl(e,t,r){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ev(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Di(0),this.expirationTimes=Di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function hc(e,t,r,n,a,i,l,o,c){return e=new ev(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ut(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(i),e}function tv(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vf(e){if(!e)return hr;e=e._reactInternals;e:{if(zr(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(qe(r))return gp(e,r,t)}return t}function kf(e,t,r,n,a,i,l,o,c){return e=hc(r,n,!0,e,a,i,l,o,c),e.context=vf(null),r=e.current,n=He(),a=pr(r),i=Ht(n,a),i.callback=t??null,dr(r,i,a),e.current.lanes=a,Tn(e,a,n),Ze(e,n),e}function yi(e,t,r,n){var a=t.current,i=He(),l=pr(a);return r=vf(r),t.context===null?t.context=r:t.pendingContext=r,t=Ht(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=dr(a,t,l),e!==null&&(St(e,a,l,i),ga(e,a,l)),l}function Xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gc(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function rv(){return null}var yf=typeof reportError=="function"?reportError:function(e){console.error(e)};function vc(e){this._internalRoot=e}bi.prototype.render=vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));yi(e,t,null,null)};bi.prototype.unmount=vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){yi(null,e,null,null)}),t[Gt]=null}};function bi(e){this._internalRoot=e}bi.prototype.unstable_scheduleHydration=function(e){if(e){var t=X0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tr.length&&t!==0&&t<tr[r].priority;r++);tr.splice(r,0,e),r===0&&Z0(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ji(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ru(){}function sv(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Xa(l);i.call(d)}}var l=kf(t,n,e,0,null,!1,!1,"",ru);return e._reactRootContainer=l,e[Gt]=l.current,gn(e.nodeType===8?e.parentNode:e),Or(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Xa(c);o.call(d)}}var c=hc(e,0,!1,null,null,!1,!1,"",ru);return e._reactRootContainer=c,e[Gt]=c.current,gn(e.nodeType===8?e.parentNode:e),Or(function(){yi(t,c,r,n)}),c}function wi(e,t,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Xa(l);o.call(c)}}yi(t,l,e,a)}else l=sv(r,t,e,a,n);return Xa(l)}Y0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ks(t.pendingLanes);r!==0&&(Ro(t,r|1),Ze(t,ye()),!(te&6)&&(Ss=ye()+500,br()))}break;case 13:Or(function(){var n=Kt(e,1);if(n!==null){var a=He();St(n,e,1,a)}}),gc(e,1)}};Oo=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var r=He();St(t,e,134217728,r)}gc(e,134217728)}};Q0=function(e){if(e.tag===13){var t=pr(e),r=Kt(e,t);if(r!==null){var n=He();St(r,e,t,n)}gc(e,t)}};X0=function(){return ne};q0=function(e,t){var r=ne;try{return ne=e,t()}finally{ne=r}};El=function(e,t,r){switch(t){case"input":if(wl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=fi(n);if(!a)throw Error(O(90));L0(n),wl(n,a)}}}break;case"textarea":E0(e,r);break;case"select":t=r.value,t!=null&&us(e,!!r.multiple,t,!1)}};$0=pc;R0=Or;var nv={usingClientEntryPoint:!1,Events:[An,ts,fi,A0,D0,pc]},Vs={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},av={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=V0(e),e===null?null:e.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{ci=ta.inject(av),Pt=ta}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nv;it.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(O(200));return tv(e,t,null,r)};it.createRoot=function(e,t){if(!kc(e))throw Error(O(299));var r=!1,n="",a=yf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=hc(e,1,!1,null,null,r,!1,n,a),e[Gt]=t.current,gn(e.nodeType===8?e.parentNode:e),new vc(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=V0(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return Or(e)};it.hydrate=function(e,t,r){if(!ji(t))throw Error(O(200));return wi(null,e,t,!0,r)};it.hydrateRoot=function(e,t,r){if(!kc(e))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=yf;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=kf(t,null,e,1,r??null,a,!1,i,l),e[Gt]=t.current,gn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new bi(t)};it.render=function(e,t,r){if(!ji(t))throw Error(O(200));return wi(null,e,t,!1,r)};it.unmountComponentAtNode=function(e){if(!ji(e))throw Error(O(40));return e._reactRootContainer?(Or(function(){wi(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};it.unstable_batchedUpdates=pc;it.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ji(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return wi(e,t,r,!1,n)};it.version="18.3.1-next-f1338f8080-20240426";function bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bf)}catch(e){console.error(e)}}bf(),y0.exports=it;var jf=y0.exports,su=jf;hl.createRoot=su.createRoot,hl.hydrateRoot=su.hydrateRoot;const iv={},nu=e=>{let t;const r=new Set,n=(u,p)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=p??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(v=>v(t,h))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(iv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,a,c);return c},lv=e=>e?nu(e):nu;var wf={exports:{}},Nf={},Sf={exports:{}},Cf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cs=S;function ov(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cv=typeof Object.is=="function"?Object.is:ov,dv=Cs.useState,uv=Cs.useEffect,pv=Cs.useLayoutEffect,fv=Cs.useDebugValue;function mv(e,t){var r=t(),n=dv({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return pv(function(){a.value=r,a.getSnapshot=t,sl(a)&&i({inst:a})},[e,r,t]),uv(function(){return sl(a)&&i({inst:a}),e(function(){sl(a)&&i({inst:a})})},[e]),fv(r),r}function sl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cv(e,r)}catch{return!0}}function xv(e,t){return t()}var hv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xv:mv;Cf.useSyncExternalStore=Cs.useSyncExternalStore!==void 0?Cs.useSyncExternalStore:hv;Sf.exports=Cf;var gv=Sf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=S,vv=gv;function kv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yv=typeof Object.is=="function"?Object.is:kv,bv=vv.useSyncExternalStore,jv=Ni.useRef,wv=Ni.useEffect,Nv=Ni.useMemo,Sv=Ni.useDebugValue;Nf.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=jv(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=Nv(function(){function c(h){if(!d){if(d=!0,u=h,h=n(h),a!==void 0&&l.hasValue){var v=l.value;if(a(v,h))return p=v}return p=h}if(v=p,yv(u,h))return v;var k=n(h);return a!==void 0&&a(v,k)?(u=h,v):(u=h,p=k)}var d=!1,u,p,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,a]);var o=bv(e,i[0],i[1]);return wv(function(){l.hasValue=!0,l.value=o},[o]),Sv(o),o};wf.exports=Nf;var Cv=wf.exports;const Mv=o0(Cv),Mf={},{useDebugValue:Lv}=_o,{useSyncExternalStoreWithSelector:_v}=Mv;let au=!1;const Ev=e=>e;function Pv(e,t=Ev,r){(Mf?"production":void 0)!=="production"&&r&&!au&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),au=!0);const n=_v(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Lv(n),n}const Iv=e=>{(Mf?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?lv(e):e,r=(n,a)=>Pv(t,n,a);return Object.assign(r,t),r},Lf=e=>Iv,Tv={};function Fv(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const l=c=>c===null?null:JSON.parse(c,void 0),o=(i=r.getItem(a))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const Cn=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return Cn(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Cn(n)(r)}}}},Av=(e,t)=>(r,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,g)=>({...g,...b}),...t},l=!1;const o=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...b)},n,a);const u=Cn(i.serialize),p=()=>{const b=i.partialize({...n()});let g;const m=u({state:b,version:i.version}).then(x=>d.setItem(i.name,x)).catch(x=>{g=x});if(g)throw g;return m},f=a.setState;a.setState=(b,g)=>{f(b,g),p()};const h=e((...b)=>{r(...b),p()},n,a);let v;const k=()=>{var b;if(!d)return;l=!1,o.forEach(m=>m(n()));const g=((b=i.onRehydrateStorage)==null?void 0:b.call(i,n()))||void 0;return Cn(d.getItem.bind(d))(i.name).then(m=>{if(m)return i.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==i.version){if(i.migrate)return i.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var x;return v=i.merge(m,(x=n())!=null?x:h),r(v,!0),p()}).then(()=>{g==null||g(v,void 0),l=!0,c.forEach(m=>m(v))}).catch(m=>{g==null||g(void 0,m)})};return a.persist={setOptions:b=>{i={...i,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>k(),hasHydrated:()=>l,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},k(),v||h},Dv=(e,t)=>(r,n,a)=>{let i={storage:Fv(()=>localStorage),partialize:k=>k,version:0,merge:(k,b)=>({...b,...k}),...t},l=!1;const o=new Set,c=new Set;let d=i.storage;if(!d)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...k)},n,a);const u=()=>{const k=i.partialize({...n()});return d.setItem(i.name,{state:k,version:i.version})},p=a.setState;a.setState=(k,b)=>{p(k,b),u()};const f=e((...k)=>{r(...k),u()},n,a);a.getInitialState=()=>f;let h;const v=()=>{var k,b;if(!d)return;l=!1,o.forEach(m=>{var x;return m((x=n())!=null?x:f)});const g=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(k=n())!=null?k:f))||void 0;return Cn(d.getItem.bind(d))(i.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==i.version){if(i.migrate)return[!0,i.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var x;const[j,N]=m;if(h=i.merge(N,(x=n())!=null?x:f),r(h,!0),j)return u()}).then(()=>{g==null||g(h,void 0),h=n(),l=!0,c.forEach(m=>m(h))}).catch(m=>{g==null||g(void 0,m)})};return a.persist={setOptions:k=>{i={...i,...k},k.storage&&(d=k.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:k=>(o.add(k),()=>{o.delete(k)}),onFinishHydration:k=>(c.add(k),()=>{c.delete(k)})},i.skipHydration||v(),h||f},$v=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Tv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Av(e,t)):Dv(e,t),Rv=$v,iu={totalLines:0,parsedLines:0,errorLines:0,duplicateLines:0,plansFound:0,vmsFound:0},lu={totalPlans:0,running:0,succeeded:0,failed:0,archived:0,pending:0};function Ov(){return typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"dark"}const he=Lf()(Rv((e,t)=>({plans:[],events:[],networkMaps:[],storageMaps:[],stats:iu,summary:lu,theme:"dark",themeInitialized:!1,devMode:!1,searchQuery:"",statusFilter:"all",expandedPlans:[],selectedPlanIndex:-1,showKeyboardHelp:!1,viewMode:"plans",setParseResult:r=>{e({plans:r.plans,events:r.events,networkMaps:r.networkMaps,storageMaps:r.storageMaps,stats:r.stats,summary:r.summary,selectedPlanIndex:r.plans.length>0?0:-1})},clearData:()=>{e({plans:[],events:[],networkMaps:[],storageMaps:[],stats:iu,summary:lu,expandedPlans:[],selectedPlanIndex:-1,viewMode:"plans"})},toggleTheme:()=>{e(r=>({theme:r.theme==="dark"?"light":"dark"}))},setTheme:r=>{e({theme:r})},initializeTheme:()=>{if(!t().themeInitialized){const n=Ov();e({theme:n,themeInitialized:!0})}},toggleDevMode:()=>{e(r=>({devMode:!r.devMode}))},setSearchQuery:r=>{e({searchQuery:r})},setStatusFilter:r=>{e({statusFilter:r})},togglePlanExpanded:r=>{e(n=>{const a=n.expandedPlans;return a.includes(r)?{expandedPlans:a.filter(i=>i!==r)}:{expandedPlans:[...a,r]}})},isPlanExpanded:r=>t().expandedPlans.includes(r),setSelectedPlanIndex:r=>{e({selectedPlanIndex:r})},navigatePlan:r=>{const n=t(),{plans:a,selectedPlanIndex:i}=n;if(a.length===0)return;let l;r==="down"?l=i<a.length-1?i+1:0:l=i>0?i-1:a.length-1,e({selectedPlanIndex:l})},toggleSelectedPlanExpanded:()=>{const r=t(),{plans:n,selectedPlanIndex:a}=r;if(a<0||a>=n.length)return;const i=n[a],l=`${i.namespace}/${i.name}`,o=r.expandedPlans;o.includes(l)?e({expandedPlans:o.filter(c=>c!==l)}):e({expandedPlans:[...o,l]})},setShowKeyboardHelp:r=>{e({showKeyboardHelp:r})},setViewMode:r=>{e({viewMode:r})}}),{name:"forklift-log-inspector",partialize:e=>({theme:e.theme,themeInitialized:e.themeInitialized,devMode:e.devMode})})),_f=()=>he(e=>e.plans),Bv=()=>he(e=>e.events),Vv=()=>he(e=>e.summary),yc=()=>he(e=>e.searchQuery),Ef=()=>he(e=>e.statusFilter),zv=()=>he(e=>e.showKeyboardHelp),Si=()=>he(e=>e.devMode),Wv=()=>he(e=>e.viewMode),bc=()=>he(e=>e.networkMaps),jc=()=>he(e=>e.storageMaps),ra={pipeline:!0,guestinfo:!0,commands:!1,errors:!1,rawlog:!1},$e=Lf()((e,t)=>({v2vFileEntries:[],selectedFileIndex:0,selectedToolRun:0,componentFilter:"all",searchQuery:"",highlightedLine:null,highlightVersion:0,expandedPanels:{...ra},getActiveV2VData:()=>{var a;const r=t().v2vFileEntries,n=t().selectedFileIndex;return((a=r[n])==null?void 0:a.data)??null},setV2VFileEntries:r=>{var d;let n=0;for(let u=0;u<r.length;u++)if(r[u].data.toolRuns.some(p=>p.exitStatus==="error")){n=u;break}const a=(d=r[n])==null?void 0:d.data,i=(a==null?void 0:a.toolRuns.findIndex(u=>u.exitStatus==="error"))??-1,l=i>=0?i:0,o=a==null?void 0:a.toolRuns[l],c=(o==null?void 0:o.exitStatus)==="error"&&o.errors.length>0;e({v2vFileEntries:r,selectedFileIndex:n,selectedToolRun:l,componentFilter:"all",searchQuery:"",highlightedLine:null,expandedPanels:{...ra,errors:c??!1}})},clearV2VData:()=>{e({v2vFileEntries:[],selectedFileIndex:0,selectedToolRun:0,componentFilter:"all",searchQuery:"",highlightedLine:null,expandedPanels:{...ra}})},setSelectedFile:r=>{var d;const a=(d=t().v2vFileEntries[r])==null?void 0:d.data;if(!a)return;const i=a.toolRuns.findIndex(u=>u.exitStatus==="error"),l=i>=0?i:0,o=a.toolRuns[l],c=o?o.exitStatus==="error"&&o.errors.length>0:!1;e({selectedFileIndex:r,selectedToolRun:l,componentFilter:"all",searchQuery:"",highlightedLine:null,expandedPanels:{...ra,errors:c}})},setSelectedToolRun:r=>{const n=t().getActiveV2VData(),a=n==null?void 0:n.toolRuns[r],i=a?a.exitStatus==="error"&&a.errors.length>0:!1;e(l=>({selectedToolRun:r,highlightedLine:null,expandedPanels:{...l.expandedPanels,errors:i}}))},setComponentFilter:r=>{e({componentFilter:r})},setSearchQuery:r=>{e({searchQuery:r})},setHighlightedLine:r=>{e(n=>({highlightedLine:r,highlightVersion:n.highlightVersion+1,expandedPanels:r!==null?{...n.expandedPanels,rawlog:!0}:n.expandedPanels}))},togglePanel:r=>{e(n=>({expandedPanels:{...n.expandedPanels,[r]:!n.expandedPanels[r]}}))},isPanelExpanded:r=>t().expandedPanels[r]??!1})),Pf=S.createContext(null);function Hv(){const e=S.useContext(Pf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Uv({children:e}){const[t,r]=S.useState([]),n=S.useRef(0),a=S.useCallback((l,o="info")=>{const c=n.current++;r(d=>[...d,{id:c,message:l,type:o}])},[]),i=S.useCallback(l=>{r(o=>o.filter(c=>c.id!==l))},[]);return s.jsxs(Pf.Provider,{value:{showToast:a},children:[e,s.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-auto",children:t.map(l=>s.jsx(Gv,{toast:l,onRemove:i},l.id))})]})}function Gv({toast:e,onRemove:t}){S.useEffect(()=>{const a=setTimeout(()=>{t(e.id)},5e3);return()=>clearTimeout(a)},[e.id,t]);const r={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"},n={success:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),error:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),warning:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return s.jsxs("div",{className:`
        ${r[e.type]} text-white px-4 py-3 rounded-lg shadow-lg
        flex items-center gap-3 min-w-[300px] max-w-[400px]
        animate-slideIn cursor-pointer
      `,onClick:()=>t(e.id),children:[n[e.type],s.jsx("span",{className:"flex-1",children:e.message}),s.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),t(e.id)},className:"flex-shrink-0 p-1.5 rounded hover:bg-white/20 transition-colors",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Kv(){const{theme:e,toggleTheme:t,clearData:r}=he(),n=$e(i=>i.clearV2VData),a=()=>{r(),n()};return s.jsx("header",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("svg",{className:"w-8 h-8 text-pink-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"}),s.jsx("path",{d:"M9 14l2 2 4-4"})]}),s.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-gray-100",children:"Forklift Log Inspector"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors text-slate-700 dark:text-gray-100",title:`Switch to ${e==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${e==="dark"?"light":"dark"} mode`,children:e==="dark"?s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),s.jsxs("button",{onClick:a,"aria-label":"Clear all loaded data",className:"px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors text-slate-700 dark:text-gray-100 flex items-center gap-2 font-medium",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear Data"]})]})]})})}const ke={Unknown:"Unknown",Warm:"Warm",Cold:"Cold",OnlyConversion:"OnlyConversion"},Z={Pending:"Pending",Ready:"Ready",Running:"Running",Succeeded:"Succeeded",Failed:"Failed"},ve={Unknown:"Unknown",Initialize:"Initialize",PreflightInspection:"PreflightInspection",DiskAllocation:"DiskAllocation",DiskTransfer:"DiskTransfer",DiskTransferV2v:"DiskTransferV2v",Cutover:"Cutover",ImageConversion:"ImageConversion",VMCreation:"VMCreation"},F={Started:"Started",PreHook:"PreHook",PostHook:"PostHook",Completed:"Completed",AddCheckpoint:"AddCheckpoint",AddFinalCheckpoint:"AddFinalCheckpoint",AllocateDisks:"AllocateDisks",ConvertGuest:"ConvertGuest",ConvertOpenstackSnapshot:"ConvertOpenstackSnapshot",CopyDisks:"CopyDisks",CopyDisksVirtV2V:"CopyDisksVirtV2V",CopyingPaused:"CopyingPaused",CreateDataVolumes:"CreateDataVolumes",CreateFinalSnapshot:"CreateFinalSnapshot",CreateGuestConversionPod:"CreateGuestConversionPod",CreateInitialSnapshot:"CreateInitialSnapshot",CreateSnapshot:"CreateSnapshot",CreateVM:"CreateVM",Finalize:"Finalize",PreflightInspection:"PreflightInspection",PowerOffSource:"PowerOffSource",RemoveFinalSnapshot:"RemoveFinalSnapshot",RemovePenultimateSnapshot:"RemovePenultimateSnapshot",RemovePreviousSnapshot:"RemovePreviousSnapshot",StoreInitialSnapshotDeltas:"StoreInitialSnapshotDeltas",StorePowerState:"StorePowerState",StoreSnapshotDeltas:"StoreSnapshotDeltas",WaitForDataVolumesStatus:"WaitForDataVolumesStatus",WaitForFinalSnapshot:"WaitForFinalSnapshot",WaitForFinalSnapshotRemoval:"WaitForFinalSnapshotRemoval",WaitForInitialSnapshot:"WaitForInitialSnapshot",WaitForPenultimateSnapshotRemoval:"WaitForPenultimateSnapshotRemoval",WaitForPowerOff:"WaitForPowerOff",WaitForPreviousSnapshotRemoval:"WaitForPreviousSnapshotRemoval",WaitForSnapshot:"WaitForSnapshot"},gs=[F.CopyDisks,F.CopyingPaused,F.RemovePreviousSnapshot,F.WaitForPreviousSnapshotRemoval,F.CreateSnapshot,F.WaitForSnapshot,F.StoreSnapshotDeltas,F.AddCheckpoint],gr=new Set(gs),If=F.CopyDisks,Yv=new Set([F.CreateInitialSnapshot,F.WaitForInitialSnapshot,F.StoreInitialSnapshotDeltas,F.WaitForDataVolumesStatus,F.CopyingPaused,F.RemovePreviousSnapshot,F.WaitForPreviousSnapshotRemoval,F.CreateSnapshot,F.WaitForSnapshot,F.StoreSnapshotDeltas,F.AddCheckpoint,F.RemovePenultimateSnapshot,F.WaitForPenultimateSnapshotRemoval,F.CreateFinalSnapshot,F.WaitForFinalSnapshot,F.AddFinalCheckpoint,F.Finalize,F.RemoveFinalSnapshot,F.WaitForFinalSnapshotRemoval]),Qv=new Set([F.CopyDisks,F.AllocateDisks,F.CopyDisksVirtV2V]),ou=[F.Started,F.PreHook,F.CreateInitialSnapshot,F.WaitForInitialSnapshot,F.StoreInitialSnapshotDeltas,F.PreflightInspection,F.CreateDataVolumes,F.WaitForDataVolumesStatus,F.CopyDisks,F.CopyingPaused,F.RemovePreviousSnapshot,F.WaitForPreviousSnapshotRemoval,F.CreateSnapshot,F.WaitForSnapshot,F.StoreSnapshotDeltas,F.AddCheckpoint,F.StorePowerState,F.PowerOffSource,F.WaitForPowerOff,F.RemovePenultimateSnapshot,F.WaitForPenultimateSnapshotRemoval,F.CreateFinalSnapshot,F.WaitForFinalSnapshot,F.AddFinalCheckpoint,F.Finalize,F.RemoveFinalSnapshot,F.WaitForFinalSnapshotRemoval,F.CreateGuestConversionPod,F.ConvertGuest,F.CreateVM,F.PostHook,F.Completed],Xv=[F.Started,F.PreHook,F.StorePowerState,F.PowerOffSource,F.WaitForPowerOff,F.CreateDataVolumes,F.AllocateDisks,F.CreateGuestConversionPod,F.ConvertGuest,F.CopyDisksVirtV2V,F.CreateVM,F.PostHook,F.Completed],qv=[F.Started,F.PreHook,F.StorePowerState,F.PowerOffSource,F.WaitForPowerOff,F.CreateGuestConversionPod,F.ConvertGuest,F.CreateVM,F.PostHook,F.Completed];function Tf(e){switch(e){case ke.Warm:return ou;case ke.Cold:return Xv;case ke.OnlyConversion:return qv;default:return[...ou]}}function co(e,t){switch(e){case F.Started:case F.CreateInitialSnapshot:case F.WaitForInitialSnapshot:case F.StoreInitialSnapshotDeltas:return ve.Initialize;case F.AllocateDisks:return ve.DiskAllocation;case F.CopyDisks:case F.CopyingPaused:case F.RemovePreviousSnapshot:case F.WaitForPreviousSnapshotRemoval:case F.CreateSnapshot:case F.WaitForSnapshot:case F.StoreSnapshotDeltas:case F.AddCheckpoint:case F.ConvertOpenstackSnapshot:return ve.DiskTransfer;case F.CreateDataVolumes:case F.WaitForDataVolumesStatus:return ve.Initialize;case F.RemovePenultimateSnapshot:case F.WaitForPenultimateSnapshotRemoval:case F.CreateFinalSnapshot:case F.WaitForFinalSnapshot:case F.AddFinalCheckpoint:case F.Finalize:case F.RemoveFinalSnapshot:case F.WaitForFinalSnapshotRemoval:return ve.Cutover;case F.CreateGuestConversionPod:case F.ConvertGuest:return ve.ImageConversion;case F.CopyDisksVirtV2V:return ve.DiskTransferV2v;case F.CreateVM:return ve.VMCreation;case F.PreHook:case F.PostHook:return e;case F.StorePowerState:case F.PowerOffSource:case F.WaitForPowerOff:return t?ve.Cutover:ve.Initialize;case F.PreflightInspection:return ve.PreflightInspection;case F.Completed:return ve.VMCreation;default:return ve.Unknown}}const ar={True:"True"},Zv="panic:",Jv=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z)\s+(\{.*)$/,ek=/id:(vm-\d+)\s+name:'([^']+)'/,tk={Started:"Start",PreHook:"PreHook",StorePowerState:"StorePwr",PowerOffSource:"PwrOff",WaitForPowerOff:"WaitPwr",CreateDataVolumes:"CreateDV",CreateSnapshot:"CreateSnap",WaitForSnapshot:"WaitSnap",StoreSnapshot:"StoreSnap",AddCheckpoint:"AddChkpt",AddFinalCheckpoint:"FinalChkpt",CreateInitialSnapshot:"InitSnap",WaitForInitialSnapshot:"WaitInit",StoreInitialSnapshotDeltas:"StoreDeltas",Preflight:"Preflight",PreflightInspection:"Preflight",CreateVM:"CreateVM",Initialize:"Init",DiskTransfer:"DiskTransfer",DiskTransferV2v:"DiskV2V",DiskAllocation:"DiskAlloc",Cutover:"Cutover",ImageConversion:"ImgConv",VirtualMachineCreation:"CreateVM",CopyDisks:"Copy",CopyDisksVirtV2V:"CopyV2V",CreateGuestConversionPod:"ConvPod",ConvertGuest:"Convert",CopyingPaused:"Paused",AllocateDisks:"Allocate",WaitForDataVolumes:"WaitDV",RemovePenultimateSnapshot:"RmPenSnap",WaitForPenultimateSnapshotRemoval:"WaitRmPen",RemoveFinalSnapshot:"RmFinalSnap",WaitForFinalSnapshotRemoval:"WaitRmFinal",Finalize:"Finalize",FinalSnapshot:"FinalSnap",WaitForFinalSnapshot:"WaitFinal",WaitForFinalDataVolumes:"WaitFinalDV",RemovePreviousSnapshot:"RmPrevSnap",WaitForPreviousSnapshotRemoval:"WaitRmPrev",PostHook:"PostHook",Completed:"Done",Canceled:"Cancel",StoreSnapshotDeltas:"StoreDeltas",WaitForDataVolumesStatus:"WaitDVStatus",CreateFinalSnapshot:"FinalSnap",ConvertOpenstackSnapshot:"ConvOSSnap"};function rk(e){return tk[e]||e.replace(/([a-z])([A-Z])/g,"$1$2").slice(0,10)}function sk(e){if(!e)return new Date(0);let t=new Date(e);if(!isNaN(t.getTime()))return t;const r=e.match(/^(\d{4}-\d{2}-\d{2})\s+(\d{2}:\d{2}:\d{2})(?:\.(\d+))?$/);if(r){const[,n,a,i]=r,l=`${n}T${a}${i?`.${i}`:""}Z`;if(t=new Date(l),!isNaN(t.getTime()))return t}return new Date(0)}function nk(e){const t=e.match(ek);return t&&t.length>=3?{id:t[1],name:t[2]}:{id:"",name:""}}function Ft(e){var t;if((t=e.vmRef)!=null&&t.id)return{id:e.vmRef.id,name:e.vmRef.name||""};if(e.vm){if(typeof e.vm=="string")return nk(e.vm);const r=e.vm;return{id:r.id||"",name:r.name||""}}return{id:"",name:""}}function wc(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function Qs(e,t){if(!e)return"";const r=e[t];return typeof r=="string"?r:""}function xt(e){if(e<1e3)return`${e}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;if(e<36e5){const n=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);return`${n}m ${a}s`}const t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4);return`${t}h ${r}m`}function cu(e){let t=!1,r=!1,n=!1;for(const a of e)Yv.has(a.name)&&(t=!0),Qv.has(a.name)&&(r=!0),(a.name===F.CreateGuestConversionPod||a.name===F.ConvertGuest)&&(n=!0);return t?ke.Warm:n&&!r?ke.OnlyConversion:r||e.length>0?ke.Cold:ke.Unknown}function Ff(e){const t=new Map,r=[];for(const n of e){const a=t.get(n.message);a?(a.count++,a.lastSeen=n.timestamp,a.entries.push(n)):(t.set(n.message,{message:n.message,count:1,firstSeen:n.timestamp,lastSeen:n.timestamp,level:n.level,entries:[n]}),r.push(n.message))}return r.map(n=>t.get(n))}function Af(e){if(!e.phaseLogs)return{};const t={},r=new Map;for(const n of e.phaseHistory)r.set(n.name,n);for(const[n,a]of Object.entries(e.phaseLogs)){if(a.length===0)continue;const i={phase:n,totalLogs:a.length,groupedLogs:Ff(a)},l=r.get(n);if(l&&(l.startedAt&&(i.startTime=l.startedAt.toISOString()),l.endedAt&&(i.endTime=l.endedAt.toISOString(),l.startedAt))){const o=l.endedAt.getTime()-l.startedAt.getTime();i.durationMs=o,i.duration=xt(o)}t[n]=i}return t}function ak(e){const t=new Map;for(const l of e)if(gr.has(l.name)&&l.iteration){const o=t.get(l.iteration)||[];o.push(l),t.set(l.iteration,o)}if(t.size===0)return;const r=[];let n=0,a=0;const i=Array.from(t.entries()).sort((l,o)=>l[0]-o[0]);for(const[l,o]of i){let c,d,u=!0;for(const v of o)v.startedAt&&(!c||v.startedAt<c)&&(c=v.startedAt),v.endedAt?(!d||v.endedAt>d)&&(d=v.endedAt):u=!1;const p=c&&d?d.getTime()-c.getTime():void 0,f=o.some(v=>v.name===F.AddCheckpoint&&v.endedAt),h=o.some(v=>v.name===If&&v.startedAt);f?n++:h&&!u&&i.some(([k])=>k>l)&&a++,r.push({iteration:l,snapshot:`iteration-${l}`,startedAt:c,endedAt:d,durationMs:p,disks:[]})}return{precopies:r,successes:n,failures:a,consecutiveFailures:0}}function ik(e){return e.startsWith("panic:")||e.startsWith("goroutine ")}class lk{constructor(){$t(this,"plans",new Map);$t(this,"events",[]);$t(this,"stats",{totalLines:0,parsedLines:0,errorLines:0,duplicateLines:0,plansFound:0,vmsFound:0});$t(this,"processedLines",new Set)}isLineProcessed(t){return this.processedLines.has(t)}markLineProcessed(t){this.processedLines.add(t)}getOrCreatePlan(t,r){const n=`${t}/${r}`;let a=this.plans.get(n);return a||(a={name:r,namespace:t,status:Z.Pending,archived:!1,migrationType:ke.Unknown,conditions:[],vms:{},errors:[],panics:[],firstSeen:new Date(0),lastSeen:new Date(0)},this.plans.set(n,a)),a}findPlan(t){return this.plans.get(t)}getMostRecentPlan(){let t;for(const r of this.plans.values())(!t||r.lastSeen>t.lastSeen)&&(t=r);return t}addEvent(t){this.events.push(t)}updateStats(t){Object.assign(this.stats,t)}incrementStat(t){this.stats[t]++}getAllPlans(){const t=[];for(const r of this.plans.values()){for(const n of Object.values(r.vms)){n.phaseLogSummaries=Af(n),n.migrationType=cu(n.phaseHistory);const a=n.migrationType===ke.Warm;if(n.currentPhase&&(n.currentStep=co(n.currentPhase,a)),a&&!n.warmInfo){const i=ak(n.phaseHistory);i&&(n.warmInfo=i,n.precopyCount=i.precopies.length)}for(const i of n.phaseHistory)i.step=co(i.name,a)}r.migrationType=this.detectPlanMigrationType(r),t.push(r)}return t}detectPlanMigrationType(t){let r=!1,n=!1,a=!1;for(const i of Object.values(t.vms))switch(cu(i.phaseHistory)){case ke.Warm:r=!0;break;case ke.Cold:n=!0;break;case ke.OnlyConversion:a=!0;break}return r?ke.Warm:n?ke.Cold:a?ke.OnlyConversion:ke.Unknown}getEvents(){return this.events}getSummary(){const t={totalPlans:this.plans.size,running:0,succeeded:0,failed:0,archived:0,pending:0};for(const r of this.plans.values())switch(r.archived&&t.archived++,r.status){case Z.Running:t.running++;break;case Z.Succeeded:t.succeeded++;break;case Z.Failed:t.failed++;break;case Z.Pending:case Z.Ready:t.pending++;break}return t}getStats(){this.stats.plansFound=this.plans.size;let t=0;for(const r of this.plans.values())t+=Object.keys(r.vms).length;return this.stats.vmsFound=t,this.stats}getResult(){return{plans:this.getAllPlans(),events:this.events,summary:this.getSummary(),stats:this.getStats(),networkMaps:[],storageMaps:[]}}clear(){this.plans.clear(),this.events=[],this.stats={totalLines:0,parsedLines:0,errorLines:0,duplicateLines:0,plansFound:0,vmsFound:0},this.processedLines.clear()}}function Df(e,t,r){return{id:e,name:t,currentPhase:"",currentStep:"",migrationType:ke.Unknown,transferMethod:"Unknown",phaseHistory:[],dataVolumes:[],createdResources:[],phaseLogs:{},firstSeen:r,lastSeen:r}}function ok(e,t,r){var c,d;const n=((c=t.plan)==null?void 0:c.name)||"",a=((d=t.plan)==null?void 0:d.namespace)||"";if(!n||!a)return;const i=e.getOrCreatePlan(a,n),l=t.msg||"";if(t.migration&&i.migration&&t.migration!==i.migration&&l!=="Migration [STARTED]")return;i.firstSeen.getTime()===0&&(i.firstSeen=r),i.lastSeen=r;const{id:o}=Ft(t);if(o&&ck(i,t,r),l.includes("Aborting reconcile of archived plan")){i.archived=!0;return}if(l.includes("Skipping reconcile of succeeded plan")){i.status=Z.Succeeded;return}if(l==="Migration [STARTED]"){t.migration&&i.migration&&t.migration!==i.migration&&(i.vms={},i.errors=[],i.panics=[],i.conditions=[],i.firstSeen=r),i.status=Z.Running,t.migration&&(i.migration=t.migration),e.addEvent({timestamp:t.ts,type:"migration_start",planName:n,namespace:a,description:"Migration started"});return}if(l==="Migration [SUCCEEDED]"){i.status=Z.Succeeded;for(const u of Object.values(i.vms))if(u.currentPhase!==F.Completed){if(u.phaseHistory.length>0){const p=u.phaseHistory[u.phaseHistory.length-1];p.endedAt||(p.endedAt=r)}u.currentPhase=F.Completed,u.phaseHistory.push({name:F.Completed,step:"",startedAt:r,endedAt:r})}e.addEvent({timestamp:t.ts,type:"migration_succeeded",planName:n,namespace:a,description:"Migration succeeded"});return}if(l==="Migration [RUN]"&&o){uk(e,i,t,r),nl(i,t);return}if(l==="SetCheckpoint"&&o){pk(i,t),nl(i,t);return}if(l==="Itinerary transition"){fk(e,i,t,r);return}if(l.startsWith("Condition added")){mk(e,i,t,r);return}if(l.startsWith("Condition deleted")){xk(i,t);return}if(yk(t)&&bk(i,t),l==="Created DataVolume."&&t.dv){hk(i,t,r);return}if(l.includes("created.")||l.startsWith("Created ")){gk(i,t,r,l);return}if(t.level==="error"&&t.error){vk(e,i,n,a,t,r);return}if(l.includes("Found (active) migration")){i.status=Z.Running,t.migration&&(i.migration=t.migration);return}t.err&&kk(e,i,n,a,t,r),o&&nl(i,t)}function ck(e,t,r){const{id:n,name:a}=Ft(t);if(!n)return;let i=e.vms[n];i||(i=Df(n,a,r),e.vms[n]=i),i.lastSeen=r,t.phase&&!i.currentPhase&&(i.currentPhase=t.phase,i.phaseHistory.push({name:t.phase,step:"",startedAt:r}))}function dk(e){let t=0;for(const r of e.phaseHistory)gr.has(r.name)&&r.iteration&&(t=Math.max(t,r.iteration));return t}function uk(e,t,r,n){const{id:a,name:i}=Ft(r);if(!a)return;let l=t.vms[a];if(l||(l=Df(a,i,n),t.vms[a]=l),l.lastSeen=n,r.phase&&r.phase!==l.currentPhase){if(l.phaseHistory.length>0){const d=l.phaseHistory[l.phaseHistory.length-1];d.endedAt||(d.endedAt=n)}let o;if(gr.has(r.phase)){const d=dk(l);r.phase===If?o=d+1:o=d||1}l.currentPhase=r.phase,l.phaseHistory.push({name:r.phase,step:"",startedAt:n,iteration:o});const c=o?` (iteration ${o})`:"";e.addEvent({timestamp:r.ts,type:"phase_change",planName:t.name,namespace:t.namespace,vmName:i,description:`VM entered phase: ${r.phase}${c}`,phase:r.phase})}r.phase===F.Completed&&(t.status=Z.Succeeded)}function pk(e,t,r){const{id:n}=Ft(t);if(!n)return;const a=e.vms[n];if(!a)return;const i=t,l=i.precopies;if(!l||l.length===0)return;const o=l.map((h,v)=>{const k=h.start?new Date(h.start):void 0,b=h.end?new Date(h.end):void 0,g=k&&b?b.getTime()-k.getTime():void 0;return{iteration:v+1,snapshot:h.snapshot||"unknown",startedAt:k,endedAt:b,durationMs:g,disks:(h.deltas||[]).map(m=>m.disk||"").filter(Boolean)}}),c=o.filter(h=>h.endedAt).length,u=o.length-c-(o.some(h=>!h.endedAt)?1:0),p=i.final===!0,f={precopies:o,successes:c,failures:u>0?u:0,consecutiveFailures:0};a.warmInfo=f,a.precopyCount=o.length,a.migrationType==="Unknown"&&(a.migrationType="Warm"),p&&(a.warmInfo.consecutiveFailures=0)}function fk(e,t,r,n){const a=r["current phase"],i=r["next phase"];if(!(!a||!i)&&(e.addEvent({timestamp:r.ts,type:"phase_transition",planName:t.name,namespace:t.namespace,description:`${a}  ${i}`,phase:i}),i===F.Completed)){for(const l of Object.values(t.vms))if(l.currentPhase!==F.Completed){if(l.phaseHistory.length>0){const o=l.phaseHistory[l.phaseHistory.length-1];o.endedAt||(o.endedAt=n)}l.currentPhase=F.Completed,l.phaseHistory.push({name:F.Completed,step:"",startedAt:n,endedAt:n})}t.status=Z.Succeeded}}function mk(e,t,r,n){if(!r.condition)return;const a=Qs(r.condition,"type"),i=Qs(r.condition,"status"),l=Qs(r.condition,"message"),o=Qs(r.condition,"category"),c={type:a,status:i,category:o,message:l,timestamp:n};a==="Executing"&&i===ar.True?t.status=Z.Running:a==="Ready"&&i===ar.True&&t.status===Z.Pending?t.status=Z.Ready:a==="Succeeded"&&i===ar.True?t.status=Z.Succeeded:a==="Failed"&&i===ar.True&&(t.status=Z.Failed);const d=t.conditions.findIndex(u=>u.type===a);d>=0?t.conditions[d]=c:t.conditions.push(c),e.addEvent({timestamp:r.ts,type:"condition",planName:t.name,namespace:t.namespace,description:`${a}: ${l}`})}function xk(e,t){if(!t.condition)return;const r=Qs(t.condition,"type");e.conditions=e.conditions.filter(n=>n.type!==r)}function hk(e,t,r){const{id:n}=Ft(t);if(!n)return;const a=e.vms[n];if(!a)return;a.dataVolumes.push({name:t.dv,createdAt:r});const i={timestamp:t.ts,level:t.level,message:`${t.msg} (${t.dv})`,phase:"CreateDataVolumes",rawLine:t.rawLine||""};a.phaseLogs.CreateDataVolumes||(a.phaseLogs.CreateDataVolumes=[]),a.phaseLogs.CreateDataVolumes.push(i)}function gk(e,t,r,n){var u;const{id:a}=Ft(t);if(!a)return;const i=e.vms[a];if(!i)return;let l="",o="";const c=t;if(n==="Secret created."&&c.secret)l="Secret",o=c.secret;else if(n==="ConfigMap created."&&c.configMap)l="ConfigMap",o=c.configMap;else if(n==="Pod created."&&c.pod)l="Pod",o=c.pod;else if(n==="VirtualMachine created."&&c.virtualMachine)l="VirtualMachine",o=c.virtualMachine;else if(n==="PVC created."&&c.pvc)l="PVC",o=c.pvc;else{const p=n.match(/^Created (\w+)\.?$/);if(p){if(l=p[1],l==="DataVolume")return;(u=t.object)!=null&&u.name&&(o=t.object.namespace?`${t.object.namespace}/${t.object.name}`:t.object.name)}}if(!l)return;i.createdResources.some(p=>p.type===l&&p.name===o)||i.createdResources.push({type:l,name:o,createdAt:r})}function vk(e,t,r,n,a,i){var u;const l=a.msg||"";if((u=a.error)!=null&&u.includes("connection refused"))return;l.includes("Reconcile failed")&&(t.status=Z.Failed);const{name:o}=Ft(a);let c=l;o&&(c=`[${o}] ${l}`);const d=t.errors.findIndex(p=>p.error===a.error&&p.message===c);d>=0?(t.errors[d].count++,t.errors[d].timestamp=i):t.errors.push({timestamp:i,message:c,error:a.error||"",stacktrace:a.stacktrace,rawLine:a.rawLine,count:1,level:"error"}),e.addEvent({timestamp:a.ts,type:"error",planName:r,namespace:n,vmName:o,description:wc(`${c}: ${a.error}`,150)})}function kk(e,t,r,n,a,i){const{name:l}=Ft(a),o=a.err||"";let c=a.msg||"";l&&(c=`[${l}] ${a.msg}`);const d=t.errors.findIndex(u=>u.error===o);d>=0?(t.errors[d].count++,t.errors[d].timestamp=i):t.errors.push({timestamp:i,message:c,error:o,rawLine:a.rawLine,count:1,level:"warning"}),e.addEvent({timestamp:a.ts,type:"warning",planName:r,namespace:n,vmName:l,description:wc(`${c}: ${o}`,150)})}function nl(e,t){const{id:r}=Ft(t);if(!r)return;const n=e.vms[r];if(!n||!n.currentPhase)return;const a=t.phase||n.currentPhase,i={timestamp:t.ts,level:t.level,message:t.msg||"",phase:a,rawLine:t.rawLine||""};n.phaseLogs[a]||(n.phaseLogs[a]=[]),n.phaseLogs[a].push(i)}function yk(e){const t=e.msg||"",r=e.rawLine||"";return!!(r.includes("VSphereXcopy")||r.includes("copy-offload")||r.includes("xcopy-initial-offload")||t==="Creating the populator resource"||t.includes("populator CR")||t.includes("Populator CR"))}function bk(e,t){const{id:r}=Ft(t);if(r){const n=e.vms[r];n&&(n.transferMethod="StorageOffload")}}function jk(e,t,r){var d,u,p,f;const n=((d=t.object)==null?void 0:d.name)||"",a=((u=t.object)==null?void 0:u.namespace)||"";if(!n||!a)return;const i=e.getOrCreatePlan(a,n);i.status=Z.Failed;let l=t.panic||"";if(!l){l=t.msg||"";const h=l.indexOf(": ");h>0&&(l=l.slice(h+2))}const o=t.stacktrace||"",c=i.panics.findIndex(h=>h.message===l);c>=0?(i.panics[c].count++,i.panics[c].timestamp=r,(p=i.panics[c].rawLines)==null||p.push(t.rawLine||""),o&&o.length>(((f=i.panics[c].stacktrace)==null?void 0:f.length)||0)&&(i.panics[c].stacktrace=o)):i.panics.push({timestamp:r,message:l,controller:t.controller,reconcileId:t.reconcileID,stacktrace:o,rawLines:t.rawLine?[t.rawLine]:[],count:1}),e.addEvent({timestamp:t.ts,type:"panic",planName:n,namespace:a,description:`Panic: ${wc(l,100)}`})}function wk(e,t,r){var l,o,c,d;const n=((l=t.object)==null?void 0:l.name)||"",a=((o=t.object)==null?void 0:o.namespace)||"";if(!n||!a)return;const i=e.getOrCreatePlan(a,n);if((c=t.error)!=null&&c.includes(Zv)){i.status=Z.Failed;let u=t.error;const p=u.indexOf("panic: ");if(p>=0){u=u.slice(p+7);const f=u.indexOf(" [recovered]");f>0&&(u=u.slice(0,f))}for(let f=0;f<i.panics.length;f++){const h=i.panics[f];if(h.message.includes(u)||u.includes(h.message)){(d=i.panics[f].rawLines)==null||d.push(t.rawLine||""),t.stacktrace&&t.stacktrace!==h.stacktrace&&(h.stacktrace?i.panics[f].stacktrace=`${h.stacktrace}

--- Recovery Stacktrace ---
${t.stacktrace}`:i.panics[f].stacktrace=t.stacktrace);return}}i.panics.push({timestamp:r,message:u,controller:t.controller,reconcileId:t.reconcileID,stacktrace:t.stacktrace,rawLines:t.rawLine?[t.rawLine]:[],count:1})}}function du(e,t){if(!e||t.length===0)return;const r=t.join(`
`);if(e.panics.length>0){const n=e.panics.length-1;e.panics[n].stacktrace=r,e.panics[n].rawLines=[...e.panics[n].rawLines||[],...t]}else{let n="Unknown panic";t.length>0&&t[0].startsWith("panic: ")&&(n=t[0].slice(7)),e.panics.push({timestamp:e.lastSeen,message:n,stacktrace:r,rawLines:t,count:1}),e.status=Z.Failed}}function uo(e){const t=new lk,r=e.split(`
`);let n,a=[],i=!1;for(const l of r){if(t.incrementStat("totalLines"),!l.trim())continue;if(t.isLineProcessed(l)){t.incrementStat("duplicateLines");continue}let o=l,c="";const d=l.match(Jv);d&&(c=d[1],o=d[2]);let u;try{const p=JSON.parse(o);if(typeof p!="object"||p===null||Array.isArray(p)){t.incrementStat("errorLines");continue}u=p}catch{(i||ik(l))&&(i=!0,a.push(l),l.startsWith("panic:")&&!n&&(n=t.getMostRecentPlan())),t.incrementStat("errorLines");continue}!u.ts&&c&&(u.ts=c),i&&n&&a.length>0&&(du(n,a),a=[],n=void 0,i=!1),u.rawLine=l,t.markLineProcessed(l),t.incrementStat("parsedLines"),Nk(t,u)}return i&&n&&a.length>0&&du(n,a),t.getResult()}function Nk(e,t){var n,a,i,l;const r=sk(t.ts);if((n=t.msg)!=null&&n.includes("Observed a panic")){jk(e,t,r);return}if(t.msg==="Reconciler error"&&t.controller){wk(e,t,r);return}if((a=t.logger)!=null&&a.startsWith("plan|")){ok(e,t,r);return}if((i=t.msg)!=null&&i.includes("scheduler")||(l=t.logger)!=null&&l.includes("scheduler")){Sk(e,t,r);return}}function Sk(e,t,r){var d;const n=t,a=n.inflight,i=n.pending;if(!a&&!i)return;const l={timestamp:r.toISOString(),inflight:a||{},pending:i||{}},o=n.next;o&&(l.nextVM=o);const c=(d=t.logger)==null?void 0:d.split("|");if(c&&c.length>=2){const u=c[1],p=e.findPlan(u);p&&(p.scheduleHistory||(p.scheduleHistory=[]),p.scheduleHistory.push(l))}}/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */function $f(e){return typeof e>"u"||e===null}function Ck(e){return typeof e=="object"&&e!==null}function Mk(e){return Array.isArray(e)?e:$f(e)?[]:[e]}function Lk(e,t){var r,n,a,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)a=i[r],e[a]=t[a];return e}function _k(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Ek(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Pk=$f,Ik=Ck,Tk=Mk,Fk=_k,Ak=Ek,Dk=Lk,Ne={isNothing:Pk,isObject:Ik,toArray:Tk,repeat:Fk,isNegativeZero:Ak,extend:Dk};function Rf(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Mn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Rf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Mn.prototype=Object.create(Error.prototype);Mn.prototype.constructor=Mn;Mn.prototype.toString=function(t){return this.name+": "+Rf(this,t)};var ze=Mn;function al(e,t,r,n,a){var i="",l="",o=Math.floor(a/2)-1;return n-t>o&&(i=" ... ",t=n-o+i.length),r-n>o&&(l=" ...",r=n+o-l.length),{str:i+e.slice(t,r).replace(/\t/g,"")+l,pos:n-t+i.length}}function il(e,t){return Ne.repeat(" ",t-e.length)+e}function $k(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],a=[],i,l=-1;i=r.exec(e.buffer);)a.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var o="",c,d,u=Math.min(e.line+t.linesAfter,a.length).toString().length,p=t.maxLength-(t.indent+u+3);for(c=1;c<=t.linesBefore&&!(l-c<0);c++)d=al(e.buffer,n[l-c],a[l-c],e.position-(n[l]-n[l-c]),p),o=Ne.repeat(" ",t.indent)+il((e.line-c+1).toString(),u)+" | "+d.str+`
`+o;for(d=al(e.buffer,n[l],a[l],e.position,p),o+=Ne.repeat(" ",t.indent)+il((e.line+1).toString(),u)+" | "+d.str+`
`,o+=Ne.repeat("-",t.indent+u+3+d.pos)+`^
`,c=1;c<=t.linesAfter&&!(l+c>=a.length);c++)d=al(e.buffer,n[l+c],a[l+c],e.position-(n[l]-n[l+c]),p),o+=Ne.repeat(" ",t.indent)+il((e.line+c+1).toString(),u)+" | "+d.str+`
`;return o.replace(/\n$/,"")}var Rk=$k,Ok=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Bk=["scalar","sequence","mapping"];function Vk(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function zk(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Ok.indexOf(r)===-1)throw new ze('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Vk(t.styleAliases||null),Bk.indexOf(this.kind)===-1)throw new ze('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Pe=zk;function uu(e,t){var r=[];return e[t].forEach(function(n){var a=r.length;r.forEach(function(i,l){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(a=l)}),r[a]=n}),r}function Wk(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function po(e){return this.extend(e)}po.prototype.extend=function(t){var r=[],n=[];if(t instanceof Pe)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ze("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof Pe))throw new ze("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new ze("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new ze("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof Pe))throw new ze("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(po.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=uu(a,"implicit"),a.compiledExplicit=uu(a,"explicit"),a.compiledTypeMap=Wk(a.compiledImplicit,a.compiledExplicit),a};var Of=po,Bf=new Pe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Vf=new Pe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),zf=new Pe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Wf=new Of({explicit:[Bf,Vf,zf]});function Hk(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Uk(){return null}function Gk(e){return e===null}var Hf=new Pe("tag:yaml.org,2002:null",{kind:"scalar",resolve:Hk,construct:Uk,predicate:Gk,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Kk(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Yk(e){return e==="true"||e==="True"||e==="TRUE"}function Qk(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Uf=new Pe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Kk,construct:Yk,predicate:Qk,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Xk(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function qk(e){return 48<=e&&e<=55}function Zk(e){return 48<=e&&e<=57}function Jk(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!Xk(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!qk(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!Zk(e.charCodeAt(r)))return!1;n=!0}return!(!n||a==="_")}function ey(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function ty(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Ne.isNegativeZero(e)}var Gf=new Pe("tag:yaml.org,2002:int",{kind:"scalar",resolve:Jk,construct:ey,predicate:ty,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ry=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sy(e){return!(e===null||!ry.test(e)||e[e.length-1]==="_")}function ny(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var ay=/^[-+]?[0-9]+e/;function iy(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ne.isNegativeZero(e))return"-0.0";return r=e.toString(10),ay.test(r)?r.replace("e",".e"):r}function ly(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Ne.isNegativeZero(e))}var Kf=new Pe("tag:yaml.org,2002:float",{kind:"scalar",resolve:sy,construct:ny,predicate:ly,represent:iy,defaultStyle:"lowercase"}),Yf=Wf.extend({implicit:[Hf,Uf,Gf,Kf]}),Qf=Yf,Xf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),qf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function oy(e){return e===null?!1:Xf.exec(e)!==null||qf.exec(e)!==null}function cy(e){var t,r,n,a,i,l,o,c=0,d=null,u,p,f;if(t=Xf.exec(e),t===null&&(t=qf.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(i=+t[4],l=+t[5],o=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=+t[10],p=+(t[11]||0),d=(u*60+p)*6e4,t[9]==="-"&&(d=-d)),f=new Date(Date.UTC(r,n,a,i,l,o,c)),d&&f.setTime(f.getTime()-d),f}function dy(e){return e.toISOString()}var Zf=new Pe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:oy,construct:cy,instanceOf:Date,represent:dy});function uy(e){return e==="<<"||e===null}var Jf=new Pe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:uy}),Nc=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function py(e){if(e===null)return!1;var t,r,n=0,a=e.length,i=Nc;for(r=0;r<a;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function fy(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,i=Nc,l=0,o=[];for(t=0;t<a;t++)t%4===0&&t&&(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)),l=l<<6|i.indexOf(n.charAt(t));return r=a%4*6,r===0?(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)):r===18?(o.push(l>>10&255),o.push(l>>2&255)):r===12&&o.push(l>>4&255),new Uint8Array(o)}function my(e){var t="",r=0,n,a,i=e.length,l=Nc;for(n=0;n<i;n++)n%3===0&&n&&(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]),r=(r<<8)+e[n];return a=i%3,a===0?(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]):a===2?(t+=l[r>>10&63],t+=l[r>>4&63],t+=l[r<<2&63],t+=l[64]):a===1&&(t+=l[r>>2&63],t+=l[r<<4&63],t+=l[64],t+=l[64]),t}function xy(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var em=new Pe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:py,construct:fy,predicate:xy,represent:my}),hy=Object.prototype.hasOwnProperty,gy=Object.prototype.toString;function vy(e){if(e===null)return!0;var t=[],r,n,a,i,l,o=e;for(r=0,n=o.length;r<n;r+=1){if(a=o[r],l=!1,gy.call(a)!=="[object Object]")return!1;for(i in a)if(hy.call(a,i))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function ky(e){return e!==null?e:[]}var tm=new Pe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:vy,construct:ky}),yy=Object.prototype.toString;function by(e){if(e===null)return!0;var t,r,n,a,i,l=e;for(i=new Array(l.length),t=0,r=l.length;t<r;t+=1){if(n=l[t],yy.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;i[t]=[a[0],n[a[0]]]}return!0}function jy(e){if(e===null)return[];var t,r,n,a,i,l=e;for(i=new Array(l.length),t=0,r=l.length;t<r;t+=1)n=l[t],a=Object.keys(n),i[t]=[a[0],n[a[0]]];return i}var rm=new Pe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:by,construct:jy}),wy=Object.prototype.hasOwnProperty;function Ny(e){if(e===null)return!0;var t,r=e;for(t in r)if(wy.call(r,t)&&r[t]!==null)return!1;return!0}function Sy(e){return e!==null?e:{}}var sm=new Pe("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ny,construct:Sy}),Sc=Qf.extend({implicit:[Zf,Jf],explicit:[em,tm,rm,sm]}),vr=Object.prototype.hasOwnProperty,qa=1,nm=2,am=3,Za=4,ll=1,Cy=2,pu=3,My=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ly=/[\x85\u2028\u2029]/,_y=/[,\[\]\{\}]/,im=/^(?:!|!!|![a-z\-]+!)$/i,lm=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fu(e){return Object.prototype.toString.call(e)}function Tt(e){return e===10||e===13}function Fr(e){return e===9||e===32}function Qe(e){return e===9||e===32||e===10||e===13}function os(e){return e===44||e===91||e===93||e===123||e===125}function Ey(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Py(e){return e===120?2:e===117?4:e===85?8:0}function Iy(e){return 48<=e&&e<=57?e-48:-1}function mu(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function Ty(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function om(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var cm=new Array(256),dm=new Array(256);for(var Hr=0;Hr<256;Hr++)cm[Hr]=mu(Hr)?1:0,dm[Hr]=mu(Hr);function Fy(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Sc,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function um(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Rk(r),new ze(t,r)}function U(e,t){throw um(e,t)}function Ja(e,t){e.onWarning&&e.onWarning.call(null,um(e,t))}var xu={YAML:function(t,r,n){var a,i,l;t.version!==null&&U(t,"duplication of %YAML directive"),n.length!==1&&U(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&U(t,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),l=parseInt(a[2],10),i!==1&&U(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Ja(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var a,i;n.length!==2&&U(t,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],im.test(a)||U(t,"ill-formed tag handle (first argument) of the TAG directive"),vr.call(t.tagMap,a)&&U(t,'there is a previously declared suffix for "'+a+'" tag handle'),lm.test(i)||U(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{U(t,"tag prefix is malformed: "+i)}t.tagMap[a]=i}};function mr(e,t,r,n){var a,i,l,o;if(t<r){if(o=e.input.slice(t,r),n)for(a=0,i=o.length;a<i;a+=1)l=o.charCodeAt(a),l===9||32<=l&&l<=1114111||U(e,"expected valid JSON character");else My.test(o)&&U(e,"the stream contains non-printable characters");e.result+=o}}function hu(e,t,r,n){var a,i,l,o;for(Ne.isObject(r)||U(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),l=0,o=a.length;l<o;l+=1)i=a[l],vr.call(t,i)||(om(t,i,r[i]),n[i]=!0)}function cs(e,t,r,n,a,i,l,o,c){var d,u;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),d=0,u=a.length;d<u;d+=1)Array.isArray(a[d])&&U(e,"nested arrays are not supported inside keys"),typeof a=="object"&&fu(a[d])==="[object Object]"&&(a[d]="[object Object]");if(typeof a=="object"&&fu(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(d=0,u=i.length;d<u;d+=1)hu(e,t,i[d],r);else hu(e,t,i,r);else!e.json&&!vr.call(r,a)&&vr.call(t,a)&&(e.line=l||e.line,e.lineStart=o||e.lineStart,e.position=c||e.position,U(e,"duplicated mapping key")),om(t,a,i),delete r[a];return t}function Cc(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):U(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function je(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Fr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Tt(a))for(Cc(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Ja(e,"deficient indentation"),n}function Ci(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Qe(r)))}function Mc(e,t){t===1?e.result+=" ":t>1&&(e.result+=Ne.repeat(`
`,t-1))}function Ay(e,t,r){var n,a,i,l,o,c,d,u,p=e.kind,f=e.result,h;if(h=e.input.charCodeAt(e.position),Qe(h)||os(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(a=e.input.charCodeAt(e.position+1),Qe(a)||r&&os(a)))return!1;for(e.kind="scalar",e.result="",i=l=e.position,o=!1;h!==0;){if(h===58){if(a=e.input.charCodeAt(e.position+1),Qe(a)||r&&os(a))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),Qe(n))break}else{if(e.position===e.lineStart&&Ci(e)||r&&os(h))break;if(Tt(h))if(c=e.line,d=e.lineStart,u=e.lineIndent,je(e,!1,-1),e.lineIndent>=t){o=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=c,e.lineStart=d,e.lineIndent=u;break}}o&&(mr(e,i,l,!1),Mc(e,e.line-c),i=l=e.position,o=!1),Fr(h)||(l=e.position+1),h=e.input.charCodeAt(++e.position)}return mr(e,i,l,!1),e.result?!0:(e.kind=p,e.result=f,!1)}function Dy(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(mr(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else Tt(r)?(mr(e,n,a,!0),Mc(e,je(e,!1,t)),n=a=e.position):e.position===e.lineStart&&Ci(e)?U(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);U(e,"unexpected end of the stream within a single quoted scalar")}function $y(e,t){var r,n,a,i,l,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return mr(e,r,e.position,!0),e.position++,!0;if(o===92){if(mr(e,r,e.position,!0),o=e.input.charCodeAt(++e.position),Tt(o))je(e,!1,t);else if(o<256&&cm[o])e.result+=dm[o],e.position++;else if((l=Py(o))>0){for(a=l,i=0;a>0;a--)o=e.input.charCodeAt(++e.position),(l=Ey(o))>=0?i=(i<<4)+l:U(e,"expected hexadecimal character");e.result+=Ty(i),e.position++}else U(e,"unknown escape sequence");r=n=e.position}else Tt(o)?(mr(e,r,n,!0),Mc(e,je(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Ci(e)?U(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}U(e,"unexpected end of the stream within a double quoted scalar")}function Ry(e,t){var r=!0,n,a,i,l=e.tag,o,c=e.anchor,d,u,p,f,h,v=Object.create(null),k,b,g,m;if(m=e.input.charCodeAt(e.position),m===91)u=93,h=!1,o=[];else if(m===123)u=125,h=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),m=e.input.charCodeAt(++e.position);m!==0;){if(je(e,!0,t),m=e.input.charCodeAt(e.position),m===u)return e.position++,e.tag=l,e.anchor=c,e.kind=h?"mapping":"sequence",e.result=o,!0;r?m===44&&U(e,"expected the node content, but found ','"):U(e,"missed comma between flow collection entries"),b=k=g=null,p=f=!1,m===63&&(d=e.input.charCodeAt(e.position+1),Qe(d)&&(p=f=!0,e.position++,je(e,!0,t))),n=e.line,a=e.lineStart,i=e.position,Ms(e,t,qa,!1,!0),b=e.tag,k=e.result,je(e,!0,t),m=e.input.charCodeAt(e.position),(f||e.line===n)&&m===58&&(p=!0,m=e.input.charCodeAt(++e.position),je(e,!0,t),Ms(e,t,qa,!1,!0),g=e.result),h?cs(e,o,v,b,k,g,n,a,i):p?o.push(cs(e,null,v,b,k,g,n,a,i)):o.push(k),je(e,!0,t),m=e.input.charCodeAt(e.position),m===44?(r=!0,m=e.input.charCodeAt(++e.position)):r=!1}U(e,"unexpected end of the stream within a flow collection")}function Oy(e,t){var r,n,a=ll,i=!1,l=!1,o=t,c=0,d=!1,u,p;if(p=e.input.charCodeAt(e.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)ll===a?a=p===43?pu:Cy:U(e,"repeat of a chomping mode identifier");else if((u=Iy(p))>=0)u===0?U(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?U(e,"repeat of an indentation width identifier"):(o=t+u-1,l=!0);else break;if(Fr(p)){do p=e.input.charCodeAt(++e.position);while(Fr(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!Tt(p)&&p!==0)}for(;p!==0;){for(Cc(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!l||e.lineIndent<o)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>o&&(o=e.lineIndent),Tt(p)){c++;continue}if(e.lineIndent<o){a===pu?e.result+=Ne.repeat(`
`,i?1+c:c):a===ll&&i&&(e.result+=`
`);break}for(n?Fr(p)?(d=!0,e.result+=Ne.repeat(`
`,i?1+c:c)):d?(d=!1,e.result+=Ne.repeat(`
`,c+1)):c===0?i&&(e.result+=" "):e.result+=Ne.repeat(`
`,c):e.result+=Ne.repeat(`
`,i?1+c:c),i=!0,l=!0,c=0,r=e.position;!Tt(p)&&p!==0;)p=e.input.charCodeAt(++e.position);mr(e,r,e.position,!1)}return!0}function gu(e,t){var r,n=e.tag,a=e.anchor,i=[],l,o=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),!(c!==45||(l=e.input.charCodeAt(e.position+1),!Qe(l))));){if(o=!0,e.position++,je(e,!0,-1)&&e.lineIndent<=t){i.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,Ms(e,t,am,!1,!0),i.push(e.result),je(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)U(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=i,!0):!1}function By(e,t,r){var n,a,i,l,o,c,d=e.tag,u=e.anchor,p={},f=Object.create(null),h=null,v=null,k=null,b=!1,g=!1,m;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),m=e.input.charCodeAt(e.position);m!==0;){if(!b&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(m===63||m===58)&&Qe(n))m===63?(b&&(cs(e,p,f,h,v,null,l,o,c),h=v=k=null),g=!0,b=!0,a=!0):b?(b=!1,a=!0):U(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,m=n;else{if(l=e.line,o=e.lineStart,c=e.position,!Ms(e,r,nm,!1,!0))break;if(e.line===i){for(m=e.input.charCodeAt(e.position);Fr(m);)m=e.input.charCodeAt(++e.position);if(m===58)m=e.input.charCodeAt(++e.position),Qe(m)||U(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(cs(e,p,f,h,v,null,l,o,c),h=v=k=null),g=!0,b=!1,a=!1,h=e.tag,v=e.result;else if(g)U(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=u,!0}else if(g)U(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=u,!0}if((e.line===i||e.lineIndent>t)&&(b&&(l=e.line,o=e.lineStart,c=e.position),Ms(e,t,Za,!0,a)&&(b?v=e.result:k=e.result),b||(cs(e,p,f,h,v,k,l,o,c),h=v=k=null),je(e,!0,-1),m=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&m!==0)U(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&cs(e,p,f,h,v,null,l,o,c),g&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=p),g}function Vy(e){var t,r=!1,n=!1,a,i,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&U(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(r=!0,l=e.input.charCodeAt(++e.position)):l===33?(n=!0,a="!!",l=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(i=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):U(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!Qe(l);)l===33&&(n?U(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),im.test(a)||U(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),_y.test(i)&&U(e,"tag suffix cannot contain flow indicator characters")}i&&!lm.test(i)&&U(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{U(e,"tag name is malformed: "+i)}return r?e.tag=i:vr.call(e.tagMap,a)?e.tag=e.tagMap[a]+i:a==="!"?e.tag="!"+i:a==="!!"?e.tag="tag:yaml.org,2002:"+i:U(e,'undeclared tag handle "'+a+'"'),!0}function zy(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&U(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Qe(r)&&!os(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Wy(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Qe(n)&&!os(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),vr.call(e.anchorMap,r)||U(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],je(e,!0,-1),!0}function Ms(e,t,r,n,a){var i,l,o,c=1,d=!1,u=!1,p,f,h,v,k,b;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=l=o=Za===r||am===r,n&&je(e,!0,-1)&&(d=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;Vy(e)||zy(e);)je(e,!0,-1)?(d=!0,o=i,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):o=!1;if(o&&(o=d||a),(c===1||Za===r)&&(qa===r||nm===r?k=t:k=t+1,b=e.position-e.lineStart,c===1?o&&(gu(e,b)||By(e,b,k))||Ry(e,k)?u=!0:(l&&Oy(e,k)||Dy(e,k)||$y(e,k)?u=!0:Wy(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&U(e,"alias node should not have any properties")):Ay(e,k,qa===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(u=o&&gu(e,b))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&U(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,f=e.implicitTypes.length;p<f;p+=1)if(v=e.implicitTypes[p],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(vr.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,h=e.typeMap.multi[e.kind||"fallback"],p=0,f=h.length;p<f;p+=1)if(e.tag.slice(0,h[p].tag.length)===h[p].tag){v=h[p];break}v||U(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&U(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):U(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function Hy(e){var t=e.position,r,n,a,i=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(je(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(i=!0,l=e.input.charCodeAt(++e.position),r=e.position;l!==0&&!Qe(l);)l=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&U(e,"directive name must not be less than one character in length");l!==0;){for(;Fr(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!Tt(l));break}if(Tt(l))break;for(r=e.position;l!==0&&!Qe(l);)l=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}l!==0&&Cc(e),vr.call(xu,n)?xu[n](e,n,a):Ja(e,'unknown document directive "'+n+'"')}if(je(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,je(e,!0,-1)):i&&U(e,"directives end mark is expected"),Ms(e,e.lineIndent-1,Za,!1,!0),je(e,!0,-1),e.checkLineBreaks&&Ly.test(e.input.slice(t,e.position))&&Ja(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ci(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,je(e,!0,-1));return}if(e.position<e.length-1)U(e,"end of the stream or a document separator is expected");else return}function pm(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Fy(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,U(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Hy(r);return r.documents}function Uy(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=pm(e,r);if(typeof t!="function")return n;for(var a=0,i=n.length;a<i;a+=1)t(n[a])}function Gy(e,t){var r=pm(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ze("expected a single document in the stream, but found more")}}var Ky=Uy,Yy=Gy,fm={loadAll:Ky,load:Yy},mm=Object.prototype.toString,xm=Object.prototype.hasOwnProperty,Lc=65279,Qy=9,Ln=10,Xy=13,qy=32,Zy=33,Jy=34,fo=35,e1=37,t1=38,r1=39,s1=42,hm=44,n1=45,ei=58,a1=61,i1=62,l1=63,o1=64,gm=91,vm=93,c1=96,km=123,d1=124,ym=125,Oe={};Oe[0]="\\0";Oe[7]="\\a";Oe[8]="\\b";Oe[9]="\\t";Oe[10]="\\n";Oe[11]="\\v";Oe[12]="\\f";Oe[13]="\\r";Oe[27]="\\e";Oe[34]='\\"';Oe[92]="\\\\";Oe[133]="\\N";Oe[160]="\\_";Oe[8232]="\\L";Oe[8233]="\\P";var u1=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p1=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function f1(e,t){var r,n,a,i,l,o,c;if(t===null)return{};for(r={},n=Object.keys(t),a=0,i=n.length;a<i;a+=1)l=n[a],o=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),c=e.compiledTypeMap.fallback[l],c&&xm.call(c.styleAliases,o)&&(o=c.styleAliases[o]),r[l]=o;return r}function m1(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ze("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ne.repeat("0",n-t.length)+t}var x1=1,_n=2;function h1(e){this.schema=e.schema||Sc,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ne.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=f1(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?_n:x1,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vu(e,t){for(var r=Ne.repeat(" ",t),n=0,a=-1,i="",l,o=e.length;n<o;)a=e.indexOf(`
`,n),a===-1?(l=e.slice(n),n=o):(l=e.slice(n,a+1),n=a+1),l.length&&l!==`
`&&(i+=r),i+=l;return i}function mo(e,t){return`
`+Ne.repeat(" ",e.indent*t)}function g1(e,t){var r,n,a;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}function ti(e){return e===qy||e===Qy}function En(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Lc||65536<=e&&e<=1114111}function ku(e){return En(e)&&e!==Lc&&e!==Xy&&e!==Ln}function yu(e,t,r){var n=ku(e),a=n&&!ti(e);return(r?n:n&&e!==hm&&e!==gm&&e!==vm&&e!==km&&e!==ym)&&e!==fo&&!(t===ei&&!a)||ku(t)&&!ti(t)&&e===fo||t===ei&&a}function v1(e){return En(e)&&e!==Lc&&!ti(e)&&e!==n1&&e!==l1&&e!==ei&&e!==hm&&e!==gm&&e!==vm&&e!==km&&e!==ym&&e!==fo&&e!==t1&&e!==s1&&e!==Zy&&e!==d1&&e!==a1&&e!==i1&&e!==r1&&e!==Jy&&e!==e1&&e!==o1&&e!==c1}function k1(e){return!ti(e)&&e!==ei}function Xs(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function bm(e){var t=/^\n* /;return t.test(e)}var jm=1,xo=2,wm=3,Nm=4,Yr=5;function y1(e,t,r,n,a,i,l,o){var c,d=0,u=null,p=!1,f=!1,h=n!==-1,v=-1,k=v1(Xs(e,0))&&k1(Xs(e,e.length-1));if(t||l)for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=Xs(e,c),!En(d))return Yr;k=k&&yu(d,u,o),u=d}else{for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=Xs(e,c),d===Ln)p=!0,h&&(f=f||c-v-1>n&&e[v+1]!==" ",v=c);else if(!En(d))return Yr;k=k&&yu(d,u,o),u=d}f=f||h&&c-v-1>n&&e[v+1]!==" "}return!p&&!f?k&&!l&&!a(e)?jm:i===_n?Yr:xo:r>9&&bm(e)?Yr:l?i===_n?Yr:xo:f?Nm:wm}function b1(e,t,r,n,a){e.dump=function(){if(t.length===0)return e.quotingType===_n?'""':"''";if(!e.noCompatMode&&(u1.indexOf(t)!==-1||p1.test(t)))return e.quotingType===_n?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=n||e.flowLevel>-1&&r>=e.flowLevel;function c(d){return g1(e,d)}switch(y1(t,o,e.indent,l,c,e.quotingType,e.forceQuotes&&!n,a)){case jm:return t;case xo:return"'"+t.replace(/'/g,"''")+"'";case wm:return"|"+bu(t,e.indent)+ju(vu(t,i));case Nm:return">"+bu(t,e.indent)+ju(vu(j1(t,l),i));case Yr:return'"'+w1(t)+'"';default:throw new ze("impossible error: invalid scalar style")}}()}function bu(e,t){var r=bm(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),i=a?"+":n?"":"-";return r+i+`
`}function ju(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function j1(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,r.lastIndex=d,wu(e.slice(0,d),t)}(),a=e[0]===`
`||e[0]===" ",i,l;l=r.exec(e);){var o=l[1],c=l[2];i=c[0]===" ",n+=o+(!a&&!i&&c!==""?`
`:"")+wu(c,t),a=i}return n}function wu(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,a=0,i,l=0,o=0,c="";n=r.exec(e);)o=n.index,o-a>t&&(i=l>a?l:o,c+=`
`+e.slice(a,i),a=i+1),l=o;return c+=`
`,e.length-a>t&&l>a?c+=e.slice(a,l)+`
`+e.slice(l+1):c+=e.slice(a),c.slice(1)}function w1(e){for(var t="",r=0,n,a=0;a<e.length;r>=65536?a+=2:a++)r=Xs(e,a),n=Oe[r],!n&&En(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=n||m1(r);return t}function N1(e,t,r){var n="",a=e.tag,i,l,o;for(i=0,l=r.length;i<l;i+=1)o=r[i],e.replacer&&(o=e.replacer.call(r,String(i),o)),(Qt(e,t,o,!1,!1)||typeof o>"u"&&Qt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}function Nu(e,t,r,n){var a="",i=e.tag,l,o,c;for(l=0,o=r.length;l<o;l+=1)c=r[l],e.replacer&&(c=e.replacer.call(r,String(l),c)),(Qt(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&Qt(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=mo(e,t)),e.dump&&Ln===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=i,e.dump=a||"[]"}function S1(e,t,r){var n="",a=e.tag,i=Object.keys(r),l,o,c,d,u;for(l=0,o=i.length;l<o;l+=1)u="",n!==""&&(u+=", "),e.condenseFlow&&(u+='"'),c=i[l],d=r[c],e.replacer&&(d=e.replacer.call(r,c,d)),Qt(e,t,c,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Qt(e,t,d,!1,!1)&&(u+=e.dump,n+=u));e.tag=a,e.dump="{"+n+"}"}function C1(e,t,r,n){var a="",i=e.tag,l=Object.keys(r),o,c,d,u,p,f;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new ze("sortKeys must be a boolean or a function");for(o=0,c=l.length;o<c;o+=1)f="",(!n||a!=="")&&(f+=mo(e,t)),d=l[o],u=r[d],e.replacer&&(u=e.replacer.call(r,d,u)),Qt(e,t+1,d,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&Ln===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,p&&(f+=mo(e,t)),Qt(e,t+1,u,!0,p)&&(e.dump&&Ln===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,a+=f));e.tag=i,e.dump=a||"{}"}function Su(e,t,r){var n,a,i,l,o,c;for(a=r?e.explicitTypes:e.implicitTypes,i=0,l=a.length;i<l;i+=1)if(o=a[i],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(r?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(c=e.styleMap[o.tag]||o.defaultStyle,mm.call(o.represent)==="[object Function]")n=o.represent(t,c);else if(xm.call(o.represent,c))n=o.represent[c](t,c);else throw new ze("!<"+o.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function Qt(e,t,r,n,a,i,l){e.tag=null,e.dump=r,Su(e,r,!1)||Su(e,r,!0);var o=mm.call(e.dump),c=n,d;n&&(n=e.flowLevel<0||e.flowLevel>t);var u=o==="[object Object]"||o==="[object Array]",p,f;if(u&&(p=e.duplicates.indexOf(r),f=p!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(a=!1),f&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(u&&f&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),o==="[object Object]")n&&Object.keys(e.dump).length!==0?(C1(e,t,e.dump,a),f&&(e.dump="&ref_"+p+e.dump)):(S1(e,t,e.dump),f&&(e.dump="&ref_"+p+" "+e.dump));else if(o==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?Nu(e,t-1,e.dump,a):Nu(e,t,e.dump,a),f&&(e.dump="&ref_"+p+e.dump)):(N1(e,t,e.dump),f&&(e.dump="&ref_"+p+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&b1(e,e.dump,t,i,c);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new ze("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function M1(e,t){var r=[],n=[],a,i;for(ho(e,r,n),a=0,i=n.length;a<i;a+=1)t.duplicates.push(r[n[a]]);t.usedDuplicates=new Array(i)}function ho(e,t,r){var n,a,i;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)ho(e[a],t,r);else for(n=Object.keys(e),a=0,i=n.length;a<i;a+=1)ho(e[n[a]],t,r)}function L1(e,t){t=t||{};var r=new h1(t);r.noRefs||M1(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Qt(r,0,n,!0,!0)?r.dump+`
`:""}var _1=L1,E1={dump:_1};function _c(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var P1=Pe,I1=Of,T1=Wf,F1=Yf,A1=Qf,D1=Sc,$1=fm.load,R1=fm.loadAll,O1=E1.dump,B1=ze,V1={binary:em,float:Kf,map:zf,null:Hf,pairs:rm,set:sm,timestamp:Zf,bool:Uf,int:Gf,merge:Jf,omap:tm,seq:Vf,str:Bf},z1=_c("safeLoad","load"),W1=_c("safeLoadAll","loadAll"),H1=_c("safeDump","dump"),U1={Type:P1,Schema:I1,FAILSAFE_SCHEMA:T1,JSON_SCHEMA:F1,CORE_SCHEMA:A1,DEFAULT_SCHEMA:D1,load:$1,loadAll:R1,dump:O1,YAMLException:B1,types:V1,safeLoad:z1,safeLoadAll:W1,safeDump:H1};function G1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")?!1:!!(t.includes("apiVersion:")&&t.includes("kind:")||t.startsWith("---"))}function Sm(e){try{return K1(e)}catch(t){return console.error("parsePlanYaml failed:",t),{plans:[],events:[],stats:{totalLines:e.split(`
`).length,parsedLines:0,errorLines:0,duplicateLines:0,plansFound:0,vmsFound:0},summary:{totalPlans:0,running:0,succeeded:0,failed:0,archived:0,pending:0},networkMaps:[],storageMaps:[]}}}function K1(e){const t=U1.loadAll(e),r=[],n=[],a=[];for(const u of t){if(!u||typeof u!="object")continue;const p=u;if(p.kind==="PlanList"||p.kind==="List"){const f=u;if(f.items&&Array.isArray(f.items))for(const h of f.items)Cu(h)&&r.push(h);continue}if(p.kind==="NetworkMapList"){const f=u;if(f.items&&Array.isArray(f.items))for(const h of f.items)Mu(h)&&n.push(h);continue}if(p.kind==="StorageMapList"){const f=u;if(f.items&&Array.isArray(f.items))for(const h of f.items)Lu(h)&&a.push(h);continue}Cu(u)?r.push(u):Mu(u)?n.push(u):Lu(u)&&a.push(u)}const i=r.map(X1),l=n.map(Y1),o=a.map(Q1),c={totalLines:e.split(`
`).length,parsedLines:e.split(`
`).length,errorLines:0,duplicateLines:0,plansFound:i.length,vmsFound:i.reduce((u,p)=>u+Object.keys(p.vms).length,0)},d={totalPlans:i.length,running:i.filter(u=>u.status===Z.Running).length,succeeded:i.filter(u=>u.status===Z.Succeeded).length,failed:i.filter(u=>u.status===Z.Failed).length,archived:i.filter(u=>u.archived).length,pending:i.filter(u=>u.status===Z.Pending||u.status===Z.Ready).length};return{plans:i,events:[],summary:d,stats:c,networkMaps:l,storageMaps:o}}function Cu(e){if(!e||typeof e!="object")return!1;const t=e;return t.kind==="Plan"&&typeof t.apiVersion=="string"&&t.apiVersion.startsWith("forklift.konveyor.io/")}function Mu(e){if(!e||typeof e!="object")return!1;const t=e;return t.kind==="NetworkMap"&&typeof t.apiVersion=="string"&&t.apiVersion.startsWith("forklift.konveyor.io/")}function Lu(e){if(!e||typeof e!="object")return!1;const t=e;return t.kind==="StorageMap"&&typeof t.apiVersion=="string"&&t.apiVersion.startsWith("forklift.konveyor.io/")}function Y1(e){var c,d,u,p,f,h,v,k,b,g;const t=((c=e.metadata)==null?void 0:c.name)||"unknown",r=((d=e.metadata)==null?void 0:d.namespace)||"default",n=(f=(p=(u=e.metadata)==null?void 0:u.ownerReferences)==null?void 0:p.find(m=>m.kind==="Plan"))==null?void 0:f.name,a=(((h=e.spec)==null?void 0:h.map)||[]).map(m=>{var x,j,N,y,C;return{source:{id:(x=m.source)==null?void 0:x.id,name:(j=m.source)==null?void 0:j.name},destination:{type:(N=m.destination)==null?void 0:N.type,name:(y=m.destination)==null?void 0:y.name,namespace:(C=m.destination)==null?void 0:C.namespace}}}),i=(v=e.spec)!=null&&v.provider?{source:e.spec.provider.source?{name:e.spec.provider.source.name,namespace:e.spec.provider.source.namespace}:void 0,destination:e.spec.provider.destination?{name:e.spec.provider.destination.name,namespace:e.spec.provider.destination.namespace}:void 0}:void 0,l=(((k=e.status)==null?void 0:k.conditions)||[]).map(m=>({type:m.type||"",status:m.status||"",category:m.category,message:m.message||"",timestamp:new Date(m.lastTransitionTime||0)})),o=(g=(b=e.status)==null?void 0:b.references)==null?void 0:g.map(m=>({id:m.id||"",name:m.name||""}));return{name:t,namespace:r,ownerPlanName:n,entries:a,provider:i,conditions:l,references:o}}function Q1(e){var o,c,d,u,p,f,h,v;const t=((o=e.metadata)==null?void 0:o.name)||"unknown",r=((c=e.metadata)==null?void 0:c.namespace)||"default",n=(p=(u=(d=e.metadata)==null?void 0:d.ownerReferences)==null?void 0:u.find(k=>k.kind==="Plan"))==null?void 0:p.name,a=(((f=e.spec)==null?void 0:f.map)||[]).map(k=>{var b,g,m,x,j,N;return{source:{id:(b=k.source)==null?void 0:b.id,name:(g=k.source)==null?void 0:g.name},destination:{storageClass:(m=k.destination)==null?void 0:m.storageClass,accessMode:(x=k.destination)==null?void 0:x.accessMode,volumeMode:(j=k.destination)==null?void 0:j.volumeMode,name:(N=k.destination)==null?void 0:N.name}}}),i=(h=e.spec)!=null&&h.provider?{source:e.spec.provider.source?{name:e.spec.provider.source.name,namespace:e.spec.provider.source.namespace}:void 0,destination:e.spec.provider.destination?{name:e.spec.provider.destination.name,namespace:e.spec.provider.destination.namespace}:void 0}:void 0,l=(((v=e.status)==null?void 0:v.conditions)||[]).map(k=>({type:k.type||"",status:k.status||"",category:k.category,message:k.message||"",timestamp:new Date(k.lastTransitionTime||0)}));return{name:t,namespace:r,ownerPlanName:n,entries:a,provider:i,conditions:l}}function X1(e){var h,v,k,b,g,m,x,j,N,y,C,M,P,w,_,L,I,E,A,R,V,T,$,D;const t=((h=e.metadata)==null?void 0:h.name)||"unknown",r=((v=e.metadata)==null?void 0:v.namespace)||"default",n=((k=e.spec)==null?void 0:k.type)||((b=e.spec)!=null&&b.warm?"warm":"cold");let a=ke.Unknown;n==="warm"?a=ke.Warm:n==="cold"&&(a=ke.Cold);const i=(((g=e.status)==null?void 0:g.conditions)||[]).map(B=>({type:B.type||"",status:B.status||"",category:B.category,message:B.message||"",timestamp:new Date(B.lastTransitionTime||0)})),l=!!((m=e.spec)!=null&&m.archived);let o=Z.Pending;for(const B of i){if(B.type==="Succeeded"&&B.status===ar.True){o=Z.Succeeded;break}if(B.type==="Failed"&&B.status===ar.True){o=Z.Failed;break}B.type==="Executing"&&B.status===ar.True&&(o=Z.Running),B.type==="Ready"&&B.status===ar.True&&o===Z.Pending&&(o=Z.Ready)}const c={},d=((j=(x=e.status)==null?void 0:x.migration)==null?void 0:j.vms)||[];if(o===Z.Pending||o===Z.Ready){const B=(N=e.status)==null?void 0:N.migration;if(d.length>0){const Y=d.some(Q=>{var K;return!!Q.error||((K=Q.pipeline)==null?void 0:K.some(re=>!!re.error))}),G=d.every(Q=>!!Q.completed||Q.phase===F.Completed);Y?o=Z.Failed:B!=null&&B.completed||G?o=Z.Succeeded:B!=null&&B.started&&(o=Z.Running)}}for(const B of d){const Y=q1(B,a);Y&&(c[Y.id]=Y)}const u=(C=(y=e.status)==null?void 0:y.migration)==null?void 0:C.started,p=(P=(M=e.status)==null?void 0:M.migration)==null?void 0:P.completed,f=e.spec?{description:e.spec.description,targetNamespace:e.spec.targetNamespace,preserveStaticIPs:e.spec.preserveStaticIPs,skipGuestConversion:e.spec.skipGuestConversion,useCompatibilityMode:e.spec.useCompatibilityMode,runPreflightInspection:e.spec.runPreflightInspection,targetPowerState:e.spec.targetPowerState,migrateSharedDisks:e.spec.migrateSharedDisks,pvcNameTemplateUseGenerateName:e.spec.pvcNameTemplateUseGenerateName,preserveClusterCPUModel:e.spec.preserveClusterCpuModel,deleteGuestConversionPod:e.spec.deleteGuestConversionPod,deleteVmOnFailMigration:e.spec.deleteVmOnFailMigration,installLegacyDrivers:e.spec.installLegacyDrivers,transferNetwork:(w=e.spec.transferNetwork)==null?void 0:w.name,sourceProvider:(L=(_=e.spec.provider)==null?void 0:_.source)==null?void 0:L.name,destinationProvider:(E=(I=e.spec.provider)==null?void 0:I.destination)==null?void 0:E.name,networkMap:(R=(A=e.spec.map)==null?void 0:A.network)==null?void 0:R.name,storageMap:(T=(V=e.spec.map)==null?void 0:V.storage)==null?void 0:T.name}:void 0;return{name:t,namespace:r,status:o,archived:l,migrationType:a,conditions:i,vms:c,errors:[],panics:[],firstSeen:new Date(u||(($=e.metadata)==null?void 0:$.creationTimestamp)||0),lastSeen:new Date(p||u||((D=e.metadata)==null?void 0:D.creationTimestamp)||0),spec:f}}function q1(e,t){var x,j,N,y,C,M,P,w,_;const r=e.id||"",n=e.name||"";if(!r&&!n)return null;const a=r||n,i=t===ke.Warm,l=i&&((x=e.warm)!=null&&x.precopies)?e.warm.precopies:[],o=l.length,c=[],d={},u={},p={Initialize:ve.Initialize,PreflightInspection:ve.PreflightInspection,DiskAllocation:ve.DiskAllocation,DiskTransfer:ve.DiskTransfer,DiskTransferV2v:ve.DiskTransferV2v,Cutover:ve.Cutover,ImageConversion:ve.ImageConversion,VirtualMachineCreation:ve.VMCreation};for(const L of e.pipeline||[]){const I=p[L.name||""]||L.name||"",E=L.name||"Unknown",A=E==="DiskTransfer",R=L.phase||"",V=R==="Pending"||!L.started&&!L.completed&&!L.error,T=L.started?new Date(L.started):void 0,$=L.completed?new Date(L.completed):void 0,D=T&&$?$.getTime()-T.getTime():void 0;if(V||c.push({name:E,step:I,startedAt:T||new Date(0),endedAt:$}),V)continue;const B=[],Y=T||new Date(0);if(B.push({timestamp:Y.toISOString(),level:"info",message:`${L.description||E} - Phase: ${R||"Unknown"}`,phase:E,rawLine:JSON.stringify({step:E,description:L.description,phase:R,progress:L.progress,started:L.started,completed:L.completed},null,2)}),L.progress){const G=((j=L.annotations)==null?void 0:j.unit)||"",Q=G?`${L.progress.completed||0}/${L.progress.total||0} ${G}`:`${L.progress.completed||0}/${L.progress.total||0}`;B.push({timestamp:($||Y).toISOString(),level:"info",message:`Progress: ${Q}`,phase:E,rawLine:JSON.stringify({progress:L.progress,annotations:L.annotations},null,2)})}for(const G of L.tasks||[])B.push({timestamp:(G.started?new Date(G.started):Y).toISOString(),level:"info",message:`Task: ${G.name||"unknown"}${G.reason?` - ${G.reason}`:""}${(N=G.annotations)!=null&&N.Precopy?` (Precopy #${G.annotations.Precopy})`:""}`,phase:E,rawLine:JSON.stringify(G,null,2)});if(L.error)for(const G of L.error.reasons||[])B.push({timestamp:($||Y).toISOString(),level:"error",message:`${E} failed: ${G}`,phase:E,rawLine:JSON.stringify({step:E,error:L.error},null,2)});A&&o>0&&Z1(B,l,e.warm,E),d[E]=B,u[E]={phase:E,startTime:T==null?void 0:T.toISOString(),endTime:$==null?void 0:$.toISOString(),duration:D?xt(D):void 0,durationMs:D,totalLogs:B.length,groupedLogs:Ff(B),summaryItems:A&&o>0?[{label:"Precopies",value:`${o}`,type:"info"},{label:"Successes",value:`${((y=e.warm)==null?void 0:y.successes)||0}`,type:"info"},...(C=e.warm)!=null&&C.failures?[{label:"Failures",value:`${e.warm.failures}`,type:"error"}]:[]]:void 0}}let f;e.error&&(f={phase:e.error.phase||"",reasons:e.error.reasons||[]});const h=(e.conditions||[]).map(L=>({type:L.type||"",status:L.status||"",category:L.category,message:L.message||"",timestamp:new Date(L.lastTransitionTime||0)})),v=e.phase||(c.length>0?c[c.length-1].name:""),k=v?co(v,i):"",b=e.started?new Date(e.started):new Date(0),g=e.completed?new Date(e.completed):void 0;let m;return i&&o>0&&(m={precopies:l.map((I,E)=>{const A=I.start?new Date(I.start):void 0,R=I.end?new Date(I.end):void 0,V=A&&R?R.getTime()-A.getTime():void 0;return{iteration:E+1,snapshot:I.snapshot||"unknown",startedAt:A,endedAt:R,durationMs:V,disks:(I.deltas||[]).map(T=>T.disk||"").filter(Boolean)}}),successes:((M=e.warm)==null?void 0:M.successes)||0,failures:((P=e.warm)==null?void 0:P.failures)||0,consecutiveFailures:((w=e.warm)==null?void 0:w.consecutiveFailures)||0,nextPrecopyAt:(_=e.warm)==null?void 0:_.nextPrecopyAt}),{id:a,name:n,currentPhase:v,currentStep:k,migrationType:t,transferMethod:"Unknown",phaseHistory:c,dataVolumes:[],createdResources:[],phaseLogs:d,phaseLogSummaries:u,firstSeen:b,lastSeen:g||b,fromYaml:!0,precopyCount:o>0?o:void 0,warmInfo:m,error:f,conditions:h.length>0?h:void 0,operatingSystem:e.operatingSystem,restorePowerState:e.restorePowerState,newName:e.newName&&e.newName!==n?e.newName:void 0}}function Z1(e,t,r,n){for(let a=0;a<t.length;a++){const i=t[a],l=a+1,o=i.start?new Date(i.start):void 0,c=i.end?new Date(i.end):void 0,d=o&&c?c.getTime()-o.getTime():void 0,u=(i.deltas||[]).map(p=>p.disk).filter(Boolean).join(", ");e.push({timestamp:(o||new Date(0)).toISOString(),level:"info",message:`Precopy ${l}/${t.length}: ${i.snapshot||"snapshot"}${d?` (${xt(d)})`:""}${u?` - ${u}`:""}`,phase:n,rawLine:JSON.stringify({precopyIteration:l,totalPrecopies:t.length,snapshot:i.snapshot,start:i.start,end:i.end,duration:d?xt(d):void 0,createTaskId:i.createTaskId,removeTaskId:i.removeTaskId,deltas:i.deltas},null,2)})}e.push({timestamp:new Date().toISOString(),level:r.failures?"warning":"info",message:`Precopy summary: ${r.successes||0} successes, ${r.failures||0} failures`,phase:n,rawLine:JSON.stringify({successes:r.successes,failures:r.failures,consecutiveFailures:r.consecutiveFailures,nextPrecopyAt:r.nextPrecopyAt},null,2)})}var _u={},J1=function(e,t,r,n,a){var i=new Worker(_u[t]||(_u[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(l){var o=l.data,c=o.$e$;if(c){var d=new Error(c[0]);d.code=c[1],d.stack=c[2],a(d,null)}else a(null,o)},i.postMessage(r,n),i},We=Uint8Array,_r=Uint16Array,Cm=Int32Array,Ec=new We([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pc=new We([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mm=new We([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lm=function(e,t){for(var r=new _r(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new Cm(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},_m=Lm(Ec,2),Ic=_m.b,eb=_m.r;Ic[28]=258,eb[258]=28;var tb=Lm(Pc,0),Em=tb.b,ri=new _r(32768);for(var oe=0;oe<32768;++oe){var Zt=(oe&43690)>>1|(oe&21845)<<1;Zt=(Zt&52428)>>2|(Zt&13107)<<2,Zt=(Zt&61680)>>4|(Zt&3855)<<4,ri[oe]=((Zt&65280)>>8|(Zt&255)<<8)>>1}var vs=function(e,t,r){for(var n=e.length,a=0,i=new _r(t);a<n;++a)e[a]&&++i[e[a]-1];var l=new _r(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var o;if(r){o=new _r(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],p=l[e[a]-1]++<<u,f=p|(1<<u)-1;p<=f;++p)o[ri[p]>>c]=d}else for(o=new _r(n),a=0;a<n;++a)e[a]&&(o[a]=ri[l[e[a]-1]++]>>15-e[a]);return o},$n=new We(288);for(var oe=0;oe<144;++oe)$n[oe]=8;for(var oe=144;oe<256;++oe)$n[oe]=9;for(var oe=256;oe<280;++oe)$n[oe]=7;for(var oe=280;oe<288;++oe)$n[oe]=8;var Pm=new We(32);for(var oe=0;oe<32;++oe)Pm[oe]=5;var Im=vs($n,9,1),Tm=vs(Pm,5,1),Na=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ot=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Sa=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Fm=function(e){return(e+7)/8|0},Mi=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new We(e.subarray(t,r))},Am=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ve=function(e,t,r){var n=new Error(t||Am[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ve),!r)throw n;return n},Dm=function(e,t,r,n){var a=e.length,i=n?n.length:0;if(!a||t.f&&!t.l)return r||new We(0);var l=!r,o=l||t.i!=2,c=t.i;l&&(r=new We(a*3));var d=function(X){var ee=r.length;if(X>ee){var me=new We(Math.max(ee*2,X));me.set(r),r=me}},u=t.f||0,p=t.p||0,f=t.b||0,h=t.l,v=t.d,k=t.m,b=t.n,g=a*8;do{if(!h){u=ot(e,p,1);var m=ot(e,p+1,3);if(p+=3,m)if(m==1)h=Im,v=Tm,k=9,b=5;else if(m==2){var y=ot(e,p,31)+257,C=ot(e,p+10,15)+4,M=y+ot(e,p+5,31)+1;p+=14;for(var P=new We(M),w=new We(19),_=0;_<C;++_)w[Mm[_]]=ot(e,p+_*3,7);p+=C*3;for(var L=Na(w),I=(1<<L)-1,E=vs(w,L,1),_=0;_<M;){var A=E[ot(e,p,I)];p+=A&15;var x=A>>4;if(x<16)P[_++]=x;else{var R=0,V=0;for(x==16?(V=3+ot(e,p,3),p+=2,R=P[_-1]):x==17?(V=3+ot(e,p,7),p+=3):x==18&&(V=11+ot(e,p,127),p+=7);V--;)P[_++]=R}}var T=P.subarray(0,y),$=P.subarray(y);k=Na(T),b=Na($),h=vs(T,k,1),v=vs($,b,1)}else Ve(1);else{var x=Fm(p)+4,j=e[x-4]|e[x-3]<<8,N=x+j;if(N>a){c&&Ve(0);break}o&&d(f+j),r.set(e.subarray(x,N),f),t.b=f+=j,t.p=p=N*8,t.f=u;continue}if(p>g){c&&Ve(0);break}}o&&d(f+131072);for(var D=(1<<k)-1,B=(1<<b)-1,Y=p;;Y=p){var R=h[Sa(e,p)&D],G=R>>4;if(p+=R&15,p>g){c&&Ve(0);break}if(R||Ve(2),G<256)r[f++]=G;else if(G==256){Y=p,h=null;break}else{var Q=G-254;if(G>264){var _=G-257,K=Ec[_];Q=ot(e,p,(1<<K)-1)+Ic[_],p+=K}var re=v[Sa(e,p)&B],ge=re>>4;re||Ve(3),p+=re&15;var $=Em[ge];if(ge>3){var K=Pc[ge];$+=Sa(e,p)&(1<<K)-1,p+=K}if(p>g){c&&Ve(0);break}o&&d(f+131072);var et=f+Q;if(f<$){var At=i-$,z=Math.min($,et);for(At+f<0&&Ve(3);f<z;++f)r[f]=n[At+f]}for(;f<et;++f)r[f]=r[f-$]}}t.l=h,t.p=Y,t.b=f,t.f=u,h&&(u=1,t.m=k,t.d=v,t.n=b)}while(!u);return f!=r.length&&l?Mi(r,0,f):r.subarray(0,f)},rb=new We(0),sb=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},Eu=function(e,t,r){for(var n=e(),a=e.toString(),i=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),l=0;l<n.length;++l){var o=n[l],c=i[l];if(typeof o=="function"){t+=";"+c+"=";var d=o.toString();if(o.prototype)if(d.indexOf("[native code]")!=-1){var u=d.indexOf(" ",8)+1;t+=d.slice(u,d.indexOf("(",u))}else{t+=d;for(var p in o.prototype)t+=";"+c+".prototype."+p+"="+o.prototype[p].toString()}else t+=d}else r[c]=o}return t},sa=[],nb=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},ab=function(e,t,r,n){if(!sa[r]){for(var a="",i={},l=e.length-1,o=0;o<l;++o)a=Eu(e[o],a,i);sa[r]={c:Eu(e[l],a,i),e:i}}var c=sb({},sa[r].e);return J1(sa[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,c,nb(c),n)},ib=function(){return[We,_r,Cm,Ec,Pc,Mm,Ic,Em,Im,Tm,ri,Am,vs,Na,ot,Sa,Fm,Mi,Ve,Dm,Tc,$m,Rm]},$m=function(e){return postMessage(e,[e.buffer])},Rm=function(e){return e&&{out:e.size&&new We(e.size),dictionary:e.dictionary}},lb=function(e,t,r,n,a,i){var l=ab(r,n,a,function(o,c){l.terminate(),i(o,c)});return l.postMessage([e,t],t.consume?[e.buffer]:[]),function(){l.terminate()}},Et=function(e,t){return e[t]|e[t+1]<<8},wt=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ol=function(e,t){return wt(e,t)+wt(e,t+4)*4294967296};function ob(e,t,r){return r||(r=t,t={}),typeof r!="function"&&Ve(7),lb(e,t,[ib],function(n){return $m(Tc(n.data[0],Rm(n.data[1])))},1,r)}function Tc(e,t){return Dm(e,{i:2},t&&t.out,t&&t.dictionary)}var go=typeof TextDecoder<"u"&&new TextDecoder,cb=0;try{go.decode(rb,{stream:!0}),cb=1}catch{}var db=function(e){for(var t="",r=0;;){var n=e[r++],a=(n>127)+(n>223)+(n>239);if(r+a>e.length)return{s:t,r:Mi(e,r-1)};a?a==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):a&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function ub(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(go)return go.decode(e);var a=db(e),i=a.s,r=a.r;return r.length&&Ve(8),i}}var pb=function(e,t){return t+30+Et(e,t+26)+Et(e,t+28)},fb=function(e,t,r){var n=Et(e,t+28),a=ub(e.subarray(t+46,t+46+n),!(Et(e,t+8)&2048)),i=t+46+n,l=wt(e,t+20),o=r&&l==4294967295?mb(e,i):[l,wt(e,t+24),wt(e,t+42)],c=o[0],d=o[1],u=o[2];return[Et(e,t+10),c,d,a,i+Et(e,t+30)+Et(e,t+32),u]},mb=function(e,t){for(;Et(e,t)!=1;t+=4+Et(e,t+2));return[ol(e,t+12),ol(e,t+4),ol(e,t+20)]},Pu=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function xb(e,t,r){r||(r=t,t={}),typeof r!="function"&&Ve(7);var n=[],a=function(){for(var b=0;b<n.length;++b)n[b]()},i={},l=function(b,g){Pu(function(){r(b,g)})};Pu(function(){l=r});for(var o=e.length-22;wt(e,o)!=101010256;--o)if(!o||e.length-o>65558)return l(Ve(13,0,1),null),a;var c=Et(e,o+8);if(c){var d=c,u=wt(e,o+16),p=u==4294967295||d==65535;if(p){var f=wt(e,o-12);p=wt(e,f)==101075792,p&&(d=c=wt(e,f+32),u=wt(e,f+48))}for(var h=t&&t.filter,v=function(b){var g=fb(e,u,p),m=g[0],x=g[1],j=g[2],N=g[3],y=g[4],C=g[5],M=pb(e,C);u=y;var P=function(_,L){_?(a(),l(_,null)):(L&&(i[N]=L),--c||l(null,i))};if(!h||h({name:N,size:x,originalSize:j,compression:m}))if(!m)P(null,Mi(e,M,M+x));else if(m==8){var w=e.subarray(M,M+x);if(j<524288||x>.8*j)try{P(null,Tc(w,{out:new We(j)}))}catch(_){P(_,null)}else n.push(ob(w,{size:j},P))}else P(Ve(14,"unknown compression type "+m,1),null);else P(null,null)},k=0;k<d;++k)v(k)}else l(null,{});return a}const bt=512,hb=31,gb=139,Fc=50*1024*1024,vb=new Set([".png",".jpg",".jpeg",".gif",".webp",".ico",".svg",".bmp",".mp4",".webm",".avi",".mov",".mp3",".wav",".ogg",".woff",".woff2",".ttf",".otf",".eot",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".exe",".dll",".so",".dylib",".o",".a",".class",".pyc",".pyo",".wasm",".db",".sqlite",".sqlite3",".rpm",".deb",".dmg",".iso"]);function Ac(e){const t=e.toLowerCase(),r=t.lastIndexOf(".");return r===-1?!1:vb.has(t.slice(r))}async function Om(e,t=""){const r=e instanceof File?new Uint8Array(await e.arrayBuffer()):e;if(Vm(r))return zm(r,t);const n=Wm(r)?await kb(r,t):jb(r,t);return Bm(n)}async function Bm(e){const t=[];for(const r of e)if(Li(r.path))try{const n=Mb(r.path),a=Vm(r.rawBytes)?await zm(r.rawBytes,n):await Om(r.rawBytes,n);t.push(...a)}catch{t.push(r)}else t.push(r);return t}async function kb(e,t){const a=new ReadableStream({start(l){l.enqueue(e),l.close()}}).pipeThrough(new DecompressionStream("gzip")).getReader(),i=new yb(a);return bb(i,t)}class yb{constructor(t){$t(this,"reader");$t(this,"buffer",new Uint8Array(0));$t(this,"eof",!1);this.reader=t}async readExact(t){if(this.buffer.byteLength>=t){const o=this.buffer.slice(0,t);return this.buffer=this.buffer.subarray(t),o}const r=[this.buffer];let n=this.buffer.byteLength;for(this.buffer=new Uint8Array(0);n<t&&!this.eof;){const{done:o,value:c}=await this.reader.read();if(o){this.eof=!0;break}r.push(c),n+=c.byteLength}if(n<t)return null;const a=new Uint8Array(n);let i=0;for(const o of r)a.set(o,i),i+=o.byteLength;const l=a.slice(0,t);return n>t&&(this.buffer=a.subarray(t)),l}async skip(t){let r=t;if(this.buffer.byteLength>0){if(this.buffer.byteLength>=r){this.buffer=this.buffer.subarray(r);return}r-=this.buffer.byteLength,this.buffer=new Uint8Array(0)}for(;r>0&&!this.eof;){const{done:n,value:a}=await this.reader.read();if(n){this.eof=!0;break}a.byteLength>r?(this.buffer=a.subarray(r),r=0):r-=a.byteLength}}}async function bb(e,t){const r=[],n=new TextDecoder("utf-8",{fatal:!1});let a="";for(;;){const i=await e.readExact(bt);if(!i)break;if(si(i)){const o=await e.readExact(bt);if(!o||si(o))break;const c=await Iu(o,e,n,t,a);c==="longname"?a=await Tu(e,o,n):(c&&r.push(c),a="");continue}const l=await Iu(i,e,n,t,a);l==="longname"?a=await Tu(e,i,n):(l&&r.push(l),a="")}return r}async function Iu(e,t,r,n,a){const i=Wt(e,0,100),l=Wt(e,124,12),o=Wt(e,156,1),c=Wt(e,345,155),d=Dc(l),u=ln(d);if(o==="L")return"longname";let p=a||(c?`${c}/${i}`:i);p=p.replace(/\0+$/,"");const f=n?`${n}/${p}`:p;if(o==="5"||p.endsWith("/")||d===0||o!=="0"&&o!==""&&o!=="\0")return await t.skip(u),null;if(d>Fc)return await t.skip(u),null;if(!Li(f)&&Ac(f))return await t.skip(u),null;const h=await t.readExact(u);if(!h)return null;const v=h.slice(0,d),k=r.decode(v);return{path:f,content:k,rawBytes:v}}async function Tu(e,t,r){const n=Wt(t,124,12),a=Dc(n),i=ln(a),l=await e.readExact(i);return l?r.decode(l.subarray(0,a)).replace(/\0+$/,""):""}function jb(e,t){const r=[];let n=0;const a=new TextDecoder("utf-8",{fatal:!1});let i="";for(;n+bt<=e.length;){const l=e.subarray(n,n+bt);if(si(l)){if(n+2*bt<=e.length&&si(e.subarray(n+bt,n+2*bt)))break;n+=bt;continue}const o=Wt(l,0,100),c=Wt(l,124,12),d=Wt(l,156,1),u=Wt(l,345,155),p=Dc(c);if(n+=bt,d==="L"){const b=e.subarray(n,n+p);i=a.decode(b).replace(/\0+$/,""),n+=ln(p);continue}let f=i||(u?`${u}/${o}`:o);i="",f=f.replace(/\0+$/,"");const h=t?`${t}/${f}`:f;if(d==="5"||f.endsWith("/")||p===0||d!=="0"&&d!==""&&d!=="\0"||p>Fc||!Li(h)&&Ac(h)){n+=ln(p);continue}const v=e.slice(n,n+p),k=a.decode(v);r.push({path:h,content:k,rawBytes:v}),n+=ln(p)}return r}const wb=80,Nb=75;function Vm(e){return e.length>=4&&e[0]===wb&&e[1]===Nb&&(e[2]===3||e[2]===5||e[2]===7)&&(e[3]===4||e[3]===6||e[3]===8)}function Sb(e){return new Promise((t,r)=>{xb(e,(n,a)=>{n?r(n):t(a)})})}async function zm(e,t=""){const r=e instanceof File?new Uint8Array(await e.arrayBuffer()):e,n=await Sb(r),a=new TextDecoder("utf-8",{fatal:!1}),i=[];for(const[l,o]of Object.entries(n)){if(l.endsWith("/")||o.length===0||o.length>Fc)continue;const c=t?`${t}/${l}`:l;if(!Li(c)&&Ac(l))continue;const d=a.decode(o);i.push({path:c,content:d,rawBytes:o})}return Bm(i)}async function Cb(e){const t=await e.arrayBuffer(),r=new Uint8Array(t);if(!Wm(r))return new TextDecoder("utf-8").decode(r);const i=new ReadableStream({start(u){u.enqueue(r),u.close()}}).pipeThrough(new DecompressionStream("gzip")).getReader(),l=[];let o=0;for(;;){const{done:u,value:p}=await i.read();if(u)break;l.push(p),o+=p.length}const c=new Uint8Array(o);let d=0;for(const u of l)c.set(u,d),d+=u.length;return new TextDecoder("utf-8").decode(c)}function Wm(e){return e.length>=2&&e[0]===hb&&e[1]===gb}function si(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return!1;return!0}function Wt(e,t,r){let n=t+r;for(;n>t&&e[n-1]===0;)n--;const a=e.subarray(t,n);return new TextDecoder("ascii").decode(a)}function Dc(e){const t=e.trim();return t&&parseInt(t,8)||0}function ln(e){return Math.ceil(e/bt)*bt}function Li(e){const t=e.toLowerCase();return t.endsWith(".tar")||t.endsWith(".tar.gz")||t.endsWith(".tgz")||t.endsWith(".zip")}function Mb(e){const t=e.toLowerCase();return t.endsWith(".tar.gz")?e.slice(0,-7):t.endsWith(".tgz")||t.endsWith(".tar")||t.endsWith(".zip")?e.slice(0,-4):e}const $c=/^\[\s*(\d+\.\d)\]\s+(.+)$/,ni=/^\[\s*\d+\.\d{3,}\]/,Lb=/^libguestfs: trace: (\w+): (\S+)\s*(.*)/,_b=/add_drive\s+"([^"]*)"\s+"format:([^"]*)"\s+"protocol:([^"]*)"\s+"server:([^"]*)"/,Eb=/set_memsize\s+(\d+)/,Pb=/set_smp\s+(\d+)/,Ib=/^libguestfs: launch: backend=(.+)/,Tb=/guestfs_identifier=(\S+)/,Fb=/^command:\s+(\S+)\s*(.*)/,Ab=/^command:\s+(\S+)\s+returned\s+(\d+)/,Db=/^command:\s+(\S+):\s+stdout:$/,$b=/^commandrvf:\s+stdout=[yn]\s+stderr=[yn]\s+flags=/,Rb=/^commandrvf:\s+(\S+)\s*(.*)/,Ob=/^chroot:\s+(\S+):\s+running\s+'([^']+)'/,Bb=/^libguestfs: command: run:\s*(.*)/,Vb=/virt-v2v monitoring:\s*Progress update, completed\s+(\d+)\s*%/,zb=/virt-v2v monitoring:\s*Copying disk\s+(\d+)\s+out of\s+(\d+)/,Wb=/^guestfsd:\s+<=\s+(\w+)\s+\(0x[\da-f]+\)/i,Hb=/^guestfsd:\s+=>\s+(\w+)\s+\(0x[\da-f]+\)\s+took\s+([\d.]+)\s+secs/i,Hm=/\berror[:\s]/i,Um=/\bwarning[:\s]/i,Ub=/^check_host_free_space:\s+large_tmpdir=(\S+)\s+free_space=(\d+)/,Gb=/^info:\s*(?:virt-v2v[\w-]*):\s*virt-v2v\s+([\d.]+\S*)/,Kb=/^info:\s*libvirt version:\s*([\d.]+)/,Yb=/\bnbdkit\s+([\d]+\.[\d]+\.[\d]+)/,Qb=/VMware VixDiskLib \(([\d.]+)\)/,Xb=/libguestfs:\s*qemu version[^:]*:\s*([\d.]+)/,qb=/libguestfs: trace: \w+: version = <struct guestfs_version = major: (\d+), minor: (\d+), release: (\d+)/,Zb=/virtio-win-([\d.]+)\.iso/,Jb=[/get_backend_setting = NULL \(error\)/,/usbserial.*error/i,/error: No error/,/TLS disabled/],e2=["command:","commandrvf:","chroot:","guestfsd:","libguestfs:","nbdkit:","supermin:","libnbd:","info:","virt-v2v","umount-all:","Building command","windows:","hivex:","udev:","udevadm:","varlink:","list_filesystems:"],t2=["udevadm"],r2=/^(?:No filesystem is currently mounted on|Failed to determine unit we run in|SELinux enabled state cached to|varlink:|udev:|udevadm:)/,s2=/^(?:gulibguestfs:|estfsd:|uestfsd:|stfsd:|glibguestfs:|guelibguestfs:|gueslibguestfs:|guestfsdlibguestfs:|tfsd:)/,n2=[{key:"virtV2v",re:Gb},{key:"libvirt",re:Kb},{key:"nbdkit",re:Yb},{key:"vddk",re:Qb},{key:"qemu",re:Xb},{key:"libguestfs",re:qb,fmt:e=>`${e[1]}.${e[2]}.${e[3]}`},{key:"virtioWin",re:Zb}];function a2(e){return ni.test(e)?"kernel":$c.test(e)?"stage":e.startsWith("nbdkit:")||e.startsWith("running nbdkit")?"nbdkit":e.startsWith("libguestfs:")?"libguestfs":e.startsWith("guestfsd:")?"guestfsd":e.startsWith("command:")||e.startsWith("commandrvf:")||e.startsWith("chroot:")?"command":e.startsWith("info:")?"info":/virt-v2v monitoring:/i.test(e)?"monitor":e.trimStart().startsWith("<")?"xml":/^\s*(apiVersion:|kind:|metadata:|spec:|status:|---\s*$)/.test(e)?"yaml":Um.test(e)?"warning":Hm.test(e)&&!Gm(e)?"error":"other"}function i2(e){for(const t of e2)if(e.startsWith(t))return!0;return!!($c.test(e)&&!ni.test(e)||ni.test(e)||r2.test(e)||s2.test(e)||/^i_\w+\s*=/.test(e)||/^inspect_/.test(e)||/^fs:\s+\/dev\//.test(e)||/^check_filesystem:/.test(e)||/^check_for_filesystem/.test(e)||/^get_windows_systemroot/.test(e)||/^\/dev\/\S+\s+\(\w+\):/.test(e)||/^\s{4}\w[\w\s]*\w\s*:/.test(e))}function l2(e){return t2.includes(e)}function Fu(e){if(!e)return[];const t=[],r=/'([^']*)'|"([^"]*)"|(\S+)/g;let n;for(;(n=r.exec(e))!==null;)t.push(n[1]??n[2]??n[3]);return t}function Gm(e){for(const t of Jb)if(t.test(e))return!0;return!!(e.startsWith("nbdkit:")&&e.includes("debug:"))}function Au(e){return e.startsWith("nbdkit:")?"nbdkit":e.startsWith("libguestfs:")?"libguestfs":e.startsWith("guestfsd:")?"guestfsd":e.startsWith("supermin:")?"supermin":e.startsWith("libnbd:")?"libnbd":/^virt-v2v-in-place:/.test(e)?"virt-v2v-in-place":/^virt-v2v-inspector:/.test(e)?"virt-v2v-inspector":/^virt-v2v-customize:|^virt-customize:/.test(e)?"virt-v2v-customize":/^virt-v2v:/.test(e)?"virt-v2v":"unknown"}function o2(e,t,r){const n=e.some(l=>/Finishing off/i.test(l.name)),a=r.some(l=>/virt-v2v monitoring:\s*Finished/i.test(l)),i=t.some(l=>l.level==="error"&&/^virt-v2v/.test(l.source)&&!/warning/i.test(l.message)&&!/ignored\)/i.test(l.message));return i&&!n?"error":n||a?"success":i?"error":e.length>0?"in_progress":"unknown"}function Rc(e,t){const r=e[0]||"",n=e.slice(1);return{command:r,args:n,lineNumber:t}}function Ca(e,t){const r=`:${t}`;for(const[n,a]of e)if(n.endsWith(r)&&a.length>0)return a}function vo(e,t,r){if(e.commands.length===0)return;const n=Ca(t,e.name);if(n&&n.length>0){n[0].guestCommands.push(...e.commands);return}for(let a=r.length-1;a>=0;a--)if(r[a].name===e.name){r[a].guestCommands.push(...e.commands);return}for(const a of t.values())if(a.length>0){a[0].guestCommands.push(...e.commands);return}}function c2(e,t){for(const{key:r,re:n,fmt:a}of n2)if(!t[r]){const i=e.match(n);i&&(t[r]=a?a(i):i[1])}}function Km(e,t){if(e[t]==="\\"&&t+3<e.length&&e[t+1]==="x"){const r=e.substring(t+2,t+4),n=parseInt(r,16);if(!isNaN(n))return{byte:n,consumed:4}}return null}function ai(e,t){if(!e)return;const r=e.keySegments.join("\\");if(!r&&e.values.length===0)return;const n=e.hasWriteOp?"write":"read",a=n==="write"&&e.firstWriteLine?e.firstWriteLine:e.lineNumber,i=t.length>0?t[t.length-1]:null;if(i&&i.hivePath===e.hivePath&&i.keyPath===r&&i.mode===n&&i.lineNumber===a){i.values.push(...e.values);return}t.push({hivePath:e.hivePath,mode:n,openMode:e.openMode,keyPath:r,failedChild:e.failedChild||void 0,values:e.values,lineNumber:a})}function Du(e,t){const r=u2(e);if(t===4&&r.length>=4){const n=(r[0]|r[1]<<8|r[2]<<16|r[3]<<24>>>0)>>>0;return String(n)}return t===1||t===2||t===7?d2(r):r.length<=16?r.map(n=>n.toString(16).padStart(2,"0")).join(" "):`(${r.length} bytes)`}function d2(e){let t="";for(let r=0;r+1<e.length;r+=2){const n=e[r]|e[r+1]<<8;if(n===0)break;t+=String.fromCharCode(n)}return t}function u2(e){const t=[];let r=0;for(;r<e.length;){const n=Km(e,r);n?(t.push(n.byte),r+=n.consumed):(t.push(e.charCodeAt(r)),r++)}return t}const p2=/--unix['\s]+([^\s']+)/,f2=/NBD URI:\s*(\S+)/,m2=/registered plugin\s+\S+\s+\(name\s+(\w+)\)/,x2=/registered filter\s+\S+\s+\(name\s+(\w+)\)/,h2=/config key=file, value=(.+)/,g2=/config key=server, value=(\S+)/,v2=/config key=vm, value=moref=(\S+)/,k2=/transport mode:\s*(\w+)/,y2=/cow:\s+underlying file size:\s+(\d+)/;function Ym(e,t,r){const n=e.socketPath||`nbdkit-${t.size}`;t.has(n)||t.set(n,{id:n,socketPath:e.socketPath||"",uri:e.uri||"",plugin:e.plugin||"",filters:e.filters||[],diskFile:e.diskFile||"",startLine:e.startLine||r,endLine:r,logLines:e.logLines||[],server:e.server,vmMoref:e.vmMoref,transportMode:e.transportMode,backingSize:e.backingSize})}function b2(e,t){const r=e.indexOf("[0]{");if(r===-1)return;const a=e.slice(r).split(/\}\s*\[\d+\]\{/);for(const i of a){const l=i.replace(/^\[\d+\]\{/,"").replace(/\}\s*>?\s*$/,""),o={name:jr(l,"app2_name"),displayName:jr(l,"app2_display_name"),version:jr(l,"app2_version"),publisher:jr(l,"app2_publisher"),installPath:jr(l,"app2_install_path"),description:jr(l,"app2_description"),arch:jr(l,"app2_arch")};(o.displayName||o.name)&&t.push(o)}}function jr(e,t){const r=`${t}: `,n=e.indexOf(r);if(n===-1)return"";const a=n+r.length,i=e.indexOf(", app2_",a);return i===-1?e.slice(a).replace(/,?\s*$/,"").trim():e.slice(a,i).trim()}function j2(e){if(!e.startsWith("cpe:"))return"";const t=e.split(":");if(t.length>=6){const r=t[5];if(r&&r!=="*")return r}return""}function w2(e){const t=[],r=e.get("drive_mappings")||"";if(r){if(r.includes("=>"))for(const o of r.split(";")){const c=o.trim().match(/^(\w+)\s*=>\s*(.+)$/);c&&t.push({letter:c[1],device:c[2].trim()})}else{const o=/\((\w+),\s*([^)]+)\)/g;let c;for(;(c=o.exec(r))!==null;)t.push({letter:c[1].trim(),device:c[2].trim()})}t.sort((o,c)=>o.letter.localeCompare(c.letter))}const n=[],a=e.get("fstab")||"";if(a){const o=/\(([^,]+),\s*([^)]+)\)/g;let c;for(;(c=o.exec(a))!==null;)n.push({device:c[1].trim(),mountpoint:c[2].trim()})}let i=parseInt(e.get("major_version")||"0",10),l=parseInt(e.get("minor_version")||"0",10);if(i===0){const o=e.get("product_name")||"",c=j2(o);if(c){const d=c.split(".");i=parseInt(d[0]||"0",10),l=parseInt(d[1]||"0",10)}if(i===0&&e.has("version")){const d=(e.get("version")||"").split(".");i=parseInt(d[0]||"0",10),l=parseInt(d[1]||"0",10)}}return{root:e.get("root")||"",type:e.get("type")||"",distro:e.get("distro")||"",osinfo:e.get("osinfo")||"",arch:e.get("arch")||"",majorVersion:i,minorVersion:l,productName:e.get("product_name")||"",productVariant:e.get("product_variant")||"",packageFormat:e.get("package_format")||"",packageManagement:e.get("package_management")||"",hostname:e.get("hostname")||"",buildId:e.get("build_id")||"",windowsSystemroot:e.get("windows_systemroot")||"",windowsSoftwareHive:e.get("windows_software_hive")||"",windowsSystemHive:e.get("windows_system_hive")||"",windowsCurrentControlSet:e.get("windows_current_control_set")||"",driveMappings:t,fstab:n,blkid:[]}}const N2=/^(\/dev\/\S+):\s+(.+)$/,S2=/(\w+)="([^"]*)"/g;function C2(e){const t=e.match(N2);if(!t)return null;const r=t[1],a=[...t[2].matchAll(S2)];if(a.length===0)return null;const i={device:r};for(const l of a){const o=l[1].toUpperCase(),c=l[2];switch(o){case"UUID":i.uuid=c;break;case"TYPE":i.type=c;break;case"PARTLABEL":i.partLabel=c;break;case"PARTUUID":i.partUuid=c;break;case"LABEL":i.label=c;break}}return i}function M2(e){var p,f,h,v,k,b,g;const t=e.join(`
`),r={disks:[],networks:[]},n=t.match(/<name>([^<]+)<\/name>/);n&&(r.name=n[1]);const a=t.match(/<memory\s+unit='KiB'>(\d+)<\/memory>/);a&&(r.memoryKB=parseInt(a[1],10));const i=t.match(/<vcpu[^>]*>(\d+)<\/vcpu>/);i&&(r.vcpus=parseInt(i[1],10));const l=t.match(/<os>[\s\S]*?<type[^>]*>([^<]+)<\/type>/);l&&(r.firmware=l[1]),t.includes("<loader")||t.includes("ovmf")||t.includes("OVMF")?r.firmware="uefi":r.firmware==="hvm"&&(r.firmware="bios");const o=/<disk\s+[^>]*>[\s\S]*?<\/disk>/g;let c;for(;(c=o.exec(t))!==null;){const m=c[0],x=((p=m.match(/<source\s+file='([^']+)'/))==null?void 0:p[1])||((f=m.match(/<source\s+dev='([^']+)'/))==null?void 0:f[1])||((h=m.match(/<source\s+name='([^']+)'/))==null?void 0:h[1]),j=(v=m.match(/<target\s+dev='([^']+)'/))==null?void 0:v[1],N=(k=m.match(/<driver[^>]+type='([^']+)'/))==null?void 0:k[1];x&&r.disks.push({path:x,format:N,device:j})}const d=/<interface\s+type='([^']+)'[^>]*>[\s\S]*?<\/interface>/g;let u;for(;(u=d.exec(t))!==null;){const m=u[0],x=u[1],j=(b=m.match(/<model\s+type='([^']+)'/))==null?void 0:b[1],N=(g=m.match(/<source\s+(?:network|bridge|portgroup)='([^']+)'/))==null?void 0:g[1];r.networks.push({type:x,model:j,source:N})}return r}const L2=/original size (\d+) bytes/;function cl(e){const t=e.match(L2);return t?parseInt(t[1],10):null}function Qm(e){let t="",r=0;for(;r<e.length;){const n=Km(e,r);if(n){t+=String.fromCharCode(n.byte),r+=n.consumed;continue}if(e[r]==="\\"&&r+1<e.length){const a=e[r+1];if(a==="n"){t+=`
`,r+=2;continue}if(a==="r"){t+="\r",r+=2;continue}if(a==="t"){t+="	",r+=2;continue}if(a==="\\"){t+="\\",r+=2;continue}if(a==='"'){t+='"',r+=2;continue}}t+=e[r],r++}return t}function _2(e){const t='read_file = "',r=e.indexOf(t);if(r<0)return null;const n=r+t.length;let a=e.indexOf('"<truncated',n);if(a<0&&(a=e.lastIndexOf('"'),a<=n))return null;const i=e.substring(n,a);return/^\\x[0-9a-f]{2}\\x[0-9a-f]{2}/i.test(i)&&!/^\\x[0-9a-f]{2}\\x0[0ad]/i.test(i)?null:Qm(i)}function E2(e,t){if(/\.(exe|msi|dll|sys|cat|pdb|cab|iso|img|bin|dat|drv)$/i.test(t))return null;const n=e.indexOf('" "');if(n<0)return null;const a=n+3;let i=e.indexOf('"<truncated',a);if(i<0&&(i=e.lastIndexOf('"'),i<=a))return null;const l=e.substring(a,i);return Qm(l)}function P2(e,t){return{sectionLines:e,globalLineOffset:t,stages:[],diskProgress:[],nbdkitConnections:[],errors:[],lineCategories:[],completedApiCalls:[],openApiCalls:new Map,activeGuestfsd:null,hostCommands:[],lgBackend:"",lgIdentifier:"",lgMemsize:0,lgSmp:0,lgDrives:[],lgApiCalls:[],lgLaunchLines:[],currentNbdkit:null,nbdkitMap:new Map,pendingLibguestfsCmd:[],pendingLibguestfsCmdLine:0,stdoutCapture:null,guestInfo:null,guestInfoRaw:new Map,blkidEntries:[],versions:{},diskSummary:{disks:[]},sourceVM:null,xmlCapture:null,virtioWinIsoPath:null,fileCopies:[],pendingVirtioWinRead:null,pendingV2VReads:new Map,lastV2VReadFilePath:null,installedApps:[],registryHiveAccesses:[],currentHivexSession:null}}const dl=/(\d+)\s+"([^"]+)"/,ul=/^"(.*)"$/;function na(e,t,r){ai(t,e.registryHiveAccesses),t.keySegments=[],t.values=[],t.pendingGetValueName=null,t.pendingChildName=null,t.pendingChildParent=null,t.failedChild=null,t.hasWriteOp=(r==null?void 0:r.hasWriteOp)??!1,t.firstWriteLine=(r==null?void 0:r.firstWriteLine)??0,(r==null?void 0:r.lineNumber)!==void 0&&(t.lineNumber=r.lineNumber)}function pl(e,t){if(e.activeGuestfsd)e.activeGuestfsd.commands.push(t);else{const r=[...e.openApiCalls.values()],n=r[r.length-1];n&&n.length>0&&n[n.length-1].guestCommands.push(t)}}function Xm(e,t){if(e.activeGuestfsd){for(let r=e.activeGuestfsd.commands.length-1;r>=0;r--)if(e.activeGuestfsd.commands[r].command===t)return e.activeGuestfsd.commands[r]}for(const r of e.openApiCalls.values())for(let n=r.length-1;n>=0;n--){const a=r[n].guestCommands;for(let i=a.length-1;i>=0;i--)if(a[i].command===t)return a[i]}for(let r=e.completedApiCalls.length-1;r>=0;r--){const n=e.completedApiCalls[r].guestCommands;for(let a=n.length-1;a>=0;a--)if(n[a].command===t)return n[a]}}function I2(e,t){if(!e.stdoutCapture)return!1;if(i2(t))return e.stdoutCapture=null,!1;const r=Xm(e,e.stdoutCapture.cmdName);return r&&r.stdoutLines.push(t),!0}function T2(e,t,r){if(!ni.test(t)){const n=t.match($c);n&&e.stages.push({name:n[2].trim(),elapsedSeconds:parseFloat(n[1]),lineNumber:r})}}function F2(e,t,r){const n=t.match(Vb);if(n){const i=e.diskProgress.length>0?e.diskProgress[e.diskProgress.length-1]:null;i&&e.diskProgress.push({diskNumber:i.diskNumber,totalDisks:i.totalDisks,percentComplete:parseInt(n[1],10),lineNumber:r})}const a=t.match(zb);a&&e.diskProgress.push({diskNumber:parseInt(a[1],10),totalDisks:parseInt(a[2],10),percentComplete:0,lineNumber:r})}function A2(e,t){if(c2(t,e.versions),!e.diskSummary.hostFreeSpace){const r=t.match(Ub);r&&(e.diskSummary.hostTmpDir=r[1],e.diskSummary.hostFreeSpace=parseInt(r[2],10))}}function D2(e,t){e.xmlCapture!==null?(e.xmlCapture.push(t),t.trimStart().startsWith("</domain>")&&(e.sourceVM=M2(e.xmlCapture),e.xmlCapture=null)):!e.sourceVM&&/<domain type=/.test(t)&&(e.xmlCapture=[t])}function $2(e,t,r){const n=t.startsWith("running nbdkit:")||t.startsWith("running nbdkit ");if(n&&(e.currentNbdkit={startLine:r,logLines:[],filters:[]}),n||t.startsWith("nbdkit:")||e.currentNbdkit&&t.startsWith(" ")){e.currentNbdkit&&(e.currentNbdkit.logLines=e.currentNbdkit.logLines||[],e.currentNbdkit.logLines.push(t),e.currentNbdkit.endLine=r);const a=t.match(p2);a&&e.currentNbdkit&&(e.currentNbdkit.socketPath=a[1]);const i=t.match(f2);if(i&&e.currentNbdkit){e.currentNbdkit.uri=i[1];const h=e.currentNbdkit.socketPath||`nbdkit-${e.nbdkitMap.size}`;e.nbdkitMap.has(h)||e.nbdkitMap.set(h,{id:h,socketPath:e.currentNbdkit.socketPath||"",uri:e.currentNbdkit.uri||"",plugin:e.currentNbdkit.plugin||"",filters:e.currentNbdkit.filters||[],diskFile:e.currentNbdkit.diskFile||"",startLine:e.currentNbdkit.startLine||r,endLine:r,logLines:e.currentNbdkit.logLines||[],server:e.currentNbdkit.server,vmMoref:e.currentNbdkit.vmMoref,transportMode:e.currentNbdkit.transportMode,backingSize:e.currentNbdkit.backingSize})}const l=t.match(m2);l&&e.currentNbdkit&&(e.currentNbdkit.plugin=l[1]);const o=t.match(x2);o&&e.currentNbdkit&&(e.currentNbdkit.filters=e.currentNbdkit.filters||[],e.currentNbdkit.filters.includes(o[1])||e.currentNbdkit.filters.push(o[1]));const c=t.match(h2);c&&e.currentNbdkit&&(e.currentNbdkit.diskFile=c[1]);const d=t.match(g2);d&&e.currentNbdkit&&(e.currentNbdkit.server=d[1]);const u=t.match(v2);u&&e.currentNbdkit&&(e.currentNbdkit.vmMoref=u[1]);const p=t.match(k2);p&&e.currentNbdkit&&(e.currentNbdkit.transportMode=p[1]);const f=t.match(y2);f&&e.currentNbdkit&&(e.currentNbdkit.backingSize=parseInt(f[1],10))}else e.currentNbdkit&&!t.startsWith("nbdkit:")&&(Ym(e.currentNbdkit,e.nbdkitMap,r),e.currentNbdkit=null);if(t.startsWith("nbdkit:")&&!e.currentNbdkit){const a=[...e.nbdkitMap.values()].pop();a&&(a.logLines.push(t),a.endLine=r)}}function R2(e,t,r){if(!t.startsWith("libguestfs:"))return;const n=t.match(Ib);n&&(e.lgBackend=n[1],e.lgLaunchLines.push(t));const a=t.match(Tb);a&&(e.lgIdentifier=a[1]),t.includes("libguestfs: launch:")&&e.lgLaunchLines.push(t);const i=t.match(Lb);if(i){const o=i[1],c=i[2],d=i[3],u=d.match(Eb);u&&(e.lgMemsize=parseInt(u[1],10));const p=d.match(Pb);p&&(e.lgSmp=parseInt(p[1],10));const f=t.match(_b);if(f&&e.lgDrives.push({path:f[1],format:f[2],protocol:f[3],server:f[4]}),c==="inspect_list_applications2"&&d.startsWith("=")&&b2(d,e.installedApps),O2(e,c,d,r),!c.endsWith("=")&&c!=="=")e.lgApiCalls.push({name:c,args:d,result:"",lineNumber:r});else if(c==="="||d.startsWith("=")){const v=e.lgApiCalls[e.lgApiCalls.length-1];v&&(v.result=d.replace(/^=\s*/,"").trim()||c)}if(!(c==="="||d.startsWith("="))&&!c.endsWith("=")){const v={name:c,args:d,result:"",handle:o,guestCommands:[],lineNumber:r},k=`${o}:${c}`,b=e.openApiCalls.get(k)||[];b.push(v),e.openApiCalls.set(k,b)}else{let v="",k="";if(c==="="){const b=e.lgApiCalls[e.lgApiCalls.length-1];b&&(v=b.name),k=d.replace(/^=?\s*/,"").trim()}else d.startsWith("=")&&(v=c.replace(/=$/,""),k=d.replace(/^=\s*/,"").trim());if(v){const b=`${o}:${v}`,g=e.openApiCalls.get(b);if(g&&g.length>0){const m=g.shift();m.result=k,e.completedApiCalls.push(m),g.length===0&&e.openApiCalls.delete(b)}}}}const l=t.match(Bb);if(l){const o=l[1].trim();o&&!o.startsWith("\\")?(e.pendingLibguestfsCmd.length>0&&e.hostCommands.push(Rc(e.pendingLibguestfsCmd,e.pendingLibguestfsCmdLine)),e.pendingLibguestfsCmd=[o],e.pendingLibguestfsCmdLine=r):o.startsWith("\\")&&e.pendingLibguestfsCmd.push(o.slice(1).trim())}}function O2(e,t,r,n){if(t==="hivex_open"&&!r.startsWith("=")){ai(e.currentHivexSession,e.registryHiveAccesses);const a=r.match(/^"([^"]+)"/);if(a){const i=r.includes("write:true")?"write":"read";e.currentHivexSession={hivePath:a[1],mode:i,openMode:i,keySegments:[],values:[],pendingGetValueName:null,pendingChildName:null,pendingChildParent:null,failedChild:null,lineNumber:n,rootHandle:"",hasWriteOp:!1,firstWriteLine:0}}}if(t==="hivex_root"&&e.currentHivexSession&&(r.startsWith("= ")?e.currentHivexSession.rootHandle=r.slice(2).trim():(e.currentHivexSession.keySegments.length>0||e.currentHivexSession.values.length>0)&&na(e,e.currentHivexSession)),t==="hivex_node_get_child"&&e.currentHivexSession)if(r.startsWith("= ")){const a=r.slice(2).trim();a!=="0"&&e.currentHivexSession.pendingChildName?e.currentHivexSession.keySegments.push(e.currentHivexSession.pendingChildName):a==="0"&&e.currentHivexSession.pendingChildName&&(e.currentHivexSession.failedChild=e.currentHivexSession.pendingChildName),e.currentHivexSession.pendingChildName=null,e.currentHivexSession.pendingChildParent=null}else{const a=r.match(dl);if(a){const i=a[1],l=a[2];e.currentHivexSession.rootHandle&&i===e.currentHivexSession.rootHandle&&e.currentHivexSession.keySegments.length>0&&na(e,e.currentHivexSession,{lineNumber:n}),e.currentHivexSession.pendingChildName=l,e.currentHivexSession.pendingChildParent=i}}if(t==="hivex_node_add_child"&&!r.startsWith("=")&&e.currentHivexSession){e.currentHivexSession.hasWriteOp=!0,e.currentHivexSession.firstWriteLine||(e.currentHivexSession.firstWriteLine=n);const a=r.match(dl);if(a){const i=a[1],l=a[2];e.currentHivexSession.rootHandle&&i===e.currentHivexSession.rootHandle&&e.currentHivexSession.keySegments.length>0&&na(e,e.currentHivexSession,{hasWriteOp:!0,firstWriteLine:n,lineNumber:n}),e.currentHivexSession.failedChild===l&&(e.currentHivexSession.failedChild=null),e.currentHivexSession.keySegments.push(l)}}if(t==="hivex_node_get_value"&&e.currentHivexSession)if(r.startsWith("= "))r.slice(2).trim()==="0"&&(e.currentHivexSession.pendingGetValueName=null);else{const a=r.match(dl);a&&(e.currentHivexSession.pendingGetValueName=a[2])}if(t==="hivex_value_string"&&e.currentHivexSession&&r.startsWith("= ")){const i=r.slice(2).trim().match(ul);i&&e.currentHivexSession.pendingGetValueName&&(e.currentHivexSession.values.push({name:e.currentHivexSession.pendingGetValueName,value:i[1],lineNumber:n}),e.currentHivexSession.pendingGetValueName=null)}if(t==="hivex_value_value"&&e.currentHivexSession&&r.startsWith("= ")){const i=r.slice(2).trim().match(ul);i&&e.currentHivexSession.pendingGetValueName&&(e.currentHivexSession.values.push({name:e.currentHivexSession.pendingGetValueName,value:Du(i[1],1),lineNumber:n}),e.currentHivexSession.pendingGetValueName=null)}if(t==="hivex_value_key"&&e.currentHivexSession&&r.startsWith("= ")){const i=r.slice(2).trim().match(ul);i&&(e.currentHivexSession.pendingGetValueName=i[1])}if(t==="hivex_commit"&&!r.startsWith("=")&&e.currentHivexSession&&(e.currentHivexSession.hasWriteOp=!0,e.currentHivexSession.firstWriteLine||(e.currentHivexSession.firstWriteLine=n),(e.currentHivexSession.values.length>0||e.currentHivexSession.keySegments.length>0)&&na(e,e.currentHivexSession)),t==="hivex_node_set_value"&&!r.startsWith("=")&&e.currentHivexSession){e.currentHivexSession.hasWriteOp=!0,e.currentHivexSession.firstWriteLine||(e.currentHivexSession.firstWriteLine=n);const a=r.match(/^\d+\s+"([^"]+)"\s+(\d+)\s+"(.+)"$/);if(a){const i=a[1],l=parseInt(a[2],10),o=a[3];e.currentHivexSession.values.push({name:i,value:Du(o,l),lineNumber:n})}}t==="hivex_close"&&!r.startsWith("=")&&e.currentHivexSession&&(ai(e.currentHivexSession,e.registryHiveAccesses),e.currentHivexSession=null)}function B2(e,t){e.pendingLibguestfsCmd.length>0&&!t.startsWith("libguestfs:")&&!t.trim().startsWith("\\")&&(e.hostCommands.push(Rc(e.pendingLibguestfsCmd,e.pendingLibguestfsCmdLine)),e.pendingLibguestfsCmd=[])}function V2(e,t){if(!t.startsWith("guestfsd:"))return;const r=t.match(Wb);r&&(e.activeGuestfsd&&vo(e.activeGuestfsd,e.openApiCalls,e.completedApiCalls),e.activeGuestfsd={name:r[1],commands:[]});const n=t.match(Hb);if(n){const a=parseFloat(n[2]);if(e.activeGuestfsd){const i=n[1],l=Ca(e.openApiCalls,i)||Ca(e.openApiCalls,e.activeGuestfsd.name);l&&l.length>0&&(l[0].durationSecs=a),vo(e.activeGuestfsd,e.openApiCalls,e.completedApiCalls),e.activeGuestfsd=null}else{const i=Ca(e.openApiCalls,n[1]);i&&i.length>0&&(i[0].durationSecs=a)}}}function z2(e,t,r){if(t.startsWith("libguestfs:")||t.startsWith("guestfsd:"))return!1;const n=t.match(Db);if(n)return e.stdoutCapture={cmdName:n[1]},!0;const a=t.match(Ab);if(a){const i=parseInt(a[2],10),l=Xm(e,a[1]);return l&&l.returnCode===void 0&&(l.returnCode=i),!0}if(t.startsWith("command:")){const i=t.match(Fb);if(i){const l=Fu(i[2]);pl(e,{command:i[1],args:l,source:"command",stdoutLines:[],lineNumber:r})}}if(t.startsWith("commandrvf:")&&!$b.test(t)){const i=t.match(Rb);if(i&&!l2(i[1])){const l=Fu(i[2]);pl(e,{command:i[1],args:l,source:"commandrvf",stdoutLines:[],lineNumber:r})}}if(t.startsWith("chroot:")){const i=t.match(Ob);i&&pl(e,{command:i[2],args:[],source:"chroot",stdoutLines:[],lineNumber:r})}return!1}function W2(e,t){const r=t.match(/^i_(\w+)\s*=\s*(.+)$/);r&&e.guestInfoRaw.set(r[1],r[2].trim());const n=t.match(/^(\/dev\/\S+)\s+\(\w+\):\s*$/);n&&!e.guestInfoRaw.has("root")&&e.guestInfoRaw.set("root",n[1]);const a=t.match(/^fs:\s+(\/dev\/\S+)\s+\(\w+\)\s+role:\s+(\w+)/);a&&a[2]==="root"&&!e.guestInfoRaw.has("root")&&e.guestInfoRaw.set("root",a[1]);const i=t.match(/^\s{4}(\w[\w\s]*\w)\s*:\s*(.+)$/);if(i){const l=i[1].trim(),o=i[2].trim(),d={type:"type",distro:"distro",arch:"arch",hostname:"hostname",version:"version",product_name:"product_name",product_variant:"product_variant",package_format:"package_format",package_management:"package_management","build ID":"build_id",fstab:"fstab",drive_mappings:"drive_mappings",windows_systemroot:"windows_systemroot",windows_software_hive:"windows_software_hive",windows_system_hive:"windows_system_hive",windows_current_control_set:"windows_current_control_set"}[l];d&&!e.guestInfoRaw.has(d)&&e.guestInfoRaw.set(d,o)}}function H2(e,t){const r=C2(t);r&&!e.blkidEntries.some(n=>n.device===r.device)&&e.blkidEntries.push(r)}function U2(e,t,r){const n=t.match(/copy_from_virtio_win:\s+guest tools source ISO\s+(\S+)/);n&&(e.virtioWinIsoPath=n[1]);const a=t.match(/libguestfs: trace: virtio_win: read_file "(\/\/\/[^"]+)"/);if(a&&(e.pendingVirtioWinRead={source:a[1],sizeBytes:null,lineNumber:r}),e.pendingVirtioWinRead){const c=cl(t);c!==null&&(e.pendingVirtioWinRead.sizeBytes=c)}const i=t.match(/libguestfs: trace: v2v: read_file "([^"]+)"/);if(i&&!t.includes("read_file =")){const c=i[1];e.lastV2VReadFilePath=c,e.pendingV2VReads.set(c,{content:null,sizeBytes:null,lineNumber:r})}if(e.lastV2VReadFilePath&&t.match(/libguestfs: trace: v2v: read_file = /)){const d=e.pendingV2VReads.get(e.lastV2VReadFilePath);if(d){const u=cl(t);u!==null&&(d.sizeBytes=u);const p=_2(t);p!==null&&(d.content=p)}e.lastV2VReadFilePath=null}const l=t.match(/libguestfs: trace: v2v: write "([^"]+)"/);if(l){const c=l[1],d=cl(t),u=t.includes("<truncated,"),p=E2(t,c);if(e.pendingVirtioWinRead)e.fileCopies.push({source:e.pendingVirtioWinRead.source,destination:c,sizeBytes:e.pendingVirtioWinRead.sizeBytes??d,origin:"virtio_win",content:null,contentTruncated:!1,lineNumber:e.pendingVirtioWinRead.lineNumber}),e.pendingVirtioWinRead=null;else if(e.pendingV2VReads.has(c)){const f=e.pendingV2VReads.get(c);e.fileCopies.push({source:c,destination:c,sizeBytes:f.sizeBytes??d,origin:"guest",content:p??f.content,contentTruncated:u,lineNumber:f.lineNumber}),e.pendingV2VReads.delete(c)}else e.fileCopies.push({source:"(generated)",destination:c,sizeBytes:d,origin:"script",content:p,contentTruncated:u,lineNumber:r})}const o=t.match(/libguestfs: trace: v2v: upload "([^"]+)" "([^"]+)"/);if(o){const c=o[1],d=o[2];c.startsWith("/tmp/")||e.fileCopies.push({source:c,destination:d,sizeBytes:null,origin:"virt-tools",content:null,contentTruncated:!1,lineNumber:r})}}function G2(e,t,r){if(Hm.test(t)&&!Gm(t)){const n=Au(t);e.errors.push({level:"error",source:n,message:t,lineNumber:r,rawLine:t})}else if(Um.test(t)){const n=Au(t);e.errors.push({level:"warning",source:n,message:t,lineNumber:r,rawLine:t})}}function K2(e){e.pendingLibguestfsCmd.length>0&&e.hostCommands.push(Rc(e.pendingLibguestfsCmd,e.pendingLibguestfsCmdLine)),e.activeGuestfsd&&vo(e.activeGuestfsd,e.openApiCalls,e.completedApiCalls),e.currentNbdkit&&Ym(e.currentNbdkit,e.nbdkitMap,e.globalLineOffset+e.sectionLines.length-1);for(const t of e.openApiCalls.values())e.completedApiCalls.push(...t);e.completedApiCalls.sort((t,r)=>t.lineNumber-r.lineNumber),e.guestInfoRaw.size>0&&(e.guestInfoRaw.has("root")||e.guestInfoRaw.has("type")||e.guestInfoRaw.has("distro"))&&(e.guestInfo=w2(e.guestInfoRaw),e.guestInfo.blkid=e.blkidEntries),ai(e.currentHivexSession,e.registryHiveAccesses),e.currentHivexSession=null,e.nbdkitConnections.push(...e.nbdkitMap.values()),e.nbdkitConnections.forEach((t,r)=>{e.diskSummary.disks.push({index:r+1,sizeBytes:t.backingSize,sourceFile:t.diskFile||void 0,transportMode:t.transportMode,server:t.server,vmMoref:t.vmMoref})})}const qm=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z\s+/,Y2=/^Building command:\s*(\S+)\s+\[(.*)]/,ko=/Building command:(\S+?)\[([^\]]*)\]/g;function Zm(e){const t=e.slice(0,3e3).replace(qm,"").replace(/\n\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z\s+/g,`
`);return!!(/Building command[:\s]*virt-v2v/i.test(t)||/^info:\s*virt-v2v/m.test(t)||/^virt-v2v:/m.test(t)||/virt-v2v-in-place/i.test(t)||/virt-v2v-inspector/i.test(t)||/^libguestfs:\s+trace:/m.test(t))}function Jm(e){try{return Q2(e)}catch(t){return console.error("parseV2VLog failed:",t),{toolRuns:[],totalLines:0}}}function Q2(e){const t=e.split(`
`),r=X2(t),n=r.length,a=Z2(r),i=[];for(let l=0;l<a.length;l++){const o=a[l].lineIndex,c=l+1<a.length?a[l+1].lineIndex:n,d=r.slice(o,c),u=Ru(d,a[l].tool,a[l].commandLine,o);i.push(u)}if(i.length===0){const l=J2(r),o=Ru(r,l,"",0);i.push(o)}return{toolRuns:i,totalLines:n}}function X2(e){const t=[];for(let r of e){r=r.replace(qm,"");const n=q2(r);if(n.length>1){t.push(...n);continue}if(!r.startsWith("libguestfs:")&&r.includes("libguestfs: trace:")){const a=r.indexOf("libguestfs: trace:"),i=r.slice(0,a).trim(),l=r.slice(a);i&&t.push(i),t.push(l);continue}if(r.startsWith("libguestfs: trace:")){const a=r.indexOf("libguestfs: trace:",1);if(a>0){t.push(r.slice(0,a).trim()),t.push(r.slice(a));continue}}t.push(r)}return t}function q2(e){if([...e.matchAll(ko)].length<=1){const i=e.match(/Building command:/g);if(!i||i.length<=1)return[e]}const r=[],n=[];let a=0;for(;;){const i=e.indexOf("Building command:",a);if(i===-1)break;n.push(i),a=i+17}for(let i=0;i<n.length;i++){const l=n[i],o=i+1<n.length?n[i+1]:e.length,c=e.slice(l,o).trim();c&&r.push(c)}if(n.length>0&&n[0]>0){const i=e.slice(0,n[0]).trim();i&&r.unshift(i)}return r.length>0?r:[e]}function Z2(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],a=n.match(Y2);if(a){const l=$u(a[1]);if(l){t.push({lineIndex:r,tool:l,commandLine:a[2]});continue}}ko.lastIndex=0;const i=ko.exec(n);if(i){const l=$u(i[1]);if(l){t.push({lineIndex:r,tool:l,commandLine:i[2]});continue}}}return t}function $u(e){const t=e.toLowerCase();return t==="virt-v2v-in-place"?"virt-v2v-in-place":t==="virt-v2v-inspector"?"virt-v2v-inspector":t==="virt-v2v-customize"||t==="virt-customize"?"virt-v2v-customize":t==="virt-v2v"?"virt-v2v":t.includes("monitor")?null:t.includes("virt-v2v")?"virt-v2v":null}function J2(e){const t=e.slice(0,20).join(`
`);return/virt-v2v-in-place/i.test(t)?"virt-v2v-in-place":/virt-v2v-inspector/i.test(t)?"virt-v2v-inspector":/virt-v2v-customize|virt-customize/i.test(t)?"virt-v2v-customize":"virt-v2v"}function Ru(e,t,r,n){const a=P2(e,n);for(let o=0;o<e.length;o++){const c=e[o],d=n+o;if(!c.trim()){a.lineCategories.push("other");continue}const u=a2(c);a.lineCategories.push(u),!I2(a,c)&&(T2(a,c,d),F2(a,c,d),A2(a,c),D2(a,c),$2(a,c,d),R2(a,c,d),B2(a,c),V2(a,c),!z2(a,c,d)&&(W2(a,c),H2(a,c),U2(a,c,d),G2(a,c,d)))}K2(a);const i={backend:a.lgBackend,identifier:a.lgIdentifier,memsize:a.lgMemsize,smp:a.lgSmp,drives:a.lgDrives,apiCalls:a.lgApiCalls,launchLines:a.lgLaunchLines},l=o2(a.stages,a.errors,e);return{tool:t,commandLine:r,exitStatus:l,startLine:n,endLine:n+e.length-1,stages:a.stages,diskProgress:a.diskProgress,nbdkitConnections:a.nbdkitConnections,libguestfs:i,apiCalls:a.completedApiCalls,hostCommands:a.hostCommands,guestInfo:a.guestInfo,installedApps:a.installedApps,registryHiveAccesses:a.registryHiveAccesses,virtioWin:{isoPath:a.virtioWinIsoPath,fileCopies:a.fileCopies},versions:a.versions,diskSummary:a.diskSummary,sourceVM:a.sourceVM,errors:a.errors,rawLines:e,lineCategories:a.lineCategories}}function Ls(e,t){return!e&&!t?nj():e?t?ej(e,t):e:t}function Ou(e,t){const r=new Set(e.map(a=>`${a.namespace}/${a.name}`)),n=[...e];for(const a of t){const i=`${a.namespace}/${a.name}`;r.has(i)||(r.add(i),n.push(a))}return n}function ej(e,t){const r=new Map;for(const u of t.plans)r.set(fl(u),u);const n=[],a=new Set;for(const u of e.plans){const p=fl(u),f=r.get(p);f?(a.add(p),n.push(tj(u,f))):n.push(u)}for(const u of t.plans)a.has(fl(u))||n.push(u);const i=[...e.events,...t.events];i.sort((u,p)=>u.timestamp.localeCompare(p.timestamp));const l={totalLines:e.stats.totalLines+t.stats.totalLines,parsedLines:e.stats.parsedLines+t.stats.parsedLines,errorLines:e.stats.errorLines+t.stats.errorLines,duplicateLines:e.stats.duplicateLines+t.stats.duplicateLines,plansFound:n.length,vmsFound:n.reduce((u,p)=>u+Object.keys(p.vms).length,0)},o=sj(n),c=Ou(e.networkMaps||[],t.networkMaps||[]),d=Ou(e.storageMaps||[],t.storageMaps||[]);return{plans:n,events:i,stats:l,summary:o,networkMaps:c,storageMaps:d}}function Bu(e){return Object.values(e.vms).some(t=>!t.fromYaml)}function tj(e,t){const r=Bu(t),n=Bu(e),[a,i]=r&&!n?[t,e]:[e,t],l={...a};if(i.spec&&!l.spec&&(l.spec=i.spec),i.archived&&(l.archived=!0),(l.status==="Pending"||l.status==="Ready")&&i.status!=="Pending"&&i.status!=="Ready"&&(l.status=i.status),i.conditions.length>0){const o=new Set(l.conditions.map(c=>c.type));for(const c of i.conditions)o.has(c.type)||l.conditions.push(c)}i.errors.length>0&&l.errors.length===0&&(l.errors=[...i.errors]),i.panics.length>0&&l.panics.length===0&&(l.panics=[...i.panics]);for(const[o,c]of Object.entries(i.vms)){const d=l.vms[o];d?rj(d,c):l.vms[o]=c}return l}function rj(e,t){t.operatingSystem&&!e.operatingSystem&&(e.operatingSystem=t.operatingSystem),t.restorePowerState&&!e.restorePowerState&&(e.restorePowerState=t.restorePowerState),t.newName&&!e.newName&&(e.newName=t.newName),t.error&&!e.error&&(e.error=t.error),t.conditions&&(!e.conditions||e.conditions.length===0)&&(e.conditions=t.conditions),t.warmInfo&&!e.warmInfo&&(e.warmInfo=t.warmInfo,e.precopyCount=t.precopyCount)}function fl(e){return`${e.namespace}/${e.name}`}function sj(e){const t={totalPlans:e.length,running:0,succeeded:0,failed:0,archived:0,pending:0};for(const r of e)switch(r.archived&&t.archived++,r.status){case"Running":t.running++;break;case"Succeeded":t.succeeded++;break;case"Failed":t.failed++;break;case"Pending":case"Ready":t.pending++;break}return t}function nj(){return{plans:[],events:[],stats:{totalLines:0,parsedLines:0,errorLines:0,duplicateLines:0,plansFound:0,vmsFound:0},summary:{totalPlans:0,running:0,succeeded:0,failed:0,archived:0,pending:0},networkMaps:[],storageMaps:[]}}const ex=/namespaces\/([^/]+)\/(?:pods|logs)\/(.+)-vm-(\d+)-[a-z0-9][-a-z0-9]*\//,aj=[".yaml",".yml",".json",".xml",".html",".css",".js",".png",".jpg",".gif",".pdf"];function ij(e){const t=e.toLowerCase();return aj.some(r=>t.endsWith(r))?!1:ex.test(e)?!0:t.includes("/virt-v2v/")||t.includes("/virt-v2v-inspector/")}const lj=['"logger":"plan|','"logger": "plan|','"controller":"plan"','"controller": "plan"'],_s=8*1024;function oj(e){var r;const t=e.content.length>_s?e.content.slice(0,_s):e.content;for(const n of lj)if(t.includes(n))return!0;if(e.path.toLowerCase().includes("forklift-controller")){const n=(r=t.trimStart().split(`
`,1)[0])==null?void 0:r.trim();if(n!=null&&n.startsWith("{"))return!0}return!1}const cj=/kind:\s*Plan\b/,dj=/kind:\s*NetworkMap\b/,uj=/kind:\s*StorageMap\b/,pj=/forklift\.konveyor\.io/;function fj(e){const t=e.content.length>_s?e.content.slice(0,_s):e.content;return pj.test(t)?cj.test(t)||dj.test(t)||uj.test(t):!1}async function ml(e,t){try{return await mj(e,t)}catch(r){return console.error("processArchive failed:",r),{logFiles:[],yamlFiles:[],v2vFiles:[],v2vFileEntries:[],parsedData:Ls(null,null)}}}async function mj(e,t){t==null||t("Extracting archive...",e.name);const r=await Om(e);t==null||t("Classifying files...",`${r.length} files extracted`);const n=[],a=[],i=[];for(const u of r)oj(u)?n.push(u):fj(u)?a.push(u):(ij(u.path)||Zm(u.content.length>_s?u.content.slice(0,_s):u.content))&&i.push(u);let l=null,o=null;const c=[];if(n.length>0&&(t==null||t("Parsing controller logs...",`${n.length} file${n.length!==1?"s":""}`),l=xj(n)),a.length>0){t==null||t("Parsing Forklift YAMLs...",`${a.length} file${a.length!==1?"s":""}`);const u=a.map(p=>p.content).join(`
---
`);o=Sm(u)}if(i.length>0){t==null||t("Parsing V2V logs...",`${i.length} file${i.length!==1?"s":""}`);for(const u of i){const p=Jm(u.content);p.fileName=u.path;const f=ex.exec(u.path);c.push({filePath:u.path,data:p,planName:f==null?void 0:f[2],vmId:f?`vm-${f[3]}`:void 0})}}t==null||t("Merging results...");const d=Ls(l,o);return{logFiles:n.map(u=>u.path),yamlFiles:a.map(u=>u.path),v2vFiles:i.map(u=>u.path),v2vFileEntries:c,parsedData:d}}function xj(e){if(e.length===1)return uo(e[0].content);let t=null;for(const r of e){const n=uo(r.content);t=t?Ls(t,n):n}return t??Ls(null,null)}const Oc=[".log",".logs",".txt",".json",".yaml",".yml"],hj=[".tar",".tgz",".zip"];function tx(e){const t=e.toLowerCase();if(t.endsWith(".tar.gz"))return!0;for(const r of hj)if(t.endsWith(r))return!0;return!1}function yo(e){const t=e.toLowerCase();if(!t.endsWith(".gz")||t.endsWith(".tar.gz"))return!1;const r=t.slice(0,-3),n=r.slice(r.lastIndexOf("."));return Oc.includes(n)}function Vu(e){if(tx(e)||yo(e))return!0;const t=e.slice(e.lastIndexOf(".")).toLowerCase();return Oc.includes(t)}function gj(e,t){const r=e.slice(e.lastIndexOf(".")).toLowerCase();return r===".yaml"||r===".yml"||G1(t)}function vj(e,t){return typeof Worker>"u"?ml(e,t):new Promise((r,n)=>{let a;try{a=new Worker(new URL("/forklift-log-inspector/assets/archiveWorker-rFP_5GeN.js",import.meta.url),{type:"module"})}catch{return ml(e,t).then(r,n)}a.onmessage=i=>{const l=i.data;switch(l.type){case"progress":t(l.stage,l.detail);break;case"result":a.terminate(),r(l.data);break;case"error":a.terminate(),n(new Error(l.message));break}},a.onerror=i=>{a.terminate(),ml(e,t).then(r,n),i.preventDefault()},a.postMessage({type:"processArchive",file:e})})}function kj(){const[e,t]=S.useState(!1),[r,n]=S.useState(!1),[a,i]=S.useState(""),[l,o]=S.useState(""),c=S.useRef(null),{setParseResult:d,clearData:u}=he(),{showToast:p}=Hv(),f=S.useCallback(async m=>{const x=m.filter(N=>!Vu(N.name));x.length>0&&p(`Skipped ${x.length} invalid file${x.length!==1?"s":""}. Allowed: ${[...Oc,".log.gz",".tar",".tar.gz",".tgz",".zip"].join(", ")}`,"error");const j=m.filter(N=>Vu(N.name));if(j.length!==0){n(!0),i(""),o("");try{u(),$e.getState().clearV2VData();const N=[],y=[],C=[],M=[],P=[];let w=0,_=0;for(const G of j)if(tx(G.name)){const Q=await vj(G,(K,re)=>{i(K),o(re??"")});w+=Q.logFiles.length,_+=Q.yamlFiles.length,(Q.logFiles.length>0||Q.yamlFiles.length>0)&&P.push(Q.parsedData),Q.v2vFileEntries.length>0&&M.push(...Q.v2vFileEntries)}else{i("Reading file..."),o(G.name);const Q=yo(G.name)?await Cb(G):await G.text(),K=yo(G.name)?G.name.slice(0,-3):G.name;if(Zm(Q)){C.push({name:G.name,content:Q});continue}gj(K,Q)?y.push(Q):N.push(Q)}if(C.length>0){i("Parsing V2V logs...");for(const G of C){const Q=Jm(G.content);Q.fileName=G.name,M.push({filePath:G.name,data:Q})}}if(M.length>0){$e.getState().setV2VFileEntries(M);const G=M.reduce((Q,K)=>Q+K.data.toolRuns.length,0);if(p(`Found ${M.length} v2v log file${M.length!==1?"s":""} with ${G} tool run${G!==1?"s":""}`,"success"),N.length===0&&y.length===0&&P.length===0)return}let L=null;N.length>0&&(i("Parsing log files..."),L=uo(N.join(`
`)));let I=null;y.length>0&&(i("Parsing YAML files..."),I=Sm(y.join(`
---
`))),i("Merging results...");let E=Ls(L,I);for(const G of P)E=Ls(E,G);if(E.plans.length===0&&E.events.length===0&&E.networkMaps.length===0&&E.storageMaps.length===0){p("No forklift data found in the uploaded files","error");return}d(E);const A=N.length,R=y.length,V=A+w,T=R+_,$=E.networkMaps.length,D=E.storageMaps.length,B=[];V>0&&B.push(`${V} log file${V!==1?"s":""}`),T>0&&B.push(`${T} YAML${T!==1?"s":""}`),$>0&&B.push(`${$} NetworkMap${$!==1?"s":""}`),D>0&&B.push(`${D} StorageMap${D!==1?"s":""}`);const Y=B.length>0?B.join(" + "):`${j.length} file${j.length!==1?"s":""}`;p(`Processed ${Y}: ${E.stats.plansFound} plan${E.stats.plansFound!==1?"s":""}, ${E.stats.vmsFound} VM${E.stats.vmsFound!==1?"s":""}`,"success")}catch(N){console.error("Error parsing files:",N),p("Failed to parse files","error")}finally{n(!1),i(""),o("")}}},[u,d,p]),h=S.useCallback(m=>{m.preventDefault(),m.stopPropagation(),t(!0)},[]),v=S.useCallback(m=>{m.preventDefault(),m.stopPropagation(),t(!1)},[]),k=S.useCallback(m=>{m.preventDefault(),m.stopPropagation(),t(!1);const x=m.dataTransfer.files;x.length>0&&f(Array.from(x))},[f]),b=S.useCallback(m=>{const x=m.target.files;x&&x.length>0&&f(Array.from(x)),m.target.value=""},[f]),g=S.useCallback(()=>{var m;(m=c.current)==null||m.click()},[]);return s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:s.jsxs("div",{onClick:g,onDragOver:h,onDragLeave:v,onDrop:k,className:`
          relative border-2 border-dashed rounded-xl p-8 text-center cursor-pointer
          transition-all duration-200
          ${e?"border-pink-500 bg-pink-500/10":"border-slate-300 dark:border-slate-600 hover:border-pink-500/50 hover:bg-slate-50 dark:hover:bg-slate-800"}
          ${r?"pointer-events-none opacity-50":""}
        `,children:[s.jsx("input",{ref:c,type:"file",multiple:!0,accept:".log,.logs,.txt,.json,.yaml,.yml,.gz,.tar,.tar.gz,.tgz,.zip",onChange:b,className:"hidden"}),r?s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-slate-600 dark:text-gray-300 font-medium",children:a||"Processing files..."}),l&&s.jsx("p",{className:"text-slate-400 dark:text-gray-500 text-xs font-mono max-w-md truncate",children:l})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-slate-400 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("p",{className:"text-slate-900 dark:text-gray-100 font-medium mb-1",children:"Drop your files here, or click to browse"}),s.jsx("p",{className:"text-slate-500 dark:text-gray-400 text-sm",children:"Upload forklift logs, virt-v2v logs, Plan YAMLs, or must-gather archives"}),s.jsxs("p",{className:"text-slate-400 dark:text-gray-500 text-xs mt-3 flex items-center justify-center gap-1.5",children:[s.jsx("svg",{className:"w-3.5 h-3.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Your files never leave your browser  all processing happens locally on your device."]})]})]})})}function Es({text:e,className:t="",size:r="sm",label:n,onCopy:a}){const[i,l]=S.useState(!1),o=S.useCallback(async u=>{u.stopPropagation();try{await navigator.clipboard.writeText(e),l(!0),a==null||a(),setTimeout(()=>l(!1),2e3)}catch(p){console.error("Failed to copy:",p)}},[e,a]),c=r==="sm"?"p-1.5":"p-2",d=r==="sm"?"w-3.5 h-3.5":"w-4 h-4";return s.jsxs("button",{onClick:o,className:`
        ${c} rounded-lg transition-colors
        ${i?"bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-gray-400"}
        ${t}
      `,title:i?"Copied!":n||"Copy to clipboard",children:[i?s.jsx("svg",{className:d,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:d,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n&&!i&&s.jsx("span",{className:"ml-1.5 text-xs",children:n}),i&&n&&s.jsx("span",{className:"ml-1.5 text-xs",children:"Copied!"})]})}function Te({expanded:e,className:t=""}){return s.jsx("span",{className:`inline-block transition-transform duration-150 ${e?"rotate-90":""} ${t}`,children:""})}const yj={document:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}),search:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),folder:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"}),error:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})};function bo({icon:e="document",title:t,description:r,action:n}){return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto text-slate-400 dark:text-gray-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:yj[e]}),s.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-gray-100 mb-2",children:t}),r&&s.jsx("p",{className:"text-slate-500 dark:text-gray-400 mb-4",children:r}),n]})}function Bc({json:e,className:t=""}){const r=S.useMemo(()=>{let n;try{const i=JSON.parse(e);n=JSON.stringify(i,null,2)}catch{n=e}let a=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a=a.replace(/"([^"\\]|\\.)*"/g,i=>`<span class="json-string">${i}</span>`),a=a.replace(/\b(-?\d+\.?\d*(?:[eE][+-]?\d+)?)\b/g,'<span class="json-number">$1</span>'),a=a.replace(/\b(true|false|null)\b/g,'<span class="json-boolean">$1</span>'),a=a.replace(/<span class="json-string">("([^"\\]|\\.)*")<\/span>(\s*):/g,'<span class="json-key">$1</span>$3:'),a},[e]);return s.jsx("pre",{className:`text-xs font-mono whitespace-pre-wrap break-words text-slate-700 dark:text-slate-300 ${t}`,dangerouslySetInnerHTML:{__html:r}})}function zu(e){if(!e)return"";try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch{return e}}function rx({searchQuery:e,onSearchChange:t,levelFilter:r,onLevelFilterChange:n,levelCounts:a}){return s.jsxs("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 flex flex-col sm:flex-row gap-3",children:[s.jsx("input",{type:"text",placeholder:"Search logs...","aria-label":"Search logs",value:e,onChange:i=>t(i.target.value),className:"flex-1 bg-slate-100 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm text-slate-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(a).map(([i,l])=>l>0||i==="all"?s.jsxs("button",{onClick:()=>n(i),"aria-pressed":r===i,className:`
                px-3 py-1.5 rounded-lg text-xs font-medium
                ${r===i?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}
              `,children:[i==="all"?"All":i.charAt(0).toUpperCase()+i.slice(1),s.jsxs("span",{className:"ml-1 opacity-70",children:["(",l,")"]})]},i):null)})]})}function bj(e){if(!e)return!1;try{const t=e instanceof Date?e:new Date(e);return!(isNaN(t.getTime())||t.getFullYear()<=1970)}catch{return!1}}function _e(e){try{const t=new Date(e);if(isNaN(t.getTime()))return e;if(t.getFullYear()<=1970)return"";const r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0"),c=String(t.getMilliseconds()).padStart(3,"0");return`${r}-${n}-${a} ${i}:${l}:${o}.${c}`}catch{return e}}function Br(e){if(!e)return"Unknown";try{const t=new Date(e);return isNaN(t.getTime())?typeof e=="string"?e:"Unknown":t.getFullYear()<=1970?"Unknown":t.toISOString().replace("T"," ").replace("Z","")}catch{return typeof e=="string"?e:"Unknown"}}function ds(e){return!e||!bj(e)?"":e.toLocaleString()}function jj(e){const t=e.toLowerCase(),r={error:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400",warn:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",warning:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",debug:"bg-slate-100 dark:bg-slate-500/20 text-slate-600 dark:text-slate-400"};return r[t]||r.info}function wj(e){const t={error:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30",warning:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-500/30",warn:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-500/30",info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-500/30",debug:"bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400 border-slate-200 dark:border-gray-500/30"};return t[e]||t.info}function Nj(e){const t={error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",warn:"bg-yellow-500 text-white",info:"bg-blue-500 text-white",debug:"bg-slate-500 text-white"};return t[e]||t.info}function Sj(e){return{Initialize:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-400",CutoverReady:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-400",StorePowerState:"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-400",AllocateDisks:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-400",CopyDisks:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",CopyingPaused:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400",CreateGuestConversionPod:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400",ConvertGuest:"bg-lime-100 dark:bg-lime-500/20 text-lime-700 dark:text-lime-400",CopyDisksVirtV2V:"bg-teal-100 dark:bg-teal-500/20 text-teal-700 dark:text-teal-400",CreateVM:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400",PostHook:"bg-fuchsia-100 dark:bg-fuchsia-500/20 text-fuchsia-700 dark:text-fuchsia-400",Completed:"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400"}[e]||"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-400"}function Cj(e){const t={Pending:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",Ready:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",Running:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",Succeeded:"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400",Failed:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400",Archived:"bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400"};return t[e]||t.Pending}function Mj(e){return{VirtualMachine:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-400",Pod:"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400",Secret:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",ConfigMap:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400",PVC:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-400",PersistentVolumeClaim:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-400",Service:"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-400"}[e]||"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-400"}function ii({text:e,searchQuery:t,className:r="",highlightClassName:n="bg-yellow-200 dark:bg-yellow-500/40 text-yellow-900 dark:text-yellow-100 rounded px-0.5"}){const a=S.useMemo(()=>{if(!t.trim())return[{text:e,highlight:!1}];const i=t.toLowerCase(),l=[];let o=e,c=e.toLowerCase();for(;c.length>0;){const d=c.indexOf(i);if(d===-1){l.push({text:o,highlight:!1});break}d>0&&l.push({text:o.slice(0,d),highlight:!1}),l.push({text:o.slice(d,d+i.length),highlight:!0}),o=o.slice(d+i.length),c=c.slice(d+i.length)}return l},[e,t]);return s.jsx("span",{className:r,children:a.map((i,l)=>i.highlight?s.jsx("mark",{className:n,children:i.text},l):s.jsx("span",{children:i.text},l))})}function jo({group:e,isExpanded:t,onToggle:r,searchQuery:n}){const a=wj(e.level),i=Nj(e.level),l=e.firstSeen&&e.lastSeen?`${_e(e.firstSeen)} - ${_e(e.lastSeen)}`:e.firstSeen?_e(e.firstSeen):"";return s.jsxs("div",{className:`rounded-lg border overflow-hidden ${a}`,children:[s.jsxs("div",{className:"px-4 py-3 flex items-start gap-3",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${i}`,children:e.level==="warn"?"warning":e.level}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("span",{className:"font-medium text-slate-900 dark:text-gray-100",children:s.jsx(ii,{text:e.message,searchQuery:n})})}),e.count>1&&s.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold bg-green-500 text-white flex-shrink-0",children:[e.count,"x"]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400 whitespace-nowrap flex-shrink-0",children:l})]}),e.count>0&&s.jsxs("div",{className:"border-t border-inherit",children:[s.jsxs("button",{onClick:r,className:"w-full px-4 py-2 text-left text-sm text-blue-600 dark:text-blue-400 hover:bg-white/50 dark:hover:bg-black/10 flex items-center gap-1",children:[s.jsx("svg",{className:`w-4 h-4 transition-transform ${t?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),t?"Hide":"Show all"," ",e.count," ",e.count===1?"entry":"entries"]}),t&&s.jsx("div",{className:"bg-white/50 dark:bg-black/20 divide-y divide-slate-200 dark:divide-slate-700",children:e.entries.map((o,c)=>s.jsxs("div",{className:"px-4 py-3 flex gap-4",children:[s.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400 whitespace-nowrap flex-shrink-0 w-40",children:_e(o.timestamp)}),s.jsxs("div",{className:"flex-1 min-w-0 relative group",children:[s.jsx("pre",{className:"text-xs bg-slate-100 dark:bg-slate-800 rounded p-3 overflow-x-auto text-slate-800 dark:text-gray-200 font-mono whitespace-pre-wrap",children:zu(o.rawLine)}),s.jsx(Es,{text:zu(o.rawLine),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy JSON"})]})]},c))})]})]})}const Lj={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"};function Rn({isOpen:e,onClose:t,title:r,subtitle:n,children:a,maxWidth:i="4xl",footer:l}){S.useEffect(()=>{if(!e)return;const d=u=>{u.key==="Escape"&&t()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]);const o=S.useRef(null);S.useEffect(()=>{if(e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[e]),S.useEffect(()=>{if(!e||!o.current)return;const d=o.current,u='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',p=h=>{if(h.key!=="Tab")return;const v=d.querySelectorAll(u);if(v.length===0)return;const k=v[0],b=v[v.length-1];h.shiftKey?document.activeElement===k&&(h.preventDefault(),b.focus()):document.activeElement===b&&(h.preventDefault(),k.focus())},f=d.querySelectorAll(u);return f.length>0&&f[0].focus(),document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[e]);const c=S.useCallback(d=>{d.target===d.currentTarget&&t()},[t]);return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:c,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:s.jsxs("div",{ref:o,className:`bg-white dark:bg-slate-800 rounded-xl ${Lj[i]} w-full max-h-[90vh] flex flex-col overflow-hidden shadow-2xl`,onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-start justify-between flex-shrink-0",children:[s.jsxs("div",{children:[s.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-slate-900 dark:text-gray-100",children:r}),n&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:n})]}),s.jsx("button",{onClick:t,"aria-label":"Close dialog",className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500 dark:text-gray-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-visible",children:a}),l&&s.jsx("div",{className:"px-6 py-3 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:l})]})}):null}function sx({stacktrace:e,className:t=""}){const r=e.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);return s.jsx("div",{className:`text-xs font-mono space-y-0.5 ${t}`,children:r.map((n,a)=>s.jsx(_j,{line:n},a))})}function _j({line:e}){if(e.startsWith("/")||e.match(/^\s*\//)||e.match(/\.go:\d+$/))return s.jsx("div",{className:"text-slate-500 dark:text-slate-400 pl-4",children:e});const t=e.match(/^(.+?)\.(\([^)]+\)\.)?(\w+)$/);if(t){const[,n,a,i]=t;return s.jsxs("div",{children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:n}),a&&s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:a}),s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[".",i]})]})}const r=e.match(/^([\w./]+)\.(\w+)$/);if(r){const[,n,a]=r;return s.jsxs("div",{children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:n}),s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[".",a]})]})}return s.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:e})}function Ej(){const e=Vv(),t=$e(o=>o.v2vFileEntries),[r,n]=S.useState(!1),a=t.length,i=[{label:"Total Plans",value:e.totalPlans,color:"text-slate-900 dark:text-gray-100"},{label:"Running",value:e.running,color:"text-blue-600 dark:text-blue-400"},{label:"Succeeded",value:e.succeeded,color:"text-green-600 dark:text-green-400"},{label:"Failed",value:e.failed,color:"text-red-600 dark:text-red-400"},{label:"Archived",value:e.archived,color:"text-slate-500 dark:text-gray-400"}],l=a>0?"grid-cols-2 sm:grid-cols-3 md:grid-cols-6":"grid-cols-2 sm:grid-cols-3 md:grid-cols-5";return s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[s.jsxs("div",{className:`grid ${l} gap-4`,children:[i.map(o=>s.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 text-center",children:[s.jsx("div",{className:`text-2xl font-bold ${o.color}`,children:o.value}),s.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:o.label})]},o.label)),a>0&&s.jsxs("button",{onClick:()=>n(!0),className:`bg-purple-50 dark:bg-purple-500/10 rounded-xl border border-purple-200 dark:border-purple-500/30
                       p-4 text-center hover:bg-purple-100 dark:hover:bg-purple-500/20 transition-colors cursor-pointer`,children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a}),s.jsx("div",{className:"text-sm text-purple-500 dark:text-purple-400 mt-1",children:"V2V Logs"})]})]}),r&&a>0&&s.jsx(Ij,{onClose:()=>n(!1)})]})}function Pj(e){const t=e.split("/");return t.length<=4?e:"/"+t.slice(-4).join("/")}function Ij({onClose:e}){const t=$e(i=>i.v2vFileEntries),r=he(i=>i.plans),n=he(i=>i.setViewMode),a=S.useCallback(i=>{$e.getState().setSelectedFile(i),r.length>0&&n("v2v"),e()},[r.length,n,e]);return s.jsx(Rn,{isOpen:!0,onClose:e,title:"V2V Logs Found in Archive",maxWidth:"lg",children:s.jsx("div",{className:"p-4 space-y-2 max-h-[60vh] overflow-y-auto",children:t.length===0?s.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 text-center py-4",children:"No V2V log files found."}):t.map((i,l)=>{const o=i.data.toolRuns.length,c=i.data.toolRuns.some(u=>u.exitStatus==="error"),d=i.data.toolRuns.some(u=>u.exitStatus==="success");return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${c?"bg-red-500":d?"bg-green-500":"bg-slate-400"}`}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-gray-100 truncate",children:i.planName??"Unknown plan"}),s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:""}),s.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:i.vmId??"Unknown VM"})]}),s.jsx("div",{className:"text-xs font-mono text-slate-400 dark:text-gray-500 truncate mt-0.5",title:i.filePath,children:Pj(i.filePath)}),s.jsxs("div",{className:"text-xs text-slate-400 dark:text-gray-500 mt-0.5",children:[o," tool run",o!==1?"s":"","  ",i.data.totalLines.toLocaleString()," lines"]})]})]}),s.jsx("button",{onClick:()=>a(l),className:`px-3 py-1 rounded-lg text-xs font-medium
                    bg-purple-50 dark:bg-purple-500/10 hover:bg-purple-100 dark:hover:bg-purple-500/20
                    text-purple-600 dark:text-purple-400 transition-colors flex-shrink-0`,children:"View Analysis"})]},l)})})})}function Tj(){const e=_f(),t=yc(),r=Ef(),{setSearchQuery:n,setStatusFilter:a}=he(),i=S.useMemo(()=>{const d={all:e.length,Running:0,Succeeded:0,Failed:0,Archived:0};for(const u of e)u.archived&&d.Archived++,u.status in d&&d[u.status]++;return d},[e]),l=S.useCallback(d=>{n(d.target.value)},[n]),o=S.useCallback(()=>{n("")},[n]),c=[{id:"all",label:"All",count:i.all},{id:"Running",label:"Running",count:i.Running},{id:"Succeeded",label:"Succeeded",count:i.Succeeded},{id:"Failed",label:"Failed",count:i.Failed},{id:"Archived",label:"Archived",count:i.Archived}];return s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{id:"global-search-input",type:"text",placeholder:"Search plans, VMs, namespaces...","aria-label":"Search logs",value:t,onChange:l,className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg pl-10 pr-10 py-2 text-slate-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"}),t&&s.jsx("button",{onClick:o,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:text-gray-400 dark:hover:text-gray-100",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:c.map(d=>s.jsxs("button",{onClick:()=>a(d.id),className:`
                px-3 py-2 rounded-lg text-sm font-medium transition-all
                ${r===d.id?"bg-pink-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}
              `,children:[d.label,s.jsxs("span",{className:"ml-1.5 opacity-70",children:["(",d.count,")"]})]},d.id))})]})})}function Fj(e,t){const r=e.fromYaml?[]:Tf(e.migrationType),n=new Set(r);if(e.fromYaml){const f=new Set,h=[];for(const v of e.phaseHistory||[])f.has(v.name)||(f.add(v.name),h.push(v.name));if(e.phaseLogs)for(const v of Object.keys(e.phaseLogs))f.has(v)||(f.add(v),h.push(v));for(const v of Object.keys(t))f.has(v)||(f.add(v),h.push(v));return h}const a=new Set;for(const f of e.phaseHistory||[])n.has(f.name)||a.add(f.name);if(e.phaseLogs)for(const f of Object.keys(e.phaseLogs))n.has(f)||a.add(f);for(const f of Object.keys(t))n.has(f)||a.add(f);if(a.size===0)return[...r];const i=[],l=new Set;for(const f of e.phaseHistory||[])l.has(f.name)||(l.add(f.name),i.push(f.name));const o=new Map;for(const f of a){const h=i.indexOf(f);if(h===-1){o.set(f,null);continue}let v=null;for(let k=h-1;k>=0;k--)if(n.has(i[k])){v=i[k];break}o.set(f,v)}const c=new Map;for(const[f,h]of o)c.has(h)||c.set(h,[]),c.get(h).push(f);for(const[,f]of c)f.sort((h,v)=>{const k=i.indexOf(h),b=i.indexOf(v);return k===-1&&b===-1?h.localeCompare(v):k===-1?1:b===-1?-1:k-b});const d=[],u=c.get(null)||[],p=[];for(const f of u){const h=i.indexOf(f);h!==-1&&h<i.findIndex(v=>n.has(v))?d.push(f):p.push(f)}for(const f of r){d.push(f);const h=c.get(f);h&&d.push(...h)}return d.push(...p),d}const zs=65,Wu=160;function Aj({vm:e,phaseSummaries:t,onPhaseClick:r,onCycleViewClick:n}){const a=Si(),i=S.useMemo(()=>e.fromYaml?[]:Tf(e.migrationType),[e.fromYaml,e.migrationType]),l=S.useMemo(()=>new Set(i),[i]),o=S.useMemo(()=>Fj(e,t),[e,t]),c=S.useMemo(()=>{const y=new Map;for(const C of e.phaseHistory||[]){const M=C.startedAt&&C.endedAt?new Date(C.endedAt).getTime()-new Date(C.startedAt).getTime():void 0,P=y.get(C.name);P&&M?y.set(C.name,{startedAt:P.startedAt,endedAt:C.endedAt,durationMs:(P.durationMs||0)+M}):y.set(C.name,{startedAt:C.startedAt,endedAt:C.endedAt,durationMs:M})}return y},[e.phaseHistory]),d=S.useMemo(()=>{const y=new Map;for(const C of e.phaseHistory||[])if(gr.has(C.name)){const M=y.get(C.name);M?(M.count++,M.iterations.push(C)):y.set(C.name,{count:1,iterations:[C]})}return y},[e.phaseHistory]),u=S.useMemo(()=>{let y=0;for(const C of e.phaseHistory||[])C.iteration&&C.iteration>y&&(y=C.iteration);return y},[e.phaseHistory]),p=y=>gr.has(y),f=y=>{var C;return((C=d.get(y))==null?void 0:C.count)||0},h=y=>{const C=t[y];if(C!=null&&C.durationMs)return C.durationMs;const M=c.get(y);return(M==null?void 0:M.durationMs)||null},v=y=>{const C=t[y];if(C!=null&&C.duration)return C.duration;const M=c.get(y);return M!=null&&M.durationMs?xt(M.durationMs):null},k=S.useMemo(()=>{const y=[];for(const P of o){const w=h(P);w&&w>0&&y.push(w)}if(y.length===0)return{min:0,max:0};const C=Math.min(...y),M=Math.max(...y);return{min:C,max:M}},[o,t,c]),b=y=>{const C=h(y);if(!C||!k.max)return zs;const M=Math.sqrt(k.min||1),P=Math.sqrt(k.max||1),w=Math.sqrt(C||1),_=P-M;if(_===0)return(zs+Wu)/2;const L=(w-M)/_;return Math.round(zs+L*(Wu-zs))},g=y=>{const C=t[y];if(!C)return{total:0,errors:0,warnings:0};let M=0,P=0;for(const w of C.groupedLogs||[])w.level==="error"?M+=w.count:(w.level==="warning"||w.level==="warn")&&(P+=w.count);return{total:C.totalLogs,errors:M,warnings:P}},m=y=>c.has(y),x=y=>!l.has(y),j=y=>y===gs[0],N=y=>y===gs[gs.length-1];return s.jsxs("div",{className:"w-full",children:[u>1&&s.jsx("div",{className:"mb-2 flex items-center gap-2",children:s.jsxs("button",{onClick:n,className:"text-xs font-medium text-cyan-600 dark:text-cyan-400 bg-cyan-100 dark:bg-cyan-900/40 px-2 py-0.5 rounded-full flex items-center gap-1 hover:bg-cyan-200 dark:hover:bg-cyan-900/60 transition-colors cursor-pointer",title:"View logs grouped by cycle",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Precopy Loop: ",u," iterations",s.jsxs("svg",{className:"w-3 h-3 ml-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]})}),s.jsx("div",{className:"flex flex-wrap items-start gap-y-4 gap-x-0.5",children:o.map((y,C)=>{const M=g(y),P=v(y),w=M.total>0,_=y===e.currentPhase,L=m(y),I=L?b(y):zs,A=x(y)&&a,R=p(y),V=f(y),T=j(y),$=N(y);let D="notRun";A&&L?D=M.errors>0?"error":"unknown":L?_?D="running":M.errors>0?D="error":R&&V>1||y==="DiskTransfer"&&e.precopyCount&&e.precopyCount>1?D="loop":D="completed":D="notRun";const B=C<o.length-1?o[C+1]:null,Y=B?m(B):!1,Q=(B?x(B):!1)&&a,K=L&&Y?A||Q?"bg-purple-400 dark:bg-purple-500":"bg-green-500":"bg-gray-300 dark:bg-gray-600";return s.jsxs("div",{className:"flex items-center",children:[T&&L&&u>1&&s.jsx("div",{className:"flex items-center mr-0.5",children:s.jsx("div",{className:"text-cyan-500 dark:text-cyan-400 text-base font-bold",title:"Precopy loop start",children:""})}),s.jsxs("div",{className:"relative flex flex-col items-center",children:[s.jsx("div",{className:"absolute -top-2.5 -right-1.5 z-10",children:w&&s.jsx("span",{className:`
                        min-w-[22px] h-[22px] px-1.5 rounded-full text-[11px] font-bold
                        flex items-center justify-center shadow-sm
                        ${M.errors>0?"bg-red-500 text-white":M.warnings>0?"bg-orange-500 text-white":A?"bg-purple-500 text-white":D==="loop"?"bg-cyan-500 text-white":"bg-blue-500 text-white"}
                      `,children:M.total})}),R&&V>1&&s.jsx("div",{className:"absolute -top-2.5 -left-1.5 z-10",children:s.jsxs("span",{className:"min-w-[20px] h-[20px] px-1 rounded-full text-[10px] font-bold flex items-center justify-center bg-cyan-500 text-white shadow-sm",title:`${V} iterations`,children:["",V]})}),e.precopyCount&&e.precopyCount>0&&y==="DiskTransfer"&&s.jsx("div",{className:"absolute -top-2.5 -left-1.5 z-10",children:s.jsxs("span",{className:"min-w-[20px] h-[20px] px-1 rounded-full text-[10px] font-bold flex items-center justify-center bg-cyan-500 text-white shadow-sm",title:`${e.precopyCount} precopies`,children:["",e.precopyCount]})}),s.jsx("button",{onClick:()=>w&&r(y),disabled:!w,style:{width:`${I}px`},className:`
                    relative px-2 py-2 rounded-lg text-xs font-medium
                    ${D==="notRun"?"bg-transparent text-gray-400 dark:text-gray-500 border-2 border-dashed border-gray-300 dark:border-gray-600":D==="running"?"bg-teal-100 dark:bg-teal-900/40 text-teal-700 dark:text-teal-300 border-2 border-solid border-teal-500":D==="error"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 border-2 border-solid border-red-500":D==="unknown"?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-2 border-solid border-purple-500":D==="loop"?"bg-cyan-100 dark:bg-cyan-900/40 text-cyan-700 dark:text-cyan-300 border-2 border-solid border-cyan-500":"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 border-2 border-solid border-green-500"}
                    ${w?"cursor-pointer hover:shadow-md":"cursor-default"}
                    ${_?"ring-2 ring-teal-400 ring-offset-1 dark:ring-offset-slate-800":""}
                  `,title:`${y}${A?" (Unknown Phase)":""}${R&&V>1?` (${V} iterations)`:""}${P?` (${P} total)`:""}${w?` - ${M.total} logs`:""}`,children:s.jsx("span",{className:"block truncate text-center leading-tight",children:rk(y)})}),s.jsx("span",{className:`mt-1 text-[10px] font-medium h-4 ${D==="notRun"?"text-gray-400 dark:text-gray-600":D==="error"?"text-red-600 dark:text-red-400":D==="unknown"?"text-purple-600 dark:text-purple-400":D==="loop"?"text-cyan-600 dark:text-cyan-400":"text-green-600 dark:text-green-400"}`,children:P||""})]}),$&&L&&u>1&&s.jsx("div",{className:"flex items-center ml-0.5",children:s.jsx("div",{className:"text-cyan-500 dark:text-cyan-400 text-base font-bold",title:"Loop back to CopyDisks",children:""})}),C<o.length-1&&s.jsx("div",{className:`w-5 h-0.5 ${K} flex-shrink-0 -mt-4`})]},y)})})]})}function nx({warmInfo:e}){const[t,r]=S.useState(new Set([1])),n=S.useCallback(l=>{r(o=>{const c=new Set(o);return c.has(l)?c.delete(l):c.add(l),c})},[]),a=S.useMemo(()=>e.precopies.reduce((l,o)=>l+(o.durationMs||0),0),[e]),i=S.useMemo(()=>{const l=new Set;for(const o of e.precopies)for(const c of o.disks)l.add(c);return Array.from(l)},[e]);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsx(aa,{label:"Precopies",value:String(e.precopies.length),icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),color:"cyan"}),s.jsx(aa,{label:"Successes",value:String(e.successes),icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),color:"green"}),s.jsx(aa,{label:"Failures",value:String(e.failures),icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),color:e.failures>0?"red":"slate"}),s.jsx(aa,{label:"Total Duration",value:a?xt(a):"N/A",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"blue"})]}),i.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-slate-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),"Disks (",i.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((l,o)=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),l]},o))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-slate-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Precopy Iterations"]}),s.jsx("div",{className:"space-y-3",children:e.precopies.map(l=>s.jsx(Dj,{precopy:l,totalPrecopies:e.precopies.length,isExpanded:t.has(l.iteration),onToggle:()=>n(l.iteration)},l.iteration))})]}),e.consecutiveFailures>0&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[s.jsx("svg",{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:[e.consecutiveFailures," consecutive failure",e.consecutiveFailures!==1?"s":""]}),e.nextPrecopyAt&&s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:["Next precopy scheduled: ",Br(e.nextPrecopyAt)]})]})]})]})}const Hu={cyan:{bg:"bg-cyan-50 dark:bg-cyan-900/20",border:"border-cyan-200 dark:border-cyan-800",text:"text-cyan-700 dark:text-cyan-300",icon:"text-cyan-500 dark:text-cyan-400"},green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-700 dark:text-green-300",icon:"text-green-500 dark:text-green-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-700 dark:text-red-300",icon:"text-red-500 dark:text-red-400"},blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300",icon:"text-blue-500 dark:text-blue-400"},slate:{bg:"bg-slate-50 dark:bg-slate-800/50",border:"border-slate-200 dark:border-slate-700",text:"text-slate-700 dark:text-gray-300",icon:"text-slate-400 dark:text-gray-500"}};function aa({label:e,value:t,icon:r,color:n}){const a=Hu[n]||Hu.slate;return s.jsxs("div",{className:`rounded-xl border ${a.border} ${a.bg} p-4`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:a.icon,children:r}),s.jsx("span",{className:`text-xs font-medium uppercase tracking-wider ${a.text} opacity-70`,children:e})]}),s.jsx("div",{className:`text-2xl font-bold ${a.text}`,children:t})]})}function Dj({precopy:e,totalPrecopies:t,isExpanded:r,onToggle:n}){return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden hover:border-cyan-300 dark:hover:border-cyan-700 transition-colors",children:[s.jsx("button",{onClick:n,className:"w-full text-left",children:s.jsxs("div",{className:"px-4 py-3 flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-cyan-500 dark:bg-cyan-600 flex items-center justify-center text-white font-bold text-sm",children:e.iteration}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-semibold text-slate-800 dark:text-gray-200 text-sm",children:["Precopy ",e.iteration," of ",t]}),e.durationMs&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:xt(e.durationMs)}),e.disks.length>0&&s.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300",children:[e.disks.length," disk",e.disks.length!==1?"s":""]})]}),e.snapshot&&!e.snapshot.startsWith("iteration-")&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 mt-0.5 truncate",children:[s.jsx("span",{className:"font-medium",children:"Snapshot:"})," ",e.snapshot]})]}),s.jsx("svg",{className:`w-5 h-5 text-slate-400 dark:text-gray-500 transition-transform flex-shrink-0 ${r?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),r&&s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 px-4 py-3",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.startedAt&&s.jsx(ia,{icon:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Started",value:Br(e.startedAt)}),e.endedAt&&s.jsx(ia,{icon:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),label:"Completed",value:Br(e.endedAt)}),e.snapshot&&!e.snapshot.startsWith("iteration-")&&s.jsx(ia,{icon:s.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Snapshot",value:e.snapshot}),e.durationMs&&s.jsx(ia,{icon:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"Duration",value:xt(e.durationMs)})]}),e.disks.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Disks transferred"}),s.jsx("div",{className:"mt-1.5 flex flex-wrap gap-2",children:e.disks.map((a,i)=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),a]},i))})]})]})]})}function ia({icon:e,label:t,value:r}){return s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 mt-0.5 flex-shrink-0",children:e}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-gray-400 block",children:t}),s.jsx("span",{className:"text-sm text-slate-800 dark:text-gray-200 break-all",children:r})]})]})}function $j({phase:e,vmName:t,logs:r,summary:n,iterations:a,warmInfo:i,onClose:l}){var _;const[o,c]=S.useState(""),[d,u]=S.useState("all"),[p,f]=S.useState(new Set),[h,v]=S.useState(new Set([1])),[k,b]=S.useState(i?"visual":"logs"),g=a&&a.length>1,m=i&&i.precopies.length>0,x=S.useCallback(L=>{f(I=>{const E=new Set(I);return E.has(L)?E.delete(L):E.add(L),E})},[]),j=S.useCallback(L=>{v(I=>{const E=new Set(I);return E.has(L)?E.delete(L):E.add(L),E})},[]),N=S.useMemo(()=>{var I;if(!g||!a)return null;const L=new Map;for(const E of a)L.set(E.iteration,[]);for(const E of r){const A=new Date(E.timestamp).getTime();for(const R of a){const V=R.startedAt.getTime(),T=R.endedAt?R.endedAt.getTime():1/0;if(A>=V&&A<=T){(I=L.get(R.iteration))==null||I.push(E);break}}}return L},[r,a,g]),y=S.useMemo(()=>{if(!g||!N){const I=new Map;return I.set("all",(n==null?void 0:n.groupedLogs)||[]),I}const L=new Map;for(const[I,E]of N){const A=new Map;for(const R of E){const V=`${R.level}:${R.message}`,T=A.get(V);T?(T.count++,T.entries.push(R),R.timestamp>T.lastSeen&&(T.lastSeen=R.timestamp),R.timestamp<T.firstSeen&&(T.firstSeen=R.timestamp)):A.set(V,{message:R.message,count:1,firstSeen:R.timestamp,lastSeen:R.timestamp,level:R.level,entries:[R]})}L.set(I,Array.from(A.values()))}return L},[N,g,n==null?void 0:n.groupedLogs]),C=S.useCallback(L=>{let I=L;if(d!=="all"&&(I=I.filter(E=>E.level===d||d==="warning"&&E.level==="warn")),o.trim()){const E=o.toLowerCase();I=I.filter(A=>A.message.toLowerCase().includes(E))}return I},[d,o]),M=((_=n==null?void 0:n.groupedLogs)==null?void 0:_.length)||0,P=r.length,w=S.useMemo(()=>{const L={all:0,error:0,warning:0,info:0,debug:0};for(const I of(n==null?void 0:n.groupedLogs)||[]){L.all+=I.count;const E=I.level==="warn"?"warning":I.level;L[E]!==void 0&&(L[E]+=I.count)}return L},[n]);return s.jsxs(Rn,{isOpen:!0,onClose:l,title:t?`${t} - ${e}`:e,subtitle:m?`Warm Migration - ${i.precopies.length} precopy iteration${i.precopies.length!==1?"s":""}`:`${M} unique message${M!==1?"s":""} (${P} total)`,maxWidth:"5xl",children:[((n==null?void 0:n.startTime)&&_e(n.startTime)||(n==null?void 0:n.endTime)&&_e(n.endTime)||(n==null?void 0:n.duration))&&s.jsxs("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 flex flex-wrap gap-x-6 gap-y-1 text-sm",children:[(n==null?void 0:n.startTime)&&_e(n.startTime)&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-300",children:"Started:"}),s.jsx("span",{className:"ml-2 text-slate-600 dark:text-gray-400",children:_e(n.startTime)})]}),(n==null?void 0:n.endTime)&&_e(n.endTime)&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-300",children:"Ended:"}),s.jsx("span",{className:"ml-2 text-slate-600 dark:text-gray-400",children:_e(n.endTime)})]}),(n==null?void 0:n.duration)&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-300",children:"Duration:"}),s.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400 font-medium",children:n.duration})]})]}),m&&s.jsxs("div",{role:"tablist",className:"px-6 py-2 border-b border-slate-200 dark:border-slate-700 flex gap-1",children:[s.jsx("button",{role:"tab","aria-selected":k==="visual",onClick:()=>b("visual"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${k==="visual"?"bg-cyan-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Precopy Overview"]})}),s.jsx("button",{role:"tab","aria-selected":k==="logs",onClick:()=>b("logs"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${k==="logs"?"bg-cyan-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Raw Logs (",P,")"]})})]}),m&&k==="visual"&&s.jsx(nx,{warmInfo:i}),(!m||k==="logs")&&s.jsxs(s.Fragment,{children:[s.jsx(rx,{searchQuery:o,onSearchChange:c,levelFilter:d,onLevelFilterChange:u,levelCounts:w}),s.jsx("div",{className:"p-4 space-y-3",children:g&&a?s.jsx("div",{className:"space-y-4",children:a.map(L=>{const I=y.get(L.iteration)||[],E=C(I),A=h.has(L.iteration),R=I.reduce((V,T)=>V+T.count,0);return s.jsxs("div",{className:"border border-cyan-200 dark:border-cyan-800 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>j(L.iteration),className:"w-full px-4 py-3 bg-cyan-50 dark:bg-cyan-900/30 flex items-center justify-between hover:bg-cyan-100 dark:hover:bg-cyan-900/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{className:`w-4 h-4 text-cyan-600 dark:text-cyan-400 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsxs("span",{className:"font-semibold text-cyan-700 dark:text-cyan-300",children:["Cycle ",L.iteration]}),s.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-500 text-white",children:[R," log",R!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-gray-400",children:[L.durationMs&&s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-medium",children:xt(L.durationMs)}),s.jsxs("span",{className:"text-xs",children:[_e(L.startedAt.toISOString()),L.endedAt&&` - ${_e(L.endedAt.toISOString())}`]})]})]}),A&&s.jsx("div",{className:"p-3 space-y-2 bg-white dark:bg-slate-800",children:E.length===0?s.jsx("div",{className:"text-center py-4 text-slate-500 dark:text-gray-400 text-sm",children:"No logs matching your criteria in this cycle"}):E.map((V,T)=>s.jsx(jo,{group:V,isExpanded:p.has(`${L.iteration}-${T}`),onToggle:()=>x(`${L.iteration}-${T}`),searchQuery:o},`${L.iteration}-${T}`))})]},L.iteration)})}):(()=>{const L=y.get("all")||(n==null?void 0:n.groupedLogs)||[],I=C(L);return I.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-gray-400",children:"No logs matching your criteria"}):I.map((E,A)=>s.jsx(jo,{group:E,isExpanded:p.has(`all-${A}`),onToggle:()=>x(`all-${A}`),searchQuery:o},A))})()})]})]})}function Rj({vm:e,onClose:t}){const[r,n]=S.useState(""),[a,i]=S.useState("all"),[l,o]=S.useState(new Set([1])),[c,d]=S.useState(new Set),[u,p]=S.useState(new Set),f=S.useCallback(w=>{o(_=>{const L=new Set(_);return L.has(w)?L.delete(w):L.add(w),L})},[]),h=S.useCallback(w=>{d(_=>{const L=new Set(_);return L.has(w)?L.delete(w):L.add(w),L})},[]),v=S.useCallback(w=>{p(_=>{const L=new Set(_);return L.has(w)?L.delete(w):L.add(w),L})},[]),k=S.useMemo(()=>{const w=e.phaseHistory.reduce((L,I)=>I.iteration&&I.iteration>L?I.iteration:L,0);if(w<=0)return[];const _=[];for(let L=1;L<=w;L++){const I=e.phaseHistory.filter($=>gr.has($.name)&&$.iteration===L);if(I.length===0)continue;const E=I.reduce(($,D)=>{const B=new Date(D.startedAt).getTime();return B<$?B:$},1/0),A=I.reduce(($,D)=>{const B=D.endedAt?new Date(D.endedAt).getTime():0;return B>$?B:$},0),R=[];for(const $ of gs){const D=I.find(ge=>ge.name===$);if(!D)continue;const B=new Date(D.startedAt).getTime(),Y=D.endedAt?new Date(D.endedAt).getTime():1/0,Q=(e.phaseLogs[$]||[]).filter(ge=>{const et=new Date(ge.timestamp).getTime();return et>=B&&et<=Y}),K=Oj(Q),re=D.startedAt&&D.endedAt?new Date(D.endedAt).getTime()-new Date(D.startedAt).getTime():void 0;R.push({phase:$,logs:Q,groupedLogs:K,startedAt:new Date(D.startedAt),endedAt:D.endedAt?new Date(D.endedAt):void 0,durationMs:re})}const V=R.reduce(($,D)=>$+D.logs.length,0),T=A>0&&E<1/0?A-E:void 0;_.push({iteration:L,startedAt:E<1/0?new Date(E):void 0,endedAt:A>0?new Date(A):void 0,durationMs:T,phases:R,totalLogs:V})}return _},[e.phaseHistory,e.phaseLogs]),b=k.reduce((w,_)=>w+_.totalLogs,0),g=k.length,m=S.useMemo(()=>{if(e.warmInfo&&e.warmInfo.precopies.length>0)return e.warmInfo;if(k.length===0)return;const w=k.map(E=>{const A=E.phases.some(R=>R.phase===F.AddCheckpoint&&R.endedAt);return{iteration:E.iteration,snapshot:`iteration-${E.iteration}`,startedAt:E.startedAt,endedAt:E.endedAt,durationMs:E.durationMs,disks:[],_completed:A}}),_=w.filter(E=>E._completed).length,L=w.length>0&&!w[w.length-1]._completed?1:0,I=w.length-_-L;return{precopies:w.map(({_completed:E,...A})=>A),successes:_,failures:I>0?I:0,consecutiveFailures:0}},[e.warmInfo,k]),x=m!=null&&m.precopies.length>0,[j,N]=S.useState(k.length>0?"visual":"logs"),y=S.useMemo(()=>{const w={all:0,error:0,warning:0,info:0,debug:0};for(const _ of k)for(const L of _.phases)for(const I of L.logs){w.all++;const E=I.level==="warn"?"warning":I.level;w[E]!==void 0&&w[E]++}return w},[k]),C=S.useCallback(w=>{let _=w;if(a!=="all"&&(_=_.filter(L=>L.level===a||a==="warning"&&L.level==="warn")),r.trim()){const L=r.toLowerCase();_=_.filter(I=>I.message.toLowerCase().includes(L))}return _},[a,r]),M=S.useCallback(w=>C(w.groupedLogs).length>0,[C]),P=S.useCallback(w=>w.phases.some(_=>M(_)),[M]);return s.jsxs(Rn,{isOpen:!0,onClose:t,title:`${e.name} - Precopy Cycles`,subtitle:x?`Warm Migration - ${m.precopies.length} precopy iteration${m.precopies.length!==1?"s":""}`:`${g} cycle${g!==1?"s":""} across ${gs.length} phases (${b} total logs)`,maxWidth:"5xl",children:[x&&s.jsxs("div",{role:"tablist",className:"px-6 py-2 border-b border-slate-200 dark:border-slate-700 flex gap-1",children:[s.jsx("button",{role:"tab","aria-selected":j==="visual",onClick:()=>N("visual"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${j==="visual"?"bg-cyan-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Precopy Overview"]})}),s.jsx("button",{role:"tab","aria-selected":j==="logs",onClick:()=>N("logs"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${j==="logs"?"bg-cyan-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Raw Logs (",b,")"]})})]}),x&&j==="visual"&&s.jsx(nx,{warmInfo:m}),(!x||j==="logs")&&s.jsxs(s.Fragment,{children:[s.jsx(rx,{searchQuery:r,onSearchChange:n,levelFilter:a,onLevelFilterChange:i,levelCounts:y}),s.jsx("div",{className:"p-4 space-y-4",children:k.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-gray-400",children:"No precopy cycles found"}):k.map(w=>{const _=l.has(w.iteration);return!P(w)&&(r.trim()||a!=="all")?null:s.jsxs("div",{className:"border border-cyan-200 dark:border-cyan-800 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>f(w.iteration),className:"w-full px-4 py-3 bg-cyan-50 dark:bg-cyan-900/30 flex items-center justify-between hover:bg-cyan-100 dark:hover:bg-cyan-900/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{className:`w-4 h-4 text-cyan-600 dark:text-cyan-400 transition-transform ${_?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsxs("span",{className:"font-semibold text-cyan-700 dark:text-cyan-300",children:["Cycle ",w.iteration]}),s.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-500 text-white",children:[w.totalLogs," log",w.totalLogs!==1?"s":""]}),s.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-gray-300",children:[w.phases.length," phase",w.phases.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-gray-400",children:[w.durationMs&&s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-medium",children:xt(w.durationMs)}),s.jsxs("span",{className:"text-xs",children:[w.startedAt&&_e(w.startedAt.toISOString()),w.endedAt&&` - ${_e(w.endedAt.toISOString())}`]})]})]}),_&&s.jsx("div",{className:"p-3 space-y-2 bg-white dark:bg-slate-800",children:w.phases.map(I=>{const E=`${w.iteration}-${I.phase}`,A=c.has(E),R=C(I.groupedLogs),V=I.logs.length;return R.length===0&&(r.trim()||a!=="all")?null:s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>h(E),className:"w-full px-3 py-2.5 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:`w-3.5 h-3.5 text-slate-500 dark:text-gray-400 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("span",{className:"font-medium text-sm text-slate-800 dark:text-gray-200",children:I.phase}),s.jsxs("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:[V," log",V!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-gray-400",children:[I.durationMs!=null&&s.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:xt(I.durationMs)}),I.startedAt&&s.jsxs("span",{children:[_e(I.startedAt.toISOString()),I.endedAt&&` - ${_e(I.endedAt.toISOString())}`]})]})]}),A&&s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 p-2 space-y-2 bg-slate-50 dark:bg-slate-800/50",children:R.length===0?s.jsx("div",{className:"text-center py-3 text-slate-500 dark:text-gray-400 text-sm",children:"No logs matching your criteria"}):R.map((T,$)=>s.jsx(jo,{group:T,isExpanded:u.has(`${E}-${$}`),onToggle:()=>v(`${E}-${$}`),searchQuery:r},`${E}-${$}`))})]},E)})})]},w.iteration)})})]})]})}function Oj(e){const t=new Map,r=[];for(const n of e){const a=`${n.level}:${n.message}`,i=t.get(a);i?(i.count++,i.entries.push(n),n.timestamp>i.lastSeen&&(i.lastSeen=n.timestamp),n.timestamp<i.firstSeen&&(i.firstSeen=n.timestamp)):(t.set(a,{message:n.message,count:1,firstSeen:n.timestamp,lastSeen:n.timestamp,level:n.level,entries:[n]}),r.push(a))}return r.map(n=>t.get(n))}function Bj({vm:e,onClose:t}){const[r,n]=S.useState(new Set),[a,i]=S.useState("all"),[l,o]=S.useState("all"),[c,d]=S.useState(""),u=S.useMemo(()=>{if(!e.phaseLogs)return[];const b=[];for(const[g,m]of Object.entries(e.phaseLogs))for(const x of m)b.push({...x,phase:g});return b.sort((g,m)=>{try{return new Date(g.timestamp).getTime()-new Date(m.timestamp).getTime()}catch{return 0}}),b},[e.phaseLogs]),p=S.useMemo(()=>{const b=new Set;return u.forEach(g=>{g.phase&&b.add(g.phase)}),Array.from(b).sort()},[u]),f=S.useMemo(()=>{const b=new Set;return u.forEach(g=>{g.level&&b.add(g.level.toLowerCase())}),Array.from(b).sort()},[u]),h=S.useMemo(()=>u.filter(b=>{if(a!=="all"&&b.phase!==a||l!=="all"&&b.level.toLowerCase()!==l)return!1;if(c){const g=c.toLowerCase(),m=b.message.toLowerCase().includes(g),x=b.rawLine.toLowerCase().includes(g);if(!m&&!x)return!1}return!0}),[u,a,l,c]),v=S.useCallback(b=>{n(g=>{const m=new Set(g);return m.has(b)?m.delete(b):m.add(b),m})},[]),k=s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:"Click on a log entry to view the raw JSON. Press Escape to close."}),s.jsx("button",{onClick:t,className:`px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 
                   text-slate-700 dark:text-gray-200 rounded-lg transition-colors text-sm font-medium`,children:"Close"})]});return s.jsxs(Rn,{isOpen:!0,onClose:t,title:`Raw Logs: ${e.name}`,subtitle:`${h.length} of ${u.length} logs`,maxWidth:"6xl",footer:k,children:[s.jsxs("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 flex flex-wrap gap-4 items-center bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:b=>d(b.target.value),className:`w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 
                         bg-white dark:bg-slate-700 text-slate-900 dark:text-gray-100 text-sm
                         focus:outline-none focus:ring-2 focus:ring-pink-500`})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-gray-400",children:"Phase:"}),s.jsxs("select",{value:a,onChange:b=>i(b.target.value),className:`px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 
                         bg-white dark:bg-slate-700 text-slate-900 dark:text-gray-100 text-sm
                         focus:outline-none focus:ring-2 focus:ring-pink-500`,children:[s.jsx("option",{value:"all",children:"All Phases"}),p.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-gray-400",children:"Level:"}),s.jsxs("select",{value:l,onChange:b=>o(b.target.value),className:`px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 
                         bg-white dark:bg-slate-700 text-slate-900 dark:text-gray-100 text-sm
                         focus:outline-none focus:ring-2 focus:ring-pink-500`,children:[s.jsx("option",{value:"all",children:"All Levels"}),f.map(b=>s.jsx("option",{value:b,children:b},b))]})]})]}),s.jsx("div",{className:"p-4 space-y-2",children:h.length===0?s.jsx(bo,{icon:"search",title:"No logs found",description:"Try adjusting your search or filters"}):h.map((b,g)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>v(g),className:"w-full px-4 py-3 flex items-start gap-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsx("svg",{className:`w-4 h-4 mt-0.5 flex-shrink-0 text-slate-400 transition-transform ${r.has(g)?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400 font-mono flex-shrink-0 w-44",children:Br(b.timestamp)}),s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase flex-shrink-0 ${jj(b.level)}`,children:b.level}),b.phase&&s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium flex-shrink-0 ${Sj(b.phase)}`,children:b.phase}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-200 truncate flex-1",children:s.jsx(ii,{text:b.message,searchQuery:c})})]}),r.has(g)&&s.jsx("div",{className:"px-4 pb-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"mt-3 p-3 rounded overflow-x-auto bg-slate-100 dark:bg-slate-800 relative group",children:[s.jsx(Bc,{json:b.rawLine}),s.jsx(Es,{text:b.rawLine,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy JSON"})]})})]},g))})]})}function Vj({vm:e,planName:t}){var m,x;const[r,n]=S.useState(null),[a,i]=S.useState(!1),[l,o]=S.useState(!1),c=S.useMemo(()=>{if(!e.firstSeen)return null;const N=(e.lastSeen||new Date).getTime()-e.firstSeen.getTime();return xt(N)},[e.firstSeen,e.lastSeen]),d=S.useMemo(()=>e.phaseLogSummaries&&Object.keys(e.phaseLogSummaries).length>0?e.phaseLogSummaries:Af(e),[e]),u=S.useMemo(()=>!r||!e.phaseLogs?[]:e.phaseLogs[r]||[],[r,e.phaseLogs]),p=S.useMemo(()=>{if(!r||!gr.has(r))return[];const j=[];for(const N of e.phaseHistory||[])if(N.name===r&&N.iteration){const y=N.startedAt&&N.endedAt?new Date(N.endedAt).getTime()-new Date(N.startedAt).getTime():void 0;j.push({iteration:N.iteration,startedAt:new Date(N.startedAt),endedAt:N.endedAt?new Date(N.endedAt):void 0,durationMs:y})}return j.sort((N,y)=>N.iteration-y.iteration)},[r,e.phaseHistory]),f=S.useMemo(()=>e.phaseLogs?Object.values(e.phaseLogs).reduce((j,N)=>j+N.length,0):0,[e.phaseLogs]),h=$e(j=>j.v2vFileEntries),v=he(j=>j.setViewMode),k=S.useMemo(()=>{if(h.length===0)return-1;const N=`-vm-${e.id.replace(/^vm-/,"")}-`;return h.findIndex(y=>y.filePath.includes(N))},[h,e.id]),b=k>=0,g=S.useCallback(()=>{k>=0&&$e.getState().setSelectedFile(k),v("v2v")},[k,v]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("h4",{className:"font-medium text-slate-900 dark:text-gray-100",children:[e.name,s.jsxs("span",{className:"ml-2 text-sm text-slate-500 dark:text-gray-400 font-normal",children:["(",e.id,")"]})]}),e.transferMethod==="StorageOffload"&&s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 uppercase font-semibold",children:"Storage Offload"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[c&&s.jsx("span",{className:"text-slate-500 dark:text-gray-400",title:"Duration",children:c}),b&&s.jsxs("button",{onClick:g,className:`px-3 py-1 rounded-lg text-xs font-medium
                           bg-purple-50 dark:bg-purple-500/10 hover:bg-purple-100 dark:hover:bg-purple-500/20
                           text-purple-600 dark:text-purple-400 transition-colors flex items-center gap-1.5`,title:"View V2V log analysis for this VM",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"V2V Logs"]}),s.jsxs("button",{onClick:()=>o(!0),className:`px-3 py-1 rounded-lg text-xs font-medium
                         bg-slate-100 dark:bg-slate-600 hover:bg-slate-200 dark:hover:bg-slate-500
                         text-slate-700 dark:text-gray-200 transition-colors flex items-center gap-1.5`,title:"View all raw logs for this VM",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f," log",f!==1?"s":""]})]})]}),s.jsx(Aj,{vm:e,phaseSummaries:d,onPhaseClick:n,onCycleViewClick:()=>i(!0)}),e.error&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:["Failed at phase: ",e.error.phase]}),e.error.reasons.map((j,N)=>s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-0.5 break-words",children:j},N))]})]}),!e.error&&((m=e.conditions)==null?void 0:m.some(j=>j.type==="Failed"&&j.status==="True"))&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:((x=e.conditions.find(j=>j.type==="Failed"))==null?void 0:x.message)||"The VM migration has failed."})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-xs",children:[ds(e.firstSeen)&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"First seen:"})," ",ds(e.firstSeen)]}),ds(e.lastSeen)&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Last seen:"})," ",ds(e.lastSeen)]}),c&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Total duration:"})," ",s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:c})]}),s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Phase:"})," ",e.currentPhase||"N/A"]}),s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Step:"})," ",e.currentStep||"N/A"]}),e.operatingSystem&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"OS:"})," ",e.operatingSystem]}),e.restorePowerState&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Power State:"})," ",e.restorePowerState]}),e.newName&&s.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Renamed to:"})," ",s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e.newName})]})]}),e.dataVolumes&&e.dataVolumes.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400 font-medium",children:"Data Volumes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.dataVolumes.map((j,N)=>s.jsx("div",{className:"px-2 py-1 rounded text-xs bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",children:j.name},N))})]}),e.createdResources&&e.createdResources.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400 font-medium",children:"Created Resources"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.createdResources.map((j,N)=>s.jsxs("div",{className:`px-2 py-1 rounded text-xs ${Mj(j.type)}`,title:`Created at ${j.createdAt.toLocaleString()}`,children:[s.jsxs("span",{className:"font-medium",children:[j.type,":"]})," ",j.name||"unnamed"]},N))})]})]}),r&&s.jsx($j,{phase:r,vmName:e.name,logs:u,summary:d[r],iterations:p,warmInfo:r==="DiskTransfer"||gr.has(r)?e.warmInfo:void 0,onClose:()=>n(null)}),a&&s.jsx(Rj,{vm:e,onClose:()=>i(!1)}),l&&s.jsx(Bj,{vm:e,onClose:()=>o(!1)})]})}function zj({errors:e,panics:t,defaultOpen:r=!0}){const[n,a]=S.useState(r),i=S.useMemo(()=>e.filter(c=>c.level==="error").length,[e]),l=S.useMemo(()=>e.filter(c=>c.level!=="error").length,[e]),o=e.length+t.length;return e.length===0&&t.length===0?null:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>a(!n),className:"w-full text-left text-sm font-medium text-slate-500 dark:text-gray-400 flex items-center gap-2 hover:text-slate-700 dark:hover:text-gray-300 transition-colors",children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("span",{children:["Errors & Warnings (",o,")"]}),(i>0||l>0||t.length>0)&&s.jsxs("span",{className:"text-xs text-slate-400 dark:text-gray-500",children:["(",t.length>0?`${t.length} panics, `:"",i," errors, ",l," warnings)"]})]}),n&&s.jsxs("div",{className:"space-y-4 pl-5",children:[t.length>0&&s.jsx("div",{className:"space-y-3",children:t.map((c,d)=>s.jsx(Hj,{panic:c},d))}),e.length>0&&s.jsx("div",{className:"space-y-3",children:e.map((c,d)=>s.jsx(Wj,{error:c},d))})]})]})}function Wj({error:e}){const[t,r]=S.useState(!1),[n,a]=S.useState(!1),i=e.level==="error",l=i?"bg-red-50 dark:bg-red-500/10":"bg-yellow-50 dark:bg-yellow-500/10",o=i?"border-red-200 dark:border-red-500/30":"border-yellow-200 dark:border-yellow-500/30",c=i?"text-red-700 dark:text-red-400":"text-yellow-700 dark:text-yellow-400",d=i?"text-red-500 dark:text-red-400/70":"text-yellow-600 dark:text-yellow-400/70",u=i?"bg-red-50 dark:bg-red-500/10":"bg-yellow-50 dark:bg-yellow-500/10";return s.jsxs("div",{className:`rounded-lg border overflow-hidden ${l} ${o}`,children:[s.jsx("div",{className:`px-4 pt-3 text-xs ${d}`,children:Br(e.timestamp)}),s.jsx("div",{className:"px-4 py-2",children:s.jsx("div",{className:`text-sm px-3 py-2 rounded border-l-4 ${i?"bg-red-50 dark:bg-red-500/10 text-red-800 dark:text-red-200 border-red-500":"bg-yellow-50 dark:bg-yellow-500/10 text-yellow-800 dark:text-yellow-200 border-yellow-500"}`,children:e.message})}),e.error&&s.jsx("div",{className:`px-4 pb-2 text-sm ${c} break-words`,children:e.error}),s.jsxs("div",{className:"border-t border-inherit",children:[e.stacktrace&&s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-white/30 dark:hover:bg-black/10 ${d}`,children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${t?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),"Stack Trace"]}),t&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:`p-3 rounded overflow-x-auto ${u} relative group`,children:[s.jsx(sx,{stacktrace:e.stacktrace}),s.jsx(Es,{text:e.stacktrace,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy Stack Trace"})]})})]}),e.rawLine&&s.jsxs("div",{className:e.stacktrace?"border-t border-inherit":"",children:[s.jsxs("button",{onClick:()=>a(!n),className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-white/30 dark:hover:bg-black/10 ${d}`,children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),"Raw JSON"]}),n&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:`p-3 rounded overflow-x-auto ${u} relative group`,children:[s.jsx(Bc,{json:e.rawLine}),s.jsx(Es,{text:e.rawLine,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy JSON"})]})})]})]})]})}function Hj({panic:e}){const[t,r]=S.useState(!1),[n,a]=S.useState(!1);return s.jsxs("div",{className:"rounded-lg border overflow-hidden bg-red-50 dark:bg-red-500/10 border-red-200 dark:border-red-500/30",children:[s.jsx("div",{className:"px-4 pt-3 text-xs text-red-500 dark:text-red-400/70",children:Br(e.timestamp)}),s.jsx("div",{className:"px-4 py-2",children:s.jsxs("div",{className:"text-sm px-3 py-2 rounded border-l-4 border-red-500 bg-red-50 dark:bg-red-500/10 text-red-800 dark:text-red-200",children:[e.vmName&&`[${e.vmName}] `,e.message]})}),(e.controller||e.reconcileId)&&s.jsxs("div",{className:"px-4 pb-2 text-xs text-red-500 dark:text-red-400/70 flex gap-4",children:[e.controller&&s.jsxs("span",{children:["Controller: ",e.controller]}),e.reconcileId&&s.jsxs("span",{children:["Reconcile ID: ",e.reconcileId]})]}),s.jsxs("div",{className:"border-t border-red-200 dark:border-red-500/30",children:[e.stacktrace&&s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-white/30 dark:hover:bg-black/10 text-red-500 dark:text-red-400/70",children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${t?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),"Stack Trace"]}),t&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"p-3 rounded overflow-x-auto bg-red-50 dark:bg-red-500/10 relative group",children:[s.jsx(sx,{stacktrace:e.stacktrace}),s.jsx(Es,{text:e.stacktrace,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy Stack Trace"})]})})]}),e.rawLines&&e.rawLines.length>0&&s.jsxs("div",{className:e.stacktrace?"border-t border-red-200 dark:border-red-500/30":"",children:[s.jsxs("button",{onClick:()=>a(!n),className:"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-white/30 dark:hover:bg-black/10 text-red-500 dark:text-red-400/70",children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),"Raw JSON"]}),n&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"p-3 rounded overflow-x-auto bg-red-50 dark:bg-red-500/10 space-y-4 relative group",children:[e.rawLines.map((i,l)=>s.jsx(Bc,{json:i},l)),s.jsx(Es,{text:e.rawLines.join(`
`),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",label:"Copy JSON"})]})})]})]})]})}function Uj({scheduleHistory:e}){const[t,r]=S.useState(!1),[n,a]=S.useState(e.length-1),i=e[n];if(!i)return null;const l=Object.entries(i.inflight),o=Object.entries(i.pending),c=l.reduce((u,[,p])=>u+Math.max(p.length,1),0),d=o.reduce((u,[,p])=>u+Math.max(p.length,1),0);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>r(!t),className:"w-full text-left text-sm font-medium text-slate-500 dark:text-gray-400 flex items-center gap-2 hover:text-slate-700 dark:hover:text-gray-300 transition-colors",children:[s.jsx("svg",{className:`w-3 h-3 transition-transform ${t?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsxs("span",{children:["Scheduler (",e.length," snapshot",e.length!==1?"s":"",")"]}),s.jsxs("span",{className:"text-xs text-slate-400 dark:text-gray-500",children:["(",c," in-flight, ",d," pending)"]})]}),t&&s.jsxs("div",{className:"pl-5 space-y-3",children:[e.length>1&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>a(Math.max(0,n-1)),disabled:n===0,className:"p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-gray-400",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400 font-medium tabular-nums",children:[n+1," / ",e.length]}),s.jsx("button",{onClick:()=>a(Math.min(e.length-1,n+1)),disabled:n===e.length-1,className:"p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-gray-400",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4 space-y-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-400",children:Br(i.timestamp)}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),s.jsxs("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:[c," In-flight"]})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsxs("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:[d," Pending"]})]}),i.nextVM&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[s.jsx("svg",{className:"w-3 h-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),s.jsxs("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:["Next: ",i.nextVM.name||i.nextVM.id]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx(Uu,{title:"In-flight",hosts:l,color:"blue",emptyText:"No VMs currently in-flight"}),s.jsx(Uu,{title:"Pending",hosts:o,color:"amber",emptyText:"No VMs pending"})]})]})]})]})}function Uu({title:e,hosts:t,color:r,emptyText:n}){const i={blue:{header:"text-blue-700 dark:text-blue-300",dot:"bg-blue-500",hostBg:"bg-blue-50 dark:bg-blue-900/20",hostBorder:"border-blue-200 dark:border-blue-800",vmBg:"bg-blue-100 dark:bg-blue-800/40",vmText:"text-blue-800 dark:text-blue-200"},amber:{header:"text-amber-700 dark:text-amber-300",dot:"bg-amber-500",hostBg:"bg-amber-50 dark:bg-amber-900/20",hostBorder:"border-amber-200 dark:border-amber-800",vmBg:"bg-amber-100 dark:bg-amber-800/40",vmText:"text-amber-800 dark:text-amber-200"}}[r];return t.length===0?s.jsxs("div",{children:[s.jsx("div",{className:`text-xs font-semibold uppercase tracking-wider mb-2 ${i.header}`,children:e}),s.jsx("div",{className:"text-xs text-slate-400 dark:text-gray-500 italic",children:n})]}):s.jsxs("div",{children:[s.jsx("div",{className:`text-xs font-semibold uppercase tracking-wider mb-2 ${i.header}`,children:e}),s.jsx("div",{className:"space-y-2",children:t.map(([l,o])=>s.jsxs("div",{className:`rounded-lg border ${i.hostBorder} ${i.hostBg} p-2.5`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-slate-500 dark:text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})}),s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-gray-300 truncate",children:l}),s.jsx("span",{className:`ml-auto flex-shrink-0 w-5 h-5 rounded-full ${i.dot} text-white text-[10px] font-bold flex items-center justify-center`,children:o.length||"?"})]}),o.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:o.map((c,d)=>s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-medium ${i.vmBg} ${i.vmText}`,children:[s.jsx("svg",{className:"w-2.5 h-2.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.name||c.id||`VM ${d+1}`]},d))})]},l))})]})}function Gj(e){const t=Object.values(e.vms),r=!!e.spec||t.some(a=>a.fromYaml===!0),n=t.some(a=>!a.fromYaml)||!!e.migration||e.panics.length>0||e.scheduleHistory&&e.scheduleHistory.length>0;return r&&n?"YAML + Logs":r?"YAML":"Logs"}function Kj({plan:e}){var j,N;const{togglePlanExpanded:t,isPlanExpanded:r}=he(),n=yc(),a=Si(),i=bc(),l=jc(),o=`${e.namespace}/${e.name}`,c=r(o),d=S.useMemo(()=>Object.values(e.vms),[e.vms]),u=(j=e.spec)==null?void 0:j.networkMap,p=(N=e.spec)==null?void 0:N.storageMap,f=S.useMemo(()=>{if(u){const y=i.find(C=>C.name===u&&C.namespace===e.namespace);if(y)return y}return i.find(y=>y.ownerPlanName===e.name&&y.namespace===e.namespace)},[i,u,e.name,e.namespace]),h=S.useMemo(()=>{if(p){const y=l.find(C=>C.name===p&&C.namespace===e.namespace);if(y)return y}return l.find(y=>y.ownerPlanName===e.name&&y.namespace===e.namespace)},[l,p,e.name,e.namespace]),v=Cj(e.status),k=a?Gj(e):"",b=e.panics.length>0,g=e.errors.some(y=>y.level==="error"),m=S.useMemo(()=>d.some(y=>y.transferMethod==="StorageOffload"),[d]),x=S.useMemo(()=>{if(e.migrationType!=="Unknown")return e.migrationType;for(const y of d)if(y.migrationType!=="Unknown")return y.migrationType;return"Unknown"},[e.migrationType,d]);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("button",{onClick:()=>t(o),className:"w-full px-5 py-4 flex items-center justify-between text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-900 dark:text-gray-100",children:s.jsx(ii,{text:e.name,searchQuery:n})}),b&&s.jsxs("span",{className:"px-2 py-0.5 rounded text-xs bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.panics.length]}),g&&!b&&s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 flex items-center gap-1",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:s.jsx(ii,{text:e.namespace,searchQuery:n})})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-right text-sm text-slate-500 dark:text-gray-400",children:s.jsxs("div",{children:[d.length," VM",d.length!==1?"s":""]})}),x!=="Unknown"&&s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-400",children:x}),m&&s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400",children:"Storage Offload"}),a&&k&&s.jsx("span",{className:`px-2 py-1 rounded text-xs ${k==="YAML + Logs"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400":k==="Logs"?"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400":"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:k}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ${v}`,children:e.status}),e.archived&&s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold uppercase tracking-wider bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400",children:"Archived"}),s.jsx("svg",{className:`w-5 h-5 text-slate-400 dark:text-gray-400 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),c&&s.jsxs("div",{className:"px-5 pb-5 space-y-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"pt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Migration:"}),s.jsx("span",{className:"ml-2 text-slate-900 dark:text-gray-100",children:e.migration||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"First Seen:"}),s.jsx("span",{className:"ml-2 text-slate-900 dark:text-gray-100",children:ds(e.firstSeen)||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Last Seen:"}),s.jsx("span",{className:"ml-2 text-slate-900 dark:text-gray-100",children:ds(e.lastSeen)||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Conditions:"}),s.jsx("span",{className:"ml-2 text-slate-900 dark:text-gray-100",children:e.conditions.length})]})]}),e.spec&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400",children:"Plan Settings"}),e.spec.description&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-300 italic",children:e.spec.description}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.spec.targetNamespace&&s.jsx(Qr,{label:"Target NS",value:e.spec.targetNamespace}),e.spec.sourceProvider&&s.jsx(Qr,{label:"Source",value:e.spec.sourceProvider}),e.spec.destinationProvider&&s.jsx(Qr,{label:"Destination",value:e.spec.destinationProvider}),e.spec.transferNetwork&&s.jsx(Qr,{label:"Transfer Network",value:e.spec.transferNetwork}),e.spec.targetPowerState&&s.jsx(Qr,{label:"Power State",value:e.spec.targetPowerState}),s.jsx(Rt,{label:"Preflight Inspection",value:e.spec.runPreflightInspection}),s.jsx(Rt,{label:"Compatibility Mode",value:e.spec.useCompatibilityMode}),s.jsx(Rt,{label:"Preserve Static IPs",value:e.spec.preserveStaticIPs}),s.jsx(Rt,{label:"Preserve Cluster CPU",value:e.spec.preserveClusterCPUModel}),s.jsx(Rt,{label:"Skip Guest Conversion",value:e.spec.skipGuestConversion}),s.jsx(Rt,{label:"Shared Disks",value:e.spec.migrateSharedDisks}),s.jsx(Rt,{label:"Delete Conversion Pod",value:e.spec.deleteGuestConversionPod}),s.jsx(Rt,{label:"Delete VM on Failure",value:e.spec.deleteVmOnFailMigration}),s.jsx(Rt,{label:"Legacy Drivers",value:e.spec.installLegacyDrivers})]}),s.jsx(la,{label:"Network Map",kind:"network",mapResource:f,fallbackName:e.spec.networkMap}),s.jsx(la,{label:"Storage Map",kind:"storage",mapResource:h,fallbackName:e.spec.storageMap})]}),(f||h)&&!e.spec&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400",children:"Resource Maps"}),s.jsx(la,{label:"Network Map",kind:"network",mapResource:f,fallbackName:void 0}),s.jsx(la,{label:"Storage Map",kind:"storage",mapResource:h,fallbackName:void 0})]}),e.conditions.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400",children:"Conditions"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.conditions.map((y,C)=>{let M="bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400";return y.status==="True"&&(y.type==="Failed"?M="bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400":y.type==="Canceled"||(y.type==="Ready"||y.type==="Succeeded"||y.type==="Executing"?M="bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400":M="bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400")),s.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs ${M}`,title:y.message,children:[y.type,": ",y.status]},C)})})]}),e.scheduleHistory&&e.scheduleHistory.length>0&&s.jsx(Uj,{scheduleHistory:e.scheduleHistory}),s.jsx(zj,{errors:e.errors,panics:e.panics,defaultOpen:e.status==="Failed"}),d.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400",children:["Virtual Machines (",d.length,")"]}),s.jsx("div",{className:"space-y-3",children:d.map(y=>s.jsx(Vj,{vm:y,planName:e.name},y.id))})]})]})]})}function Qr({label:e,value:t}){return s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300",children:[s.jsxs("span",{className:"font-medium text-slate-500 dark:text-gray-400",children:[e,":"]}),t]})}function Rt({label:e,value:t}){return t===void 0?null:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${t?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-gray-400"}`,children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-green-500":"bg-slate-400 dark:bg-gray-500"}`}),e]})}function la({label:e,kind:t,mapResource:r,fallbackName:n}){return!r&&!n?null:r?s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-gray-400",children:[e,": ",r.name]}),s.jsx("div",{className:"space-y-1",children:r.entries.map((a,i)=>{var d,u;const o=(t==="network"?(u=(d=r.references)==null?void 0:d.find(p=>p.id===a.source.id))==null?void 0:u.name:void 0)||a.source.name||a.source.id||"unknown";let c;if(t==="network"){const p=a.destination;c=p.type==="pod"?"Pod Network":`${p.name||""}${p.type?` (${p.type})`:""}`}else{const p=a.destination;c=p.storageClass||p.name||"default"}return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300 truncate max-w-[200px]",title:o,children:o}),s.jsx("svg",{className:"w-3 h-3 text-slate-400 dark:text-gray-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),s.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 truncate max-w-[200px]",title:c,children:c})]},i)})}),r.conditions.length>0&&r.conditions.some(a=>!(a.type==="Ready"&&a.status==="True"))&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:r.conditions.map((a,i)=>{let l="bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400";return a.status==="True"&&a.type==="Failed"&&(l="bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400"),s.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${l}`,title:a.message,children:[a.type,": ",a.status]},i)})})]}):s.jsx(Qr,{label:e,value:n})}function Gu(){const e=_f(),t=yc(),r=Ef(),n=bc(),a=jc(),i=S.useMemo(()=>{let l=e;if(r==="Archived"?l=l.filter(o=>o.archived):r!=="all"&&(l=l.filter(o=>o.status===r)),t.trim()){const o=t.toLowerCase();l=l.filter(c=>{if(c.name.toLowerCase().includes(o)||c.namespace.toLowerCase().includes(o))return!0;for(const d of Object.values(c.vms))if(d.name.toLowerCase().includes(o))return!0;return!1})}return l},[e,t,r]);return e.length===0?n.length===0&&a.length===0?s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx(bo,{icon:"document",title:"No logs loaded",description:"Upload a log file to get started"})}):s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"space-y-4",children:[n.length>0&&s.jsx(oa,{title:"Network Maps",maps:n,kind:"network"}),a.length>0&&s.jsx(oa,{title:"Storage Maps",maps:a,kind:"storage"})]})}):i.length===0?s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx(bo,{icon:"search",title:"No matching plans",description:"Try adjusting your search or filters"})}):s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"space-y-4",children:[i.map(l=>s.jsx(Kj,{plan:l},`${l.namespace}/${l.name}`)),n.length>0&&s.jsx(oa,{title:"Network Maps",maps:n,kind:"network"}),a.length>0&&s.jsx(oa,{title:"Storage Maps",maps:a,kind:"storage"})]})})}function oa({title:e,maps:t,kind:r}){const[n,a]=S.useState(new Set),i=l=>{a(o=>{const c=new Set(o);return c.has(l)?c.delete(l):c.add(l),c})};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsx("div",{className:"px-5 py-3 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h3",{className:"font-semibold text-sm text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:e})}),s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(l=>{const o=`${l.namespace}/${l.name}`,c=n.has(o);return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>i(o),className:"w-full px-5 py-4 flex items-center justify-between text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-lg text-slate-900 dark:text-gray-100",children:l.name}),s.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:l.namespace})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[l.ownerPlanName&&s.jsxs("span",{className:"px-2 py-1 rounded text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-gray-400",children:["Plan: ",l.ownerPlanName]}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:[l.entries.length," mapping",l.entries.length!==1?"s":""]}),l.conditions.map((d,u)=>{let p="bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400";return d.status==="True"&&d.type==="Ready"?p="bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400":d.status==="True"&&d.type==="Failed"&&(p="bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400"),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ${p}`,title:d.message,children:d.type},u)}),s.jsx("svg",{className:`w-5 h-5 text-slate-400 dark:text-gray-400 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),c&&s.jsxs("div",{className:"px-5 pb-5 space-y-3 border-t border-slate-200 dark:border-slate-700",children:[l.provider&&s.jsxs("div",{className:"pt-3 flex flex-wrap gap-2",children:[l.provider.source&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium text-slate-500 dark:text-gray-400",children:"Source:"}),l.provider.source.name,l.provider.source.namespace?` (${l.provider.source.namespace})`:""]}),l.provider.destination&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium text-slate-500 dark:text-gray-400",children:"Destination:"}),l.provider.destination.name,l.provider.destination.namespace?` (${l.provider.destination.namespace})`:""]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400 mb-2",children:"Mappings"}),s.jsx("div",{className:"space-y-1.5",children:l.entries.map((d,u)=>{var h,v;const p=r==="network"?((v=(h=l.references)==null?void 0:h.find(k=>k.id===d.source.id))==null?void 0:v.name)||d.source.name||d.source.id||"unknown":d.source.name||d.source.id||"unknown";let f;if(r==="network"){const k=d.destination;f=k.type==="pod"?"Pod Network":`${k.name||""}${k.type?` (${k.type})`:""}`}else{const k=d.destination;f=k.storageClass||k.name||"default"}return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"px-2.5 py-1 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300 truncate max-w-[250px]",title:p,children:p}),s.jsx("svg",{className:"w-4 h-4 text-slate-400 dark:text-gray-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),s.jsx("span",{className:"px-2.5 py-1 rounded bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 truncate max-w-[250px]",title:f,children:f})]},u)})})]}),l.conditions.length>0&&s.jsxs("div",{className:"pt-2",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-gray-400 mb-2",children:"Conditions"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.conditions.map((d,u)=>{let p="bg-slate-100 dark:bg-gray-500/20 text-slate-600 dark:text-gray-400";return d.status==="True"&&(d.type==="Failed"?p="bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400":d.type==="Ready"&&(p="bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400")),s.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs ${p}`,title:d.message,children:[d.type,": ",d.status," ",d.message&&` ${d.message}`]},u)})})]})]})]},o)})})]})}const Yj={"plan-created":{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",dot:"bg-blue-500",icon:"text-blue-500"},"vm-started":{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",dot:"bg-green-500",icon:"text-green-500"},"phase-transition":{bg:"bg-cyan-50 dark:bg-cyan-900/20",border:"border-cyan-200 dark:border-cyan-800",dot:"bg-cyan-500",icon:"text-cyan-500"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",dot:"bg-red-500",icon:"text-red-500"},"vm-completed":{bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-200 dark:border-emerald-800",dot:"bg-emerald-500",icon:"text-emerald-500"}},Qj={bg:"bg-slate-50 dark:bg-slate-800/50",border:"border-slate-200 dark:border-slate-700",dot:"bg-slate-400",icon:"text-slate-400"};function Xj({events:e}){const[t,r]=S.useState(!1),[n,a]=S.useState("all"),i=S.useMemo(()=>[...e].sort((c,d)=>new Date(c.timestamp).getTime()-new Date(d.timestamp).getTime()),[e]),l=S.useMemo(()=>{const c=new Set;for(const d of e)c.add(d.type);return Array.from(c).sort()},[e]),o=S.useMemo(()=>n==="all"?i:i.filter(c=>c.type===n),[i,n]);return e.length===0?null:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[s.jsxs("button",{onClick:()=>r(!t),className:"w-full text-left flex items-center gap-3 hover:opacity-80 transition-opacity",children:[s.jsx("svg",{className:`w-4 h-4 text-slate-500 dark:text-gray-400 transition-transform ${t?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6 6L14 10L6 14V6Z"})}),s.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300",children:"Event Timeline"}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["(",e.length," event",e.length!==1?"s":"",")"]})]}),t&&s.jsxs("div",{className:"mt-3 space-y-3",children:[l.length>1&&s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsxs("button",{onClick:()=>a("all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${n==="all"?"bg-indigo-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:["All (",e.length,")"]}),l.map(c=>{const d=e.filter(u=>u.type===c).length;return s.jsxs("button",{onClick:()=>a(c),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${n===c?"bg-indigo-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-100"}`,children:[c.replace(/-/g," ")," (",d,")"]},c)})]}),s.jsx("div",{className:"relative pl-6 border-l-2 border-slate-200 dark:border-slate-700 space-y-3 max-h-96 overflow-y-auto scrollbar-visible",children:o.map((c,d)=>{const u=Yj[c.type]||Qj;return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`absolute -left-[29px] top-3 w-3 h-3 rounded-full ${u.dot} border-2 border-white dark:border-slate-900`}),s.jsx("div",{className:`rounded-lg border ${u.border} ${u.bg} px-4 py-2.5`,children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[s.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${u.icon}`,children:c.type.replace(/-/g," ")}),c.planName&&s.jsxs("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-gray-300",children:[c.namespace,"/",c.planName]}),c.vmName&&s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:c.vmName})]}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-gray-300 mt-0.5",children:c.description}),c.phase&&s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["Phase: ",c.phase]})]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400 whitespace-nowrap flex-shrink-0",children:_e(c.timestamp)})]})})]},d)})})]})]})}const ax=S.createContext(null);function Je({line:e,label:t}){const r=$e(a=>a.setHighlightedLine),n=S.useContext(ax);return s.jsx("button",{onClick:a=>{a.stopPropagation(),r(e),n==null||n()},title:`Go to line ${e+1} in raw log`,className:"font-mono text-[10px] text-slate-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 hover:underline cursor-pointer transition-colors",children:t??`L${e+1}`})}const _i=S.createContext({focusedPath:null,focusedVersion:0,navigateToIsoFile:()=>{}}),Ei=new Set(["is_file","is_dir","is_symlink","is_blockdev","is_chardev","exists","stat","lstat"]),qj=new Set([...Ei,"download","upload","copy_in","copy_out","read_file","read_lines","cat","write","write_file","write_append","mkdir","mkdir_p","rm","rm_rf","rmdir","chmod","chown","ln_sf","ln_s","link","cp","cp_a","mv","rename"]),Zj=new Set(["mount","mount_ro","mount_options"]),ix=new Set(["aug_get","aug_set","aug_rm","aug_match","aug_clear","aug_ls"]),Jj=new Set(["fstab","hostname","config","grub","passwd","group","shadow","hosts","resolv.conf","nsswitch.conf","crypttab","mtab","shells","services","protocols","exports","sudoers","crontab","profile","environment","locale","timezone","adjtime"]),ew=/\.(conf|cfg|sh|ini|rules|repo|list|cnf|aug|mount|service|timer|socket|xml|json|yaml|yml|properties|env|d)$/;function lx(e){if(!ix.has(e.name))return!1;const t=e.args;return t.includes("/augeas/")?!1:!!(t.includes("/files/")||t.includes("/file/"))}function tw(e){let t=e;if(t.startsWith("/files/")||t.startsWith('/files"')||t==="/files"?t=t.slice(6):(t.startsWith("/file/")||t.startsWith('/file"')||t==="/file")&&(t=t.slice(5)),!t.startsWith("/"))return null;const r=t.split("/").filter(Boolean);if(r.length===0)return null;let n=r.length;for(let l=0;l<r.length;l++){const o=r[l];if(/^\d+$/.test(o)||o.includes("[")){n=l;break}if(ew.test(o)){n=l+1;break}if(Jj.has(o)){n=l+1;break}if(o===o.toUpperCase()&&o.length>1&&/^[A-Z_]+$/.test(o)){n=l;break}}const a="/"+r.slice(0,n).join("/"),i=r.slice(n).join("/");return{filePath:a,key:i}}function ox(e){return Ei.has(e.api)?e.api==="stat"||e.api==="lstat"?e.result!==""&&e.result!=="0"&&!e.result.startsWith("error"):e.result==="1"||e.result==="true":!0}function rw(e){for(const t of e.guestCommands)if(t.command==="mount"&&t.args.length>0)return t.args[t.args.length-1].replace(/\/+$/,"")||"/";return""}function sw(e){const t=[];let r="",n="",a="",i=[],l;function o(d){if(r){const u=`${r}::${n}`,p=(c.get(u)??0)+1;c.set(u,p),t.push({device:r,mountpoint:n,chrootPath:a,checks:[...i],mountLineNumber:l,endLineNumber:d,pass:p}),i=[]}}const c=new Map;for(const d of e)if(Zj.has(d.name)){let u="",p="";const f=[...d.args.matchAll(/"([^"]*)"/g)].map(h=>h[1]);d.name==="mount_options"&&f.length>=3?(u=f[1],p=f[2]):f.length>=2&&(u=f[0],p=f[1]),u&&((u!==r||p!==n)&&o(d.lineNumber),r=u,n=p,a=rw(d),l=d.lineNumber)}else d.name==="umount_all"||d.name==="umount"?(o(d.lineNumber),r="",n="",a="",l=void 0):(Ei.has(d.name)||lx(d))&&i.push(d);return o(),i.length>0&&t.push({device:"Guest",mountpoint:"/",chrootPath:"",checks:[...i],pass:1}),t}function nw(e){const t=new Map;for(const n of e)if(n.handle&&n.handle!=="v2v"&&Ei.has(n.name)){const a=t.get(n.handle)||[];a.push(n),t.set(n.handle,a)}const r=[];for(const[n,a]of t)a.length>0&&r.push({device:n,mountpoint:"/",chrootPath:"",checks:a,pass:1});return r}function ca(e,t){const r=t.replace(/^\/+/,"").split("/").filter(Boolean);let n=e,a="/";for(const i of r)a=a==="/"?`/${i}`:`${a}/${i}`,n.children.has(i)||n.children.set(i,{name:i,path:a,children:new Map,checks:[],ops:[]}),n=n.children.get(i);return n}function wo(e,t,r){const n={name:"/",path:"/",children:new Map,checks:[],ops:[]};for(const a of e){if(ix.has(a.name)){const o=a.args.match(/^"([^"]+)"/);if(!o)continue;const c=tw(o[1]);if(!c)continue;const d=a.name.replace("aug_","");let u=a.result;if(d==="set"){const f=[...a.args.matchAll(/"([^"]*)"/g)].map(h=>h[1]);u=f.length>=2?f[1]:""}else d==="clear"&&(u="");ca(n,c.filePath).ops.push({type:"augeas",augOp:d,augKey:c.key,augValue:u,lineNumber:a.lineNumber,origin:"guest",source:"",sizeBytes:null,content:null,contentTruncated:!1});continue}const i=a.args.match(/^"([^"]+)"/);if(!i)continue;ca(n,i[1]).checks.push({api:a.name,result:a.result,lineNumber:a.lineNumber})}for(const a of t)ca(n,a.destination).ops.push({type:"copy",origin:a.origin,source:a.source,sizeBytes:a.sizeBytes,content:a.content,contentTruncated:a.contentTruncated,lineNumber:a.lineNumber});if(r)for(const a of r)ca(n,a.path).ops.push({type:"relabel",fromContext:a.fromContext,toContext:a.toContext,origin:"guest",source:"",sizeBytes:null,content:null,contentTruncated:!1,lineNumber:0});return n}function aw(e){return e.type==="copy"&&(e.origin==="virtio_win"||e.origin==="virt-tools")}function iw(e){return e.type==="copy"&&(e.origin==="script"||e.origin==="guest")}function Pn(e){let t=0,r=0,n=0,a=0,i=0,l=0,o=0;if(e.children.size===0&&(e.checks.length>0||e.ops.length>0)){t=1;const d=e.ops.filter(p=>p.type==="augeas"),u=e.ops.filter(p=>p.type==="relabel");e.ops.some(aw)&&(a=1),e.ops.some(iw)&&(i=1),d.length>0&&(l=d.length),u.length>0&&(o=u.length),e.checks.length>0&&(e.checks.some(ox)?r=1:n=1)}for(const d of e.children.values()){const u=Pn(d);t+=u.totalEntries,r+=u.found,n+=u.notFound,a+=u.copies,i+=u.scripts,l+=u.augeas,o+=u.relabels}return{totalEntries:t,found:r,notFound:n,copies:a,scripts:i,augeas:l,relabels:o}}function on(e){return e.children.size>0}function lw(e,t){const r=new Map;if(e)for(const n of e)r.set(n.device,`${n.letter}:`);if(t)for(const n of t)!r.has(n.device)&&n.mountpoint!=="none"&&r.set(n.device,n.mountpoint);return r}function ow(e,t,r){const n=t.get(e);return n?{primary:n,secondary:e,icon:""}:r&&/\bESP[_/]/i.test(r)?{primary:"EFI System Partition",secondary:e,icon:""}:{primary:e,secondary:"",icon:""}}function cw(e,t){return e==="virtio_win"?{primary:"VirtIO Win ISO",secondary:t||"",icon:""}:{primary:e,secondary:"",icon:""}}function cx(e){const t=new Set,r=[];for(const n of e){const a=`${n.source}${n.destination}`;t.has(a)||(t.add(a),r.push(n))}return r}function q(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`}function Er(e){if(e<60)return`${e.toFixed(1)}s`;const t=Math.floor(e/60),r=e%60;if(t<60)return`${t}m ${r.toFixed(0)}s`;const n=Math.floor(t/60),a=t%60;return`${n}h ${a}m`}function dw(e){const t=e/1024;return t>=1024?`${(t/1024).toFixed(1)} GB`:`${Math.round(t)} MB`}function Ku(e){return e>=1e6?`${(e/1e6).toFixed(2)}s`:e>=1e3?`${(e/1e3).toFixed(1)}ms`:`${e}s`}function H({title:e,count:t,badge:r}){const n=s.jsxs("h4",{className:`text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-gray-400${r?"":" mb-2"}`,children:[e,t!=null&&s.jsxs("span",{className:"ml-1.5 text-[10px] font-normal text-slate-400 dark:text-gray-500",children:["(",t,")"]})]});return r?s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n,s.jsx("span",{className:"px-1.5 py-0 rounded-full bg-slate-200 dark:bg-slate-700 text-[10px] text-slate-600 dark:text-gray-300",children:r})]}):n}function xl({label:e,value:t}){return s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-slate-100 dark:bg-slate-800 text-xs",children:[s.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:[e,":"]}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:t})]})}const Yu={green:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",red:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",slate:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300",purple:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",amber:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"};function se({children:e,color:t,variant:r="default"}){const n=r==="pill"?`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Yu[t]}`:`inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium ${Yu[t]}`;return s.jsx("span",{className:n,children:e})}function Vc({fsType:e}){if(!e||e==="unknown")return s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 italic",children:"unknown"});const t=dx(e);return s.jsx("span",{className:`px-1.5 py-0.5 rounded font-mono text-[10px] ${t}`,children:e})}function dx(e){switch(e){case"xfs":return"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300";case"ext4":case"ext3":case"ext2":return"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300";case"vfat":case"fat16":case"fat32":return"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300";case"ntfs":return"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300";case"swap":return"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300";case"LVM2_member":return"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300";default:return"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-300"}}function uw({app:e}){const[t,r]=S.useState(!1),n=e.displayName||e.name,a=e.installPath||e.description||e.arch;return s.jsxs(s.Fragment,{children:[s.jsxs("tr",{onClick:a?()=>r(!t):void 0,className:`${a?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50":""} transition-colors`,children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-800 dark:text-gray-200",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[a&&s.jsx(Te,{expanded:t,className:"text-[8px] text-slate-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:n})]})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-400",children:e.version}),s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-500 hidden md:table-cell truncate max-w-[200px]",children:e.publisher})]}),t&&a&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/30",children:s.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-[11px] pl-4",children:[e.installPath&&s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Path: "}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-400",children:e.installPath})]}),e.arch&&s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Arch: "}),s.jsx("span",{className:"text-slate-600 dark:text-gray-400",children:e.arch})]}),e.description&&s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Description: "}),s.jsx("span",{className:"text-slate-600 dark:text-gray-400",children:e.description})]}),e.name&&e.name!==e.displayName&&s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"ID: "}),s.jsx("span",{className:"font-mono text-slate-500 dark:text-gray-500",children:e.name})]})]})})})]})}function ux({origin:e}){const t={virtio_win:"bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800","virt-tools":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800",script:"bg-teal-50 dark:bg-teal-900/20 text-teal-700 dark:text-teal-400 border-teal-200 dark:border-teal-800",guest:"bg-sky-50 dark:bg-sky-900/20 text-sky-700 dark:text-sky-400 border-sky-200 dark:border-sky-800"},r={virtio_win:"VirtIO","virt-tools":"Tool",script:"Script",guest:"Guest"};return s.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-semibold border leading-tight ${t[e]}`,children:r[e]})}function px(e,t){if(!t)return e;const r=[],n=e.toLowerCase(),a=t.toLowerCase();let i=0;for(;;){const l=n.indexOf(a,i);if(l===-1)break;l>i&&r.push(e.slice(i,l)),r.push(s.jsx("mark",{className:"bg-yellow-300 dark:bg-yellow-700 text-inherit rounded-sm px-0.5",children:e.slice(l,l+t.length)},l)),i=l+t.length}return i<e.length&&r.push(e.slice(i)),r.length>0?s.jsx(s.Fragment,{children:r}):e}function pw({op:e}){const{navigateToIsoFile:t}=S.useContext(_i),r=e.origin==="virtio_win",n=r?e.source.replace(/^\/\/\//,"ISO: /"):e.source;return s.jsxs("div",{className:"flex items-baseline gap-2 px-3 py-1.5 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 flex-shrink-0",children:"from"}),s.jsx(ux,{origin:e.origin}),r?s.jsx("button",{onClick:a=>{a.stopPropagation(),t(e.source)},className:"font-mono text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 hover:underline cursor-pointer truncate",title:`Navigate to ${e.source.replace(/^\/+/,"")} in VirtIO Win ISO tree`,children:n}):s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 truncate",title:e.source,children:n}),e.sizeBytes!==null&&s.jsx("span",{className:"text-green-600 dark:text-green-400 flex-shrink-0 ml-auto",children:q(e.sizeBytes)}),s.jsx("span",{className:"flex-shrink-0",children:s.jsx(Je,{line:e.lineNumber})})]})}const Qu={get:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",set:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",rm:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",match:"bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-400",clear:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",ls:"bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-400"};function fw({op:e}){const t=(e.augOp||"get").toUpperCase(),r=Qu[e.augOp||"get"]||Qu.get,n=e.augValue||"",a=n.length>120?n.slice(0,117)+"...":n;return s.jsxs("div",{className:"flex items-baseline gap-2 px-3 py-1 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[s.jsx("span",{className:`text-[8px] px-1.5 py-0 rounded font-bold flex-shrink-0 ${r}`,children:t}),e.augKey&&s.jsx("span",{className:"font-mono text-slate-500 dark:text-gray-400 flex-shrink-0",children:e.augKey}),n&&(e.augOp==="get"||e.augOp==="set")&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-600 flex-shrink-0",children:"="}),s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-300 truncate",title:n,children:a})]}),(e.augOp==="match"||e.augOp==="ls")&&n&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-600 flex-shrink-0",children:""}),s.jsx("span",{className:"font-mono text-slate-500 dark:text-gray-400 truncate",title:n,children:a})]}),e.augOp==="clear"&&s.jsx("span",{className:"text-slate-400 dark:text-gray-500 italic text-[10px]",children:"(cleared)"}),s.jsx("span",{className:"flex-shrink-0 ml-auto",children:s.jsx(Je,{line:e.lineNumber})})]})}function mw({fromContext:e,toContext:t}){const r=e==="<no context>",n=e.split(":"),a=t.split(":"),i=!r&&n[0]!==a[0],l=!r&&(n[2]||"")!==(a[2]||""),o=r?"text-purple-600 dark:text-purple-400":i?"text-blue-600 dark:text-blue-400":l?"text-amber-600 dark:text-amber-400":"text-slate-500 dark:text-gray-400";return s.jsx("span",{className:"inline-flex items-center gap-1 ml-1 text-[9px] font-mono overflow-hidden",children:r?s.jsx("span",{className:o,children:t}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-600 line-through truncate max-w-[180px]",title:e,children:e}),s.jsx("span",{className:"text-slate-300 dark:text-gray-600 flex-shrink-0",children:""}),s.jsx("span",{className:`${o} truncate max-w-[180px]`,title:t,children:t})]})})}function fx({node:e,depth:t}){var L,I;const r=on(e),[n,a]=S.useState(!1),[i,l]=S.useState(!1),o=S.useMemo(()=>Pn(e),[e]),c=S.useRef(null),{focusedPath:d,focusedVersion:u}=S.useContext(_i),p=d!==null&&r&&(d.startsWith(e.path+"/")||d===e.path),f=d!==null&&d===e.path&&!r;S.useEffect(()=>{p&&a(!0)},[p,u]),S.useEffect(()=>{f&&c.current&&requestAnimationFrame(()=>{var E;(E=c.current)==null||E.scrollIntoView({behavior:"smooth",block:"center"})})},[f,u]);const h=S.useCallback(()=>a(E=>!E),[]),v=e.checks.length>0,k=e.ops.length>0,b=e.ops.filter(E=>E.type==="copy"),g=e.ops.filter(E=>E.type==="augeas"),m=e.ops.filter(E=>E.type==="relabel"),x=b.length>0,j=g.length>0,N=m.length>0,y=e.checks.some(ox),C=b.find(E=>E.content!==null),M=!r&&(x||j),P=S.useMemo(()=>[...e.children.values()].sort((E,A)=>{const R=on(E),V=on(A);return R!==V?R?-1:1:E.name.localeCompare(A.name)}),[e]);let w=null,_=null;return r||(N&&!x&&!j&&!v?w=s.jsx("span",{className:"text-indigo-500",children:""}):j&&!x&&!v&&!N?w=s.jsx("span",{className:"text-violet-500",children:""}):k&&v?(w=s.jsx("span",{className:"text-blue-500",children:""}),_=s.jsx("span",{className:`text-[9px] flex-shrink-0 ${y?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"}`,children:y?"":""})):k?w=s.jsx("span",{className:"text-blue-500",children:""}):v&&(w=s.jsx("span",{className:y?"text-green-500":"text-red-400 opacity-50",children:""}),_=s.jsx("span",{className:`text-[9px] flex-shrink-0 ${y?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"}`,children:y?"":""}))),s.jsxs("div",{ref:c,children:[s.jsxs("div",{role:r||M?"button":void 0,tabIndex:r||M?0:void 0,"aria-expanded":r?n:M?i:void 0,onClick:r?h:M?()=>l(!i):void 0,onKeyDown:r||M?E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),r?h():l(A=>!A))}:void 0,style:{paddingLeft:`${t*16+4}px`},className:`
          flex items-center gap-1.5 py-0.5 rounded transition-colors duration-700
          ${r||M?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800":""}
          ${f?"bg-purple-100 dark:bg-purple-900/40 ring-1 ring-purple-400 dark:ring-purple-600":""}
        `,children:[r?s.jsx(Te,{expanded:n,className:"text-[9px] text-indigo-500 dark:text-indigo-400 w-3 text-center flex-shrink-0"}):M?s.jsx(Te,{expanded:i,className:"text-[9px] text-slate-400 w-3 text-center flex-shrink-0"}):s.jsx("span",{className:"w-3 flex-shrink-0"}),s.jsx("span",{className:"flex-shrink-0 text-[10px]",children:r?s.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:n?"":""}):w}),s.jsxs("span",{className:`flex-shrink-0 ${r?"text-slate-800 dark:text-gray-200 font-medium":v&&!y&&!k?"text-slate-400 dark:text-gray-600 line-through":"text-slate-700 dark:text-gray-300"}`,children:[e.name,r&&"/"]}),!r&&_,!r&&v&&e.checks.some(E=>E.api!=="is_file")&&s.jsx("span",{className:"text-[9px] text-slate-400 dark:text-gray-600",children:(L=e.checks.find(E=>E.api!=="is_file"))==null?void 0:L.api}),!r&&x&&b.map((E,A)=>s.jsx(ux,{origin:E.origin},A)),!r&&j&&(()=>{const E=g.filter(D=>D.augOp==="get").length,A=g.filter(D=>D.augOp==="set").length,R=g.filter(D=>D.augOp==="rm").length,V=g.filter(D=>D.augOp==="match").length,T=g.filter(D=>D.augOp==="clear").length,$=g.filter(D=>D.augOp==="ls").length;return s.jsxs(s.Fragment,{children:[E>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 flex-shrink-0",children:[E," GET"]}),A>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 flex-shrink-0",children:[A," SET"]}),T>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 flex-shrink-0",children:[T," CLEAR"]}),R>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 flex-shrink-0",children:[R," RM"]}),V>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-400 flex-shrink-0",children:[V," MATCH"]}),$>0&&s.jsxs("span",{className:"text-[8px] px-1 py-0 rounded bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-400 flex-shrink-0",children:[$," LS"]})]})})(),!r&&N&&m.length===1&&s.jsx(mw,{fromContext:m[0].fromContext??"",toContext:m[0].toContext??""}),!r&&x&&(()=>{var A;const E=(A=b.find(R=>R.sizeBytes!==null))==null?void 0:A.sizeBytes;return E!=null?s.jsx("span",{className:"text-[9px] text-green-600 dark:text-green-400 flex-shrink-0",children:q(E)}):null})(),!r&&(v||k)&&s.jsx(Je,{line:((I=e.checks[0]||e.ops[0])==null?void 0:I.lineNumber)??0}),r&&s.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-gray-500 ml-1",children:[o.totalEntries," ",o.totalEntries!==1?"entries":"entry",o.found>0&&s.jsxs("span",{className:"text-green-600 dark:text-green-400 ml-1",children:[o.found," found"]}),o.notFound>0&&s.jsxs("span",{className:"text-red-500 dark:text-red-400 ml-1",children:[o.notFound," missing"]}),o.copies>0&&s.jsxs("span",{className:"text-blue-500 dark:text-blue-400 ml-1",children:[o.copies," copied"]}),o.scripts>0&&s.jsxs("span",{className:"text-teal-500 dark:text-teal-400 ml-1",children:[o.scripts," ",o.scripts===1?"script":"scripts"]}),o.augeas>0&&s.jsxs("span",{className:"text-violet-500 dark:text-violet-400 ml-1",children:[o.augeas," config ops"]}),o.relabels>0&&s.jsxs("span",{className:"text-indigo-500 dark:text-indigo-400 ml-1",children:[o.relabels," relabelled"]})]})]}),!r&&i&&(x||j)&&s.jsx("div",{style:{paddingLeft:`${t*16+24}px`},className:"py-1 pr-2",children:s.jsxs("div",{className:"rounded-md border border-slate-200 dark:border-slate-700 overflow-hidden text-[11px]",children:[b.map((E,A)=>s.jsx(pw,{op:E},`copy-${A}`)),C&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-gray-300",children:"Content"}),C.contentTruncated&&s.jsxs("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 italic",children:["truncated",C.sizeBytes!==null&&` (full: ${q(C.sizeBytes)})`]})]}),s.jsx("pre",{className:"px-3 py-2 leading-relaxed font-mono text-slate-800 dark:text-gray-200 bg-white dark:bg-slate-900 overflow-x-auto max-h-[300px] overflow-y-auto whitespace-pre-wrap break-words",children:C.content})]}),j&&s.jsx("div",{className:x||C?"border-t border-slate-200 dark:border-slate-700":"",children:g.map((E,A)=>s.jsx(fw,{op:E},`aug-${A}`))})]})}),r&&n&&s.jsx("div",{children:P.map(E=>s.jsx(fx,{node:E,depth:t+1},E.path))})]})}function No({checks:e,fileCopies:t,relabeledFiles:r,primaryLabel:n,secondaryLabel:a,passLabel:i,icon:l="",isIsoTree:o=!1,defaultExpanded:c=!1,mountLineNumber:d}){const u=Si(),[p,f]=S.useState(c),h=S.useMemo(()=>wo(e,t,r),[e,t,r]),v=S.useMemo(()=>Pn(h),[h]),{focusedPath:k,focusedVersion:b}=S.useContext(_i);return S.useEffect(()=>{o&&k&&f(!0)},[o,k,b]),v.totalEntries===0?null:s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{onClick:()=>f(!p),role:"button",tabIndex:0,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),f(!p))},"aria-expanded":p,className:"w-full flex items-center gap-3 px-4 py-2.5 bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-left cursor-pointer",children:[s.jsx(Te,{expanded:p,className:"text-[10px] text-indigo-500 dark:text-indigo-400 flex-shrink-0"}),s.jsx("span",{className:"text-sm",children:l}),s.jsx("span",{className:"text-xs font-semibold text-slate-800 dark:text-gray-200",children:n}),a&&s.jsx("span",{className:"text-[10px] font-mono text-slate-400 dark:text-gray-500",children:a}),u&&i&&s.jsx("span",{className:"text-[10px] font-medium text-amber-600 dark:text-amber-400",children:i}),s.jsxs("span",{className:"ml-auto flex items-center gap-3 text-[10px]",children:[s.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:[v.totalEntries.toLocaleString()," ",v.totalEntries===1?"entry":"entries"]}),v.found>0&&s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[v.found.toLocaleString()," found"]}),v.notFound>0&&s.jsxs("span",{className:"text-red-500 dark:text-red-400",children:[v.notFound.toLocaleString()," missing"]}),v.copies>0&&s.jsxs("span",{className:"text-blue-500 dark:text-blue-400",children:[v.copies.toLocaleString()," copied"]}),v.scripts>0&&s.jsxs("span",{className:"text-teal-500 dark:text-teal-400",children:[v.scripts.toLocaleString()," ",v.scripts===1?"script":"scripts"]}),v.augeas>0&&s.jsxs("span",{className:"text-violet-500 dark:text-violet-400",children:[v.augeas.toLocaleString()," config ops"]}),v.relabels>0&&s.jsxs("span",{className:"text-indigo-500 dark:text-indigo-400",children:[v.relabels.toLocaleString()," relabelled"]}),d!==void 0&&s.jsx("span",{onClick:g=>g.stopPropagation(),children:s.jsx(Je,{line:d})})]})]}),p&&s.jsxs("div",{className:"max-h-[500px] overflow-y-auto font-mono text-[11px] py-1 px-2",children:[[...h.children.values()].sort((g,m)=>{const x=on(g),j=on(m);return x!==j?x?-1:1:g.name.localeCompare(m.name)}).map(g=>s.jsx(fx,{node:g,depth:0},g.path)),h.children.size===0&&s.jsx("div",{className:"text-[11px] text-slate-400 dark:text-gray-500 italic px-2 py-2",children:"No file tree entries."})]})]})}function zc({apiCalls:e,fileCopies:t,driveMappings:r,fstab:n,virtioWinIsoPath:a,defaultExpandGuest:i=!1}){const l=S.useMemo(()=>cx(t||[]),[t]),[o,c]=S.useState(null),[d,u]=S.useState(0),p=S.useCallback(P=>{const w="/"+P.replace(/^\/+/,"");c(w),u(_=>_+1)},[]),f=S.useMemo(()=>({focusedPath:o,focusedVersion:d,navigateToIsoFile:p}),[o,d,p]),h=S.useMemo(()=>e.filter(P=>P.handle==="v2v"||P.handle===""),[e]),v=S.useMemo(()=>sw(h),[h]),k=S.useMemo(()=>nw(e),[e]),b=S.useMemo(()=>l.filter(P=>P.origin!=="virtio_win"||P.destination.startsWith("/")),[l]),g=S.useMemo(()=>lw(r,n),[r,n]),m=S.useMemo(()=>b.length===0||v.find(w=>w.mountpoint==="/")||v[0]?v:[...v,{device:"Guest",mountpoint:"/",chrootPath:"",checks:[],pass:1}],[v,b.length]),x=S.useMemo(()=>{const P=[],w=new Map;for(const _ of m)w.has(_.device)||(P.push(_.device),w.set(_.device,[])),w.get(_.device).push(_);return P.map(_=>{const L=w.get(_);return{device:_,mountpoint:L[0].mountpoint,passes:L,allChecks:L.flatMap(I=>I.checks),firstMountLineNumber:L[0].mountLineNumber}})},[m]),j=S.useMemo(()=>x.map(P=>{const w=b.filter(_=>{if(!P.passes.some(R=>R.mountLineNumber===void 0?!0:!(_.lineNumber<R.mountLineNumber||R.endLineNumber!==void 0&&_.lineNumber>=R.endLineNumber)))return!1;const I=_.destination;let E="",A="";for(const R of m){if(R.mountLineNumber!==void 0&&(_.lineNumber<R.mountLineNumber||R.endLineNumber!==void 0&&_.lineNumber>=R.endLineNumber))continue;const V=R.mountpoint;(I===V||I.startsWith(V==="/"?"/":V+"/"))&&V.length>E.length&&(E=V,A=R.device)}return E?A===P.device:P===x[0]});return{merged:P,copies:w}}),[x,b,m]),N=S.useMemo(()=>{let P=0,w=0,_=0,L=0,I=0,E=0,A=0;for(const{merged:R,copies:V}of j){const T=wo(R.allChecks,V),$=Pn(T);P+=$.totalEntries,w+=$.found,_+=$.notFound,L+=$.copies,I+=$.scripts,E+=$.augeas,A+=$.relabels}for(const R of k){const V=wo(R.checks,[]),T=Pn(V);P+=T.totalEntries,w+=T.found,_+=T.notFound,L+=T.copies,I+=T.scripts,E+=T.augeas,A+=T.relabels}return{totalEntries:P,found:w,notFound:_,copies:L,scripts:I,augeas:E,relabels:A}},[j,k]),y=new Set([...m.map(P=>P.device),...k.map(P=>P.device)]).size,C=N.totalEntries;if(C===0)return null;const M=N.found+N.notFound;return s.jsx(_i.Provider,{value:f,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500 dark:text-gray-400",children:[s.jsxs("span",{children:[C.toLocaleString()," file operations across ",y," device",y!==1?"s":""]}),M>0&&s.jsxs("span",{className:"text-indigo-500 dark:text-indigo-400",children:[M.toLocaleString()," checks"]}),N.copies>0&&s.jsxs("span",{className:"text-blue-500 dark:text-blue-400",children:[N.copies.toLocaleString()," copied"]}),N.scripts>0&&s.jsxs("span",{className:"text-teal-500 dark:text-teal-400",children:[N.scripts.toLocaleString()," ",N.scripts===1?"script":"scripts"]}),N.augeas>0&&s.jsxs("span",{className:"text-violet-500 dark:text-violet-400",children:[N.augeas.toLocaleString()," config ops"]}),N.relabels>0&&s.jsxs("span",{className:"text-indigo-500 dark:text-indigo-400",children:[N.relabels.toLocaleString()," relabelled"]})]}),j.map(({merged:P,copies:w})=>{const _=ow(P.device,g,P.mountpoint),L=P.passes.length>1?`(${P.passes.length} passes)`:"";return s.jsx(No,{checks:P.allChecks,fileCopies:w,primaryLabel:_.primary,secondaryLabel:_.secondary,passLabel:L||void 0,icon:_.icon,defaultExpanded:i,mountLineNumber:P.firstMountLineNumber},`device::${P.device}`)}),k.map(P=>{const w=cw(P.device,a);return s.jsx(No,{checks:P.checks,fileCopies:[],primaryLabel:w.primary,secondaryLabel:w.secondary,icon:w.icon,isIsoTree:!0},`handle::${P.device}`)})]})})}function mx({apiCalls:e,fileCopies:t,relabeledFiles:r}){const n=S.useMemo(()=>e.filter(i=>qj.has(i.name)||lx(i)),[e]),a=S.useMemo(()=>cx(t||[]),[t]);return n.length===0&&a.length===0&&(!r||r.length===0)?null:s.jsx(No,{checks:n,fileCopies:a,relabeledFiles:r,primaryLabel:"File Operations",secondaryLabel:"",icon:"",defaultExpanded:!0})}function xx(e){const t=new Map;for(const r of e){let n=t.get(r.hivePath);n||(n={hivePath:r.hivePath,accesses:[],readCount:0,writeCount:0,totalValues:0},t.set(r.hivePath,n)),n.accesses.push({keyPath:r.keyPath,mode:r.mode,openMode:r.openMode,failedChild:r.failedChild,values:r.values,lineNumber:r.lineNumber}),r.mode==="write"?n.writeCount++:n.readCount++,n.totalValues+=r.values.length}return[...t.values()].sort((r,n)=>r.hivePath.localeCompare(n.hivePath))}function hx({group:e}){const[t,r]=S.useState(!1),n=e.hivePath.split("/").pop()||e.hivePath;return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-3 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800/70 transition-colors text-left",children:[s.jsx(Te,{expanded:t,className:"text-[9px] text-slate-400"}),s.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-gray-200",children:n}),s.jsx("span",{className:"text-[10px] font-mono text-slate-400 dark:text-gray-500 truncate flex-1 min-w-0",children:e.hivePath}),s.jsxs("span",{className:"flex items-center gap-2 flex-shrink-0 text-xs",children:[e.readCount>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.readCount]}),e.writeCount>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.writeCount]}),e.accesses.length>0&&s.jsx(Je,{line:e.accesses[0].lineNumber})]})]}),t&&s.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.accesses.map((a,i)=>s.jsx(xw,{access:a},i))})]})}function xw({access:e}){const t=e.mode==="write",r=e.values.length>0,[n,a]=S.useState(!1),i=e.openMode!==e.mode;return s.jsxs("div",{className:t?"bg-orange-50/40 dark:bg-orange-900/5":"",children:[s.jsxs("div",{onClick:r?()=>a(!n):void 0,className:`flex items-baseline gap-2 px-3 py-1.5 text-xs ${r?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/30":""} transition-colors`,children:[r?s.jsx(Te,{expanded:n,className:"text-[8px] text-slate-400 flex-shrink-0 w-2"}):s.jsx("span",{className:"w-2 flex-shrink-0"}),e.mode==="read"?s.jsx("span",{className:"flex-shrink-0 w-11 text-center px-1 py-0.5 rounded text-[10px] font-medium bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:"READ"}):s.jsx("span",{className:"flex-shrink-0 w-11 text-center px-1 py-0.5 rounded text-[10px] font-medium bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:"WRITE"}),i&&s.jsxs("span",{className:"flex-shrink-0 text-[9px] italic text-slate-400 dark:text-gray-500",title:`Hive opened as ${e.openMode} but no ${e.openMode==="write"?"writes":"reads"} performed`,children:["(opened ",e.openMode,")"]}),s.jsxs("span",{className:`font-mono truncate flex-1 min-w-0 ${t?"text-orange-800 dark:text-orange-200":"text-slate-700 dark:text-gray-300"}`,children:[e.keyPath||s.jsx("span",{className:"italic text-slate-400 dark:text-gray-500",children:"(root)"}),e.failedChild&&s.jsxs(s.Fragment,{children:["\\",s.jsx("span",{className:"text-red-500 dark:text-red-400 line-through",children:e.failedChild}),s.jsx("span",{className:"text-red-400 dark:text-red-500 text-[9px] ml-1",children:"not found"})]})]}),r&&s.jsxs("span",{className:`flex-shrink-0 text-[10px] ${t?"text-orange-500 dark:text-orange-400":"text-slate-400 dark:text-gray-500"}`,children:[e.values.length," value",e.values.length!==1?"s":""]}),s.jsx("span",{className:"flex-shrink-0",children:s.jsx(Je,{line:e.lineNumber})})]}),n&&r&&s.jsx("div",{className:`ml-6 mr-3 mb-2 border-l-2 ${t?"border-orange-300 dark:border-orange-700":"border-slate-200 dark:border-slate-700"}`,children:s.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-slate-400 dark:text-gray-500 text-left",children:[s.jsx("th",{className:"pl-3 pr-2 py-1 font-medium w-[140px] md:w-[180px]",children:"Name"}),s.jsx("th",{className:"px-2 py-1 font-medium",children:"Value"}),s.jsx("th",{className:"px-2 py-1 font-medium w-[50px]"})]})}),s.jsx("tbody",{children:e.values.map((l,o)=>s.jsxs("tr",{className:`border-t ${t?"border-orange-100 dark:border-orange-900/30":"border-slate-100 dark:border-slate-800/50"}`,children:[s.jsx("td",{className:`pl-3 pr-2 py-0.5 font-mono align-top whitespace-nowrap ${t?"text-orange-700 dark:text-orange-300":"text-slate-600 dark:text-gray-400"}`,children:l.name||s.jsx("span",{className:"italic text-slate-400",children:"(default)"})}),s.jsx("td",{className:`px-2 py-0.5 font-mono break-all ${t?"text-orange-900 dark:text-orange-100":"text-slate-800 dark:text-gray-200"}`,children:l.value||s.jsx("span",{className:"italic text-slate-400 dark:text-gray-500",children:"(empty)"})}),s.jsx("td",{className:"px-2 py-0.5 text-right",children:l.lineNumber>0&&s.jsx(Je,{line:l.lineNumber})})]},o))})]})})})]})}const Ws={rowHeight:18,overscan:30,viewportHeight:520,searchDebounceMs:150,searchPlaceholder:"Search log..."};function gx({lines:e,search:t,onSearchChange:r,config:n,renderHeader:a,renderRow:i,scrollToLine:l,scrollToVersion:o,className:c,showLineCount:d=!0,emptyState:u,scrollContainerClassName:p}){const f=(n==null?void 0:n.rowHeight)??Ws.rowHeight,h=(n==null?void 0:n.overscan)??Ws.overscan,v=(n==null?void 0:n.viewportHeight)??Ws.viewportHeight,k=(n==null?void 0:n.searchDebounceMs)??Ws.searchDebounceMs,b=(n==null?void 0:n.searchPlaceholder)??Ws.searchPlaceholder,g=S.useRef(null),[m,x]=S.useState(0),[j,N]=S.useState(t),y=S.useRef(),C=S.useMemo(()=>e.map(K=>K.toLowerCase()),[e]),M=S.useMemo(()=>t.toLowerCase(),[t]),P=S.useCallback(K=>{N(K),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{r(K)},k)},[r,k]);S.useEffect(()=>{N(t)},[t]);const w=S.useMemo(()=>{if(!M)return[];const K=[];for(let re=0;re<C.length;re++)C[re].includes(M)&&K.push(re);return K},[C,M]),_=S.useMemo(()=>new Set(w),[w]),[L,I]=S.useState(0);S.useEffect(()=>{I(0)},[M]),S.useEffect(()=>{if(w.length===0||!g.current)return;const K=w[L];if(K===void 0)return;const re=Math.max(0,K*f-v/2);g.current.scrollTop=re,x(re)},[L,w,f,v]),S.useEffect(()=>{if(l==null||!g.current)return;const K=Math.max(0,l*f-v/2);requestAnimationFrame(()=>{g.current&&(g.current.scrollTop=K,x(K),g.current.scrollIntoView({behavior:"smooth",block:"nearest"}))})},[l,o,f,v]);const E=S.useCallback(()=>{w.length!==0&&I(K=>(K+1)%w.length)},[w.length]),A=S.useCallback(()=>{w.length!==0&&I(K=>(K-1+w.length)%w.length)},[w.length]),R=w.length>0?w[L]:-1,V=S.useRef(0),T=S.useCallback(()=>{V.current||(V.current=requestAnimationFrame(()=>{const K=g.current;K&&x(K.scrollTop),V.current=0}))},[]),$=e.length*f,D=Math.max(0,Math.floor(m/f)-h),B=Math.min(e.length,Math.ceil((m+v)/f)+h),Y=e.slice(D,B),G=D*f,Q={matchCount:w.length,currentMatchIdx:L,goNext:E,goPrev:A};return s.jsxs("div",{className:`flex flex-col ${c??""}`,children:[a?a(Q):s.jsx(hw,{localSearch:j,lowerSearch:M,matchCount:w.length,currentMatchIdx:L,goNext:E,goPrev:A,onSearchChange:P,placeholder:b}),s.jsx("div",{ref:g,onScroll:T,className:p??"font-mono text-[11px] leading-[1.6] text-slate-800 dark:text-gray-200 overflow-auto",style:{maxHeight:v},children:e.length===0&&u?u:s.jsx("div",{style:{height:$,position:"relative",minWidth:"fit-content"},children:s.jsx("div",{style:{position:"absolute",top:G,left:0,right:0},children:Y.map((K,re)=>{const ge=D+re,et=_.has(ge),At=ge===R;return i?s.jsx("div",{style:{height:f},children:i({text:K,lineIndex:ge,isMatch:et,isCurrent:At,searchQuery:et?t:""})},ge):s.jsx(gw,{text:K,isMatch:et,isCurrent:At,searchQuery:et?t:"",rowHeight:f},ge)})})})}),d&&s.jsxs("div",{className:"px-5 py-1 text-[10px] text-slate-400 dark:text-gray-500 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:[e.length.toLocaleString()," lines"]})]})}function hw({localSearch:e,lowerSearch:t,matchCount:r,currentMatchIdx:n,goNext:a,goPrev:i,onSearchChange:l,placeholder:o}){return s.jsxs("div",{className:"flex items-center gap-2 px-5 py-2 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex-shrink-0",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:o,"aria-label":o,value:e,onChange:c=>l(c.target.value),className:"flex-1 text-xs px-2 py-1 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-gray-100 placeholder:text-slate-400 outline-none focus:border-indigo-400 dark:focus:border-indigo-500",onKeyDown:c=>{c.key==="Escape"&&e?(c.stopPropagation(),l("")):c.key==="Enter"&&(c.preventDefault(),c.shiftKey?i():a())}}),t&&r>0&&s.jsx(vx,{matchCount:r,currentMatchIdx:n,goNext:a,goPrev:i}),t&&r===0&&s.jsx("span",{className:"text-[10px] text-red-400 dark:text-red-500 flex-shrink-0",children:"No matches"}),e&&s.jsx("button",{onClick:()=>l(""),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Clear search",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function vx({matchCount:e,currentMatchIdx:t,goNext:r,goPrev:n}){return s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 flex-shrink-0 tabular-nums",children:[t+1," / ",e]}),s.jsx("button",{onClick:n,className:"p-0.5 rounded text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Previous match (Shift+Enter)",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),s.jsx("button",{onClick:r,className:"p-0.5 rounded text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Next match (Enter)",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}const gw=S.memo(function({text:t,isMatch:r,isCurrent:n,searchQuery:a,rowHeight:i}){let l="";return n?l="bg-yellow-200 dark:bg-yellow-900/40":r&&(l="bg-yellow-100/60 dark:bg-yellow-900/20"),s.jsx("div",{className:`whitespace-pre px-5 ${l}`,style:{height:i},children:r&&a?px(t,a):t})}),Wc={"C12A7328-F81F-11D2-BA4B-00A0C93EC93B":"EFI System","0FC63DAF-8483-4772-8E79-3D69D8477DE4":"Linux Filesystem","E6D6D379-F507-44C2-A23C-238F2A3DF928":"Linux LVM","EBD0A0A2-B9E5-4433-87C0-68B6B72699C7":"Microsoft Basic Data","21686148-6449-6E6F-744E-656564454649":"BIOS Boot","DE94BBA4-06D1-4D40-A16A-BFD50179D6AC":"Windows Recovery","E3C9E316-0B5C-4DB8-817D-F92DF00215AE":"Microsoft Reserved","5808C8AA-7E8F-42E0-85D2-E1E90434CFB3":"Linux LUKS","0657FD6D-A4AB-43C4-84E5-0933C84B4F4F":"Linux Swap","A19D880F-05FC-4D3B-A006-743F0F84911E":"Linux RAID"};function vw(e){return Wc[e.toUpperCase()]||e}function kw(e){return e&&Wc[e.toUpperCase()]||null}function yw(e){var v;const t=[],r=[],n=[],a=[],i=[],l=new Set,o=new Set,c=new Set;let d="",u="",p="",f=!1,h="";for(let k=0;k<e.length;k++){const b=e[k];if(b.trim()==="BYT;"&&k+1<e.length){const M=e[k+1].match(/^(\/dev\/\w+):(\d+)B:(\w+):(\d+):(\d+):(\w+):(.+):;$/);if(M){const P=M[1];if(!l.has(P)){l.add(P);const w={device:P,sizeBytes:parseInt(M[2],10),transport:M[3],sectorSize:parseInt(M[4],10),tableType:M[6],model:M[7],partitions:[]};let _=k+2;for(;_<e.length;){const L=e[_].match(/^(\d+):(\d+)B:(\d+)B:(\d+)B:([^:]*):([^:]*):([^;]*);$/);if(L)w.partitions.push({number:parseInt(L[1],10),startBytes:parseInt(L[2],10),endBytes:parseInt(L[3],10),sizeBytes:parseInt(L[4],10),fsType:L[5]||"",name:L[6]||"",flags:L[7]||""}),_++;else break}t.push(w)}}}const g=b.match(/list_filesystems: adding "([^"]+)", "([^"]+)"/);if(g){const C=g[1];o.has(C)||(o.add(C),r.push({device:C,fsType:g[2]}))}if(b.includes("blkid")&&b.includes("stdout:")&&k+1<e.length){const C=e[k+1].trim();for(let M=k-1;M>=Math.max(0,k-5);M--){const P=e[M].match(/blkid.*'(\/dev\/\S+)'/);if(P){const w=P[1];o.has(w)||(o.add(w),r.push({device:w,fsType:C}));break}}}const m=b.match(/sfdisk '--part-type' '(\/dev\/\w+)' '(\d+)'/);if(m)for(let C=k+1;C<Math.min(e.length,k+10);C++){if(e[C].includes("sfdisk: stdout:")||e[C].includes("sfdisk returned"))continue;const M=e[C].trim();if(/^[0-9A-Fa-f]{8}-/.test(M)){const P=M.toUpperCase(),w=`${m[1]}:${m[2]}`;c.has(w)||(c.add(w),n.push({device:m[1],partNum:parseInt(m[2],10),guid:P,guidName:Wc[P]||""}));break}}if(/^pci-\S+/.test(b.trim())){const C=b.trim();if(!a.some(M=>M.path===C)){let M="";if(C.includes("-part")){const P=((v=C.match(/-part(\d+)/))==null?void 0:v[1])||"";M=P?`part${P}`:""}else(C.endsWith("-0")||C.match(/-scsi-\d+:\d+:\d+:\d+$/))&&(M="disk");a.push({path:C,device:M})}}const x=b.match(/info: trimming\s+(\/dev\/\S+)/);x&&(d=x[1],f=!1,h="");const j=b.match(/mount\s+'(-o)'\s+'([^']+)'\s+'(\/dev\/\S+)'/);j&&(u=j[2]);const N=b.match(/XFS \(\w+\): Mounting (V\d+) Filesystem/);N&&(p=`XFS ${N[1]}`),b.includes("could not trim")&&(f=!0,h=b.includes("no trim methods worked")?"No trim methods worked":"Trim failed");const y=b.match(/\/sysroot\/:\s+(.+?)\s+\((\d+)\s+bytes\)\s+trimmed/);y&&d&&(i.some(C=>C.device===d)||(i.push({device:d,mountpoint:"/sysroot/",mountOptions:u,trimmedHuman:y[1],trimmedBytes:parseInt(y[2],10),fsVersion:p,trimFailed:f,failReason:h}),p="",u="",f=!1,h=""))}return{disks:t,filesystems:r,partitionGuids:n,devicePaths:a,trimOps:i}}function bw({content:e}){const t=S.useMemo(()=>yw(e),[e]),r=t.trimOps.reduce((a,i)=>a+i.trimmedBytes,0);return t.disks.length>0||t.filesystems.length>0||t.trimOps.length>0||t.devicePaths.length>0?s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.disks.length>0&&s.jsxs(da,{color:"slate",children:[t.disks.length," disk",t.disks.length!==1?"s":""]}),t.filesystems.length>0&&s.jsxs(da,{color:"blue",children:[t.filesystems.length," filesystem",t.filesystems.length!==1?"s":""]}),t.partitionGuids.length>0&&s.jsxs(da,{color:"purple",children:[t.partitionGuids.length," partition",t.partitionGuids.length!==1?"s":""]}),t.trimOps.length>0&&s.jsxs(da,{color:"green",children:[t.trimOps.length," trimmed  ",q(r)," reclaimed"]})]}),t.disks.length>0&&s.jsx(jw,{disks:t.disks,filesystems:t.filesystems,partitionGuids:t.partitionGuids}),t.disks.length===0&&t.filesystems.length>0&&s.jsx(ww,{filesystems:t.filesystems}),t.trimOps.length>0&&s.jsx(Nw,{trimOps:t.trimOps,totalBytes:r}),t.devicePaths.length>0&&s.jsx(Sw,{paths:t.devicePaths})]}):null}function Hc(e){const t=e.toLowerCase();return t.includes("mapping")&&t.includes("filesystem")||t.includes("mapping")&&t.includes("unused")||t.includes("mapping")&&t.includes("blank")}function da({children:e,color:t}){return s.jsx(se,{color:t,variant:"pill",children:e})}function jw({disks:e,filesystems:t,partitionGuids:r}){return s.jsxs("div",{children:[s.jsx(H,{title:"Disk Layout",count:e.length}),s.jsx("div",{className:"space-y-3",children:e.map(n=>{const a=new Map;for(const l of t)a.set(l.device,l.fsType);const i=new Map;for(const l of r)l.device===n.device&&i.set(l.partNum,l);return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-baseline gap-3 px-3 py-2 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("span",{className:"font-mono text-xs font-semibold text-slate-700 dark:text-gray-200",children:n.device}),s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:q(n.sizeBytes)}),s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300 font-mono",children:n.tableType}),n.model&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 truncate max-w-[200px]",children:n.model}),s.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:[n.transport,"  ",n.sectorSize,"B sectors"]})]}),n.partitions.length>0&&s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Size"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Type"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Label"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Flags"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"GUID"})]})}),s.jsx("tbody",{children:n.partitions.map(l=>{const o=`${n.device}${l.number}`,c=a.get(o)||l.fsType,d=i.get(l.number);return s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:o}),s.jsx("td",{className:"px-3 py-1.5 text-slate-600 dark:text-gray-300",children:q(l.sizeBytes)}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx(Vc,{fsType:c})}),s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:l.name||""}),s.jsx("td",{className:"px-3 py-1.5 text-slate-400 dark:text-gray-500 text-[10px]",children:l.flags||""}),s.jsx("td",{className:"px-3 py-1.5",children:d?s.jsx("span",{className:"text-[10px] text-purple-600 dark:text-purple-400",title:d.guid,children:d.guidName||d.guid.slice(0,13)+"..."}):s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""})})]},l.number)})})]})]},n.device)})})]})}function ww({filesystems:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Discovered Filesystems",count:e.length}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Type"})]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:t.device}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx(Vc,{fsType:t.fsType})})]},r))})]})})]})}function Nw({trimOps:e,totalBytes:t}){return s.jsxs("div",{children:[s.jsx(H,{title:"Filesystem Trim (Unused Space)",count:e.length}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"FS"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Mount Options"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Trimmed"}),s.jsx("th",{className:"px-3 py-1 font-medium text-center",children:"Status"})]})}),s.jsxs("tbody",{children:[e.map(r=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:r.device}),s.jsx("td",{className:"px-3 py-1.5",children:r.fsVersion?s.jsx("span",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:r.fsVersion}):s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:r.mountOptions||""}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:r.trimmedHuman}),s.jsx("td",{className:"px-3 py-1.5 text-center",children:r.trimFailed?s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",title:r.failReason,children:"partial"}):s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"ok"})})]},r.device)),e.length>1&&s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-medium text-slate-500 dark:text-gray-400",colSpan:3,children:"Total"}),s.jsx("td",{className:"px-3 py-1.5 text-right font-medium text-slate-700 dark:text-gray-200",children:q(t)}),s.jsx("td",{})]})]})]})})]})}function Sw({paths:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-1.5 text-[11px] text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 transition-colors uppercase tracking-wider font-semibold mb-2",children:[s.jsx(Te,{expanded:t,className:"text-[9px]"}),"Device Paths (by-path)",s.jsxs("span",{className:"text-[10px] font-normal text-slate-400 dark:text-gray-500",children:["(",e.length,")"]})]}),t&&s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-0.5 max-h-[200px] overflow-y-auto",children:e.map((n,a)=>s.jsx("div",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300",children:n.path},a))})]})}function Cw(e){const t=[],r=new Set,n=[],a=[],i={},l=[],o=[];let c=null;const d=[];let u="",p=0;for(;p<e.length;){const f=e[p];if(f.trim()==="BYT;"&&p+1<e.length){const I=e[p+1].match(/^(\/dev\/\w+):(\d+)B:(\w+):(\d+):(\d+):(\w+):(.+):;$/);if(I){const E=I[1];if(!r.has(E)){r.add(E);const A={device:E,sizeBytes:parseInt(I[2],10),transport:I[3],sectorSize:parseInt(I[4],10),tableType:I[6],model:I[7],partitions:[]};let R=p+2;for(;R<e.length;){const T=e[R].match(/^(\d+):(\d+)B:(\d+)B:(\d+)B:([^:]*):([^:]*):([^;]*);$/);if(T)A.partitions.push({number:parseInt(T[1],10),startBytes:parseInt(T[2],10),endBytes:parseInt(T[3],10),sizeBytes:parseInt(T[4],10),fsType:T[5]||"",name:T[6]||"",flags:T[7]||""}),R++;else break}t.push(A)}}}const h=f.match(/list_filesystems: adding "([^"]+)", "([^"]+)"/);if(h){const L={device:h[1],fsType:h[2]};n.some(I=>I.device===L.device)||n.push(L)}if(f.startsWith("command: lvm: stdout:")&&p+1<e.length){let L=p+1;for(;L<e.length;){const I=e[L].trim();if(I&&/^[\w-]+\/[\w-]+$/.test(I))l.includes(I)||l.push(I),L++;else break}}const v=f.match(/check_for_filesystem_on:\s+(\S+)\s+\((\w+)\)/);v&&a.push({device:v[1],fsType:v[2],result:""});const k=f.match(/check_filesystem:\s+(\S+)\s+matched\s+(.+)/);if(k){for(let L=a.length-1;L>=0;L--)if(a[L].device===k[1]&&!a[L].result){a[L].result=k[2].trim();break}}const b=f.match(/part_get_gpt_type\s+=\s+"([^"]+)"/);if(b){const L=b[1];for(let I=p-1;I>=Math.max(0,p-10);I--){const E=e[I].match(/part_get_gpt_type\s+"(\/dev\/\w+)"\s+(\d+)/);if(E){const A=E[1],R=parseInt(E[2],10),V=t.find(T=>T.device===A);if(V){const T=V.partitions.find($=>$.number===R);T&&!T.gptTypeGuid&&(T.gptTypeGuid=L)}break}}}const g=f.match(/^i_(\w+)\s+=\s+(.*)$/);if(g){const L=g[1],I=g[2].trim();I&&!i[L]&&(i[L]=I)}const m=f.match(/info: trimming\s+(\/dev\/\S+)/);m&&(u=m[1]);const x=f.match(/\/sysroot\/:\s+(.+?)\s+\((\d+)\s+bytes\)\s+trimmed/);x&&u&&(d.some(L=>L.device===u)||d.push({device:u,trimmedHuman:x[1],trimmedBytes:parseInt(x[2],10)}));const j=f.match(/has_grub_signature:.*"GRUB" signature on (\/dev\/\S+)\?\s+(true|false)/);j&&(c||(c={device:"",grubSignature:null,mountPoints:[]}),c.grubSignature=j[2]==="true");const N=f.match(/get_device_of_boot_filesystem:\s+found\s+\/boot\s+filesystem on device\s+(\/dev\/\S+)/);N&&(c||(c={device:"",grubSignature:null,mountPoints:[]}),c.device=N[1]);const y=f.match(/mountpoints\s+=\s+\[([^\]]+)\]/);if(y&&!(c!=null&&c.mountPoints.length)){c||(c={device:"",grubSignature:null,mountPoints:[]});const L=y[1].split(",").map(I=>I.trim().replace(/^"|"$/g,""));for(let I=0;I<L.length-1;I+=2)c.mountPoints.push({device:L[I],mountpoint:L[I+1]})}const C=f.match(/e2fsck\s+"(\/dev\/\S+)"/);C&&o.push({device:C[1],exitCode:-1,passes:[],summary:""});const M=f.match(/^Pass \d+:\s+(.+)/);if(M&&o.length>0&&o[o.length-1].passes.push(M[0]),f.match(/^(\/dev\/\S+):\s+\d+\/\d+\s+files.+blocks$/)&&o.length>0){const L=o[o.length-1];L.summary=f.trim()}const w=f.match(/e2fsck\s+=\s+(\d+)/);if(w&&o.length>0){const L=o[o.length-1];L.exitCode=parseInt(w[1],10)}const _=f.match(/xfs_repair\s+=\s+(\d+)/);if(_)for(let L=p-1;L>=Math.max(0,p-20);L--){const I=e[L].match(/xfs_repair\s+"(\/dev\/\S+)"/);if(I){o.push({device:I[1],exitCode:parseInt(_[1],10),passes:[],summary:"xfs_repair"});break}}p++}return{disks:t,filesystems:n,inspectionSteps:a,osInfo:i,lvmVolumes:l,fsckResults:o,bootDevice:c,fstrimResults:d}}const Xu=/^\s*[Rr]elabeled\s+(\S+)\s+from\s+(.+?)\s+to\s+(.+?)\s*$/;function Mw(e,t){const r={loadPolicyFound:!1,selinuxRelabelAvailable:!1,mode:"",type:"",fileContextsPath:""},n=[],a=[],i={command:"",durationSecs:null,exitCode:null,skippedBins:[],contextErrors:[],autorelabelRemoved:!1},l=[];for(let d=0;d<e.length;d++){const u=e[d];if(u.includes('is_file "/usr/sbin/load_policy"')){const x=u.match(/is_file\s*=\s*(\d)/);if(x)r.loadPolicyFound=x[1]==="1";else for(let j=d+1;j<Math.min(d+5,e.length);j++){const N=e[j].match(/is_file\s*=\s*(\d)/);if(N){r.loadPolicyFound=N[1]==="1";break}}}if(u.includes("feature_available = 1")&&!r.selinuxRelabelAvailable){for(let x=Math.max(0,d-5);x<d;x++)if(e[x].includes('feature_available "selinuxrelabel"')||e[x].includes('internal_feature_available "selinuxrelabel"')){r.selinuxRelabelAvailable=!0;break}}if((u.includes('aug_get "/files/etc/selinux/config/SELINUX"')||u.includes('aug_get "/file/etc/selinux/config/SELINUX"'))&&!u.includes('/etc/selinux/config/SELINUXTYPE"')){const x=u.match(/aug_get\s*=\s*"([^"]+)"/);if(x)r.mode=x[1];else for(let j=d+1;j<Math.min(d+8,e.length);j++){const N=e[j].match(/aug_get\s*=\s*"([^"]+)"/);if(N){r.mode=N[1];break}}}if(u.includes('aug_get "/files/etc/selinux/config/SELINUXTYPE"')||u.includes('aug_get "/file/etc/selinux/config/SELINUXTYPE"')){const x=u.match(/aug_get\s*=\s*"([^"]+)"/);if(x)r.type=x[1];else for(let j=d+1;j<Math.min(d+8,e.length);j++){const N=e[j].match(/aug_get\s*=\s*"([^"]+)"/);if(N){r.type=N[1];break}}}const p=u.match(/is_file "([^"]*file_contexts)"/);p&&!r.fileContextsPath&&(r.fileContextsPath=p[1]);const f=u.match(/^augeas failed to parse ([^:]+):/);if(f){const x=f[1];let j=!1;const N=u.match(/error\s+"([^"]+)"\s+at\s+line\s+(\d+)\s+char\s+(\d+)/);if(N&&(n.push({file:x,message:N[1],line:N[2],char:N[3]}),j=!0),!j)for(let y=d+1;y<Math.min(d+4,e.length);y++){const C=e[y].match(/error\s+"([^"]+)"\s+at\s+line\s+(\d+)\s+char\s+(\d+)/);if(C){n.push({file:x,message:C[1],line:C[2],char:C[3]});break}}}const h=u.match(/mountpoints\s*=\s*\[(.+)\]/);if(h){const x=h[1].split(",").map(j=>j.trim().replace(/^"|"$/g,""));for(let j=0;j<x.length-1;j+=2)x[j]&&x[j+1]&&a.push({device:x[j],path:x[j+1]})}(u.includes("setfiles '-F'")||u.includes("setfiles: '-F'"))&&(i.command=u.replace(/^command:\s*/,"").trim());const v=u.match(/setfiles.*took\s+([\d.]+)\s+secs/);v&&(i.durationSecs=parseFloat(v[1]));const k=u.match(/setfiles returned (\d+)/);if(k){const x=parseInt(k[1],10);(i.command||i.exitCode===null)&&(i.exitCode=x)}if(u.includes("Old compiled fcontext format, skipping")){const x=u.match(/^([^:]+):/);x?i.skippedBins.push(x[1].trim()):i.skippedBins.push(u.trim())}const b=u.match(/Could not set context for ([^:]+):\s*(.*)/);b&&i.contextErrors.push(b[1].replace("/sysroot/","/")),u.includes('rm_f "/.autorelabel"')&&(i.autorelabelRemoved=!0);let g=u.trim();(g.includes("nbdkit:")||g.includes("guestfsd:"))&&(g=g.replace(/nbdkit:\s*\S+:\s*debug:\s*\S+:\s*\S+/g,"").replace(/guestfsd:\s*[<=>][^\n]*/g,"").replace(/\s{2,}/g," ").trim());const m=g.match(Xu);if(m){let x=m[1];x.startsWith("/sysroot/")&&(x=x.slice(8)),l.push({path:x,fromContext:m[2].trim(),toContext:m[3].trim()})}}if(t){const d=new Set(l.map(u=>u.path));for(const u of t){const p=u.trim().match(Xu);if(p){let f=p[1];f.startsWith("/sysroot/")&&(f=f.slice(8)),d.has(f)||(d.add(f),l.push({path:f,fromContext:p[2].trim(),toContext:p[3].trim()}))}}}const o=new Map;for(const d of l){const u=d.path.split("/").filter(Boolean),p=u.length>1?`/${u[0]}`:"/";o.has(p)||o.set(p,[]),o.get(p).push(d)}const c=Array.from(o.entries()).map(([d,u])=>({directory:d,files:u})).sort((d,u)=>u.files.length-d.files.length);return{config:r,augeasErrors:n,mountPoints:a,setfiles:i,relabelGroups:c,totalRelabeled:l.length}}const qu={is_rotational:"Rotational",is_read_only:"Read Only",can_write:"Write",can_zero:"Zero",can_fast_zero:"Fast Zero",can_trim:"Trim",can_fua:"Force Unit Access",can_flush:"Flush",can_multi_conn:"Multi-connection",can_cache:"Cache",can_extents:"Extents",can_df:"Disk Free",can_block_status_payload:"Block Status Payload"};function Lw(e){let t=null,r=null,n=null;const a=[];let i=0;const l=[],o=[];let c=null,d=null,u="",p="",f="",h=0,v=null,k=null;const b=new Set;let g=-1;for(let m=0;m<e.length;m++){const x=e[m],j=x.match(/^info:\s+(input|output)\s+disk\s+(\d+\/\d+):/);if(j){c&&d&&(d==="input"?t=c:r=c),d=j[1],c={label:`${j[1]} disk ${j[2]}`,protocol:"",exportSize:0,exportSizeHuman:"",uri:"",contentDescription:"",capabilities:{},blockSizes:{minimum:"",preferred:"",maximum:""}};continue}if(c){const A=x.match(/^protocol:\s+(.+)/);if(A){c.protocol=A[1].trim();continue}const R=x.match(/^\texport-size:\s+(\d+)\s+\(([^)]+)\)/);if(R){c.exportSize=parseInt(R[1],10),c.exportSizeHuman=R[2];continue}const V=x.match(/^\tcontent:\s+(.+)/);if(V){c.contentDescription=V[1].trim();continue}const T=x.match(/^\turi:\s+(.+)/);if(T){c.uri=T[1].trim();continue}const $=x.match(/^\tblock_size_minimum:\s+(.+)/);if($){c.blockSizes.minimum=$[1].trim();continue}const D=x.match(/^\tblock_size_preferred:\s+(.+)/);if(D){c.blockSizes.preferred=D[1].trim();continue}const B=x.match(/^\tblock_size_maximum:\s+(.+)/);if(B){c.blockSizes.maximum=B[1].trim();continue}const Y=x.match(/^\t(is_\w+|can_\w+):\s+(.+)/);if(Y){c.capabilities[Y[1]]=Y[2].trim();continue}if(!x.startsWith("	")&&!x.startsWith("protocol:")&&!x.startsWith("export=")&&x.trim()!==""&&!x.startsWith("		"))d==="input"?t=c:d==="output"&&(r=c),c=null,d=null;else continue}const N=x.match(/VixDiskLib_Open\s+\(connection,\s+(.+?),\s+\d+,/);N&&!u&&(u=N[1].trim());const y=x.match(/transport mode:\s+(\w+)/);y&&(p=y[1]);const C=x.match(/NBD_ClientOpen: attempting to create connection to\s+(.+)/);C&&!f&&(f=C[1].trim());const M=x.match(/NfcAioOpenSession: the socket options client snd buffer size (\d+),\s+rcv buffer size (\d+)/);M&&!k&&(k={clientSnd:parseInt(M[1],10),clientRcv:parseInt(M[2],10),serverSnd:0,serverRcv:0});const P=x.match(/NfcAioOpenSession: the socket options server snd buffer size (\d+),\s+rcv buffer size (\d+)/);P&&k&&(k.serverSnd=parseInt(P[1],10),k.serverRcv=parseInt(P[2],10));const w=x.match(/cow: underlying file size:\s+(\d+)/);w&&(h=parseInt(w[1],10));const _=x.match(/handle values minblock=(\d+)\s+maxdata=(\d+)\s+maxlen=(\d+)/);_&&(v={minblock:parseInt(_[1],10),maxdata:parseInt(_[2],10),maxlen:parseInt(_[3],10)});const L=x.match(/nbdkit:\s+\w+\[\d+\]:\s+debug:\s+(\w[\w-]+):\s+open\s+readonly/);if(L){const A=L[1];b.has(A)||(b.add(A),a.push(A))}const I=x.match(/starting worker thread\s+\w+\.(\d+)/);if(I){const A=parseInt(I[1],10);A>g&&(g=A)}const E=x.match(/warning\s+-\[\d+\]\s+\[.+?\]\s+(.+)/);if(E){const A=E[1].trim();l.includes(A)||l.push(A)}}if(c&&d&&(d==="input"?t=c:r=c),g>=0&&(i=g+1),(u||p)&&(n={vmdkPath:u,transportMode:p,nfcEndpoint:f,backingSize:h,blockParams:v,socketBuffers:k}),t!=null&&t.contentDescription){const m=t.contentDescription,x=/partition\s+(\d+)\s*:\s*ID=(0x[\da-fA-F]+),?\s*(active,?)?\s*.*?startsector\s+(\d+),\s*(\d+)\s+sectors/g;let j;for(;(j=x.exec(m))!==null;)o.push({id:j[2],active:!!j[3],startSector:parseInt(j[4],10),sectorCount:parseInt(j[5],10),sizeBytes:parseInt(j[5],10)*512})}return{inputDisk:t,outputDisk:r,vddkConnection:n,filterStack:a,workerCount:i,warnings:l,partitions:o}}function kx(e){return/^Copying disk\s+\d+/i.test(e)}function _w(e){const t={conversionModule:"",osDetected:"",kernels:[],candidatePackages:[],packageOps:[],boot:{bootloader:"",bootloaderPath:"",efiFiles:[],grubCmdline:"",fstabEntries:[],blockDeviceMap:[]},initramfs:null,guestCaps:null,augeasErrors:[],cleanupChecks:[],modprobeAliases:[],defaultKernel:""};let r=null,n=!1,a=!1,i="",l="",o=[],c="",d=null;const u=[];let p="",f="",h="",v=null,k="";const b=[],g=[],m=[],x=[],j=[];let N=0;for(let w=0;w<e.length;w++){const _=e[w],L=_.match(/picked conversion module (\S+)/);L&&(t.conversionModule=L[1]);const I=_.match(/libosinfo: loaded OS:\s*(.*)/);if(I){const z=I[1].trim(),X=z.match(/redhat\.com\/rhel\/(.+)/);X?t.osDetected=`RHEL ${X[1]}`:t.osDetected=z}const E=_.match(/^info: candidate kernel packages.*?:\s*(.*)/);E&&(t.candidatePackages=E[1].trim().split(/\s+/));const A=_.match(/^\*\s+(\S+)\s+(\S+)\s+\((\S+)\)/);if(A){r&&t.kernels.push(r);const z=e.some((ee,me)=>me<w&&me>w-3&&ee.includes("best kernel")),X=e.some((ee,me)=>me<w&&me>w-3&&ee.includes("default"));r={name:A[1],version:A[2],arch:A[3],vmlinuz:"",initramfs:"",config:"",modulesDir:"",modulesCount:0,virtio:{},isBest:z,isDefault:X},n=!0;continue}if(n&&r){const z=_.replace(/^\t/,"");if(z.startsWith("/boot/vmlinuz-"))r.vmlinuz=z;else if(z.startsWith("/boot/initramfs-"))r.initramfs=z;else if(z.startsWith("/boot/config-"))r.config=z;else if(z.startsWith("/lib/modules/"))r.modulesDir=z;else if(z.match(/^\d+ modules found/))r.modulesCount=parseInt(z,10);else if(z.startsWith("virtio:")){const X=z.replace("virtio:","").trim().split(/\s+/);for(const ee of X){const[me,ae]=ee.split("=");me&&ae&&(r.virtio[me]=ae==="true")}}else if(z.match(/^(pvpanic|vsock|xen|debug)=/)){const X=z.trim().split(/\s+/);for(const ee of X){const[me,ae]=ee.split("=");me&&ae&&(r.virtio[me]=ae==="true")}}else!z.startsWith("	")&&!z.startsWith(" ")&&z.length>0&&!z.match(/^\d/)&&!z.startsWith("virtio")&&!z.startsWith("pvpanic")&&(n=!1)}const R=_.match(/^augeas failed to parse (.*?):/);if(R){const z=R[1].trim(),ee=(w+1<e.length?e[w+1]:"").match(/error "(.+?)"\s+at line (\d+)\s+char (\d+)\s+in lens\s+(.+)/);ee?(t.augeasErrors.push({file:z,message:ee[1],line:ee[2],char:ee[3],lens:ee[4].replace(/:$/,"")}),w++):t.augeasErrors.push({file:z,message:"",line:"",char:"",lens:""})}const V=_.match(/^detected bootloader (\S+) at (.+)/);if(V&&(t.boot.bootloader=V[1],t.boot.bootloaderPath=V[2].trim()),_.includes("find =")&&_.includes("/EFI")){const z=_.match(/find = \[(.+)\]/);if(z)try{const X=z[1].split(",").map(ee=>ee.trim().replace(/^"|"$/g,""));t.boot.efiFiles=X.filter(ee=>ee.length>0)}catch{}}if(_.includes("aug_get")&&_.includes("GRUB_CMDLINE_LINUX"))for(let z=w+1;z<Math.min(w+5,e.length);z++){const X=e[z].match(/aug_get = "(.+)"/);if(X&&X[1].includes("=")){t.boot.grubCmdline=X[1].replace(/^"|"$/g,"");break}}if(_.match(/^info: block device map:/))for(let z=w+1;z<e.length;z++){const X=e[z].match(/^\t(\S+)\s+->\s+(\S+)/);if(X)t.boot.blockDeviceMap.push({from:X[1],to:X[2]});else break}const $=_.match(/aug_get = "(.+)"/);if($&&_.includes("aug_get")&&_.includes("fstab")&&t.boot.fstabEntries.push({spec:$[1]}),(_.includes("/files/etc/fstab/")||_.includes("/file/etc/fstab/"))&&_.includes("/spec")&&_.includes("aug_get =")){const z=_.match(/aug_get = "(.+?)"/);z&&t.boot.fstabEntries.push({spec:z[1]})}const D=_.match(/sh "((?:dnf|yum) -y remove .+?)"/);if(D){a=!0,i=D[1].startsWith("yum")?"yum":"dnf",l=D[1].replace(/'/g,""),o=[],c="",d=null;continue}if(!a&&_.includes('sh "')&&_.includes("apt-get")&&_.includes("remove")){a=!0,i="apt";const z=_.match(/remove\s+(.+?)(?:\\n|\s*")/);l=z?`apt-get remove ${z[1].replace(/'/g,"").trim()}`:"apt-get remove",o=[],c="",d=null;continue}if(!a&&_.includes('sh "')&&_.includes("zypper")&&_.includes("remove")){a=!0,i="zypper",l="zypper remove",o=[],c="",d=null;continue}if(a){const z=_.match(/took (\d+\.\d+) secs/);if(z&&_.includes("sh")&&(d=parseFloat(z[1])),_.includes('sh = "')){const X=_.match(/sh = "([\s\S]+)"/);if(X){const ee=X[1].replace(/\\n/g,`
`).replace(/\\r/g,"");if(i==="dnf"||i==="yum"){const me=ee.match(/Freed space:\s*(.+)/);me&&(c=me[1].trim());const ae=ee.split(`
`);let Dt=!1;for(const ht of ae){if(ht.includes("Removing:")||ht.includes("Removing unused dependencies:")){Dt=!0;continue}if(Dt&&ht.includes("Transaction Summary")){Dt=!1;continue}if(Dt){const gt=ht.match(/^\s+(\S+)\s+(x86_64|noarch|i686|aarch64)\s+(\S+)\s+@?(\S+)\s+(.+)/);gt&&o.push({name:gt[1],arch:gt[2],version:gt[3],repo:gt[4],size:gt[5].trim()})}}}else if(i==="apt"){const me=ee.match(/(\d[\d.]*\s*[kKmMgG]?B) disk space will be freed/);me&&(c=me[1].trim());const ae=ee.split(`
`);for(const Dt of ae){const ht=Dt.match(/Removing (\S+) \(([^)]+)\)/);ht&&o.push({name:ht[1],arch:"",version:ht[2],repo:"installed",size:""})}}}t.packageOps.push({manager:i,command:l,packages:o,freedSpace:c,durationSecs:d}),a=!1}}if(_.includes("aug_set")&&_.includes("DEFAULTKERNEL/value")){const z=_.match(/"([^"]+)"$/);z&&(t.defaultKernel=z[1])}if(_.includes("aug_set")&&_.includes("modprobe.d")&&_.includes("/alias[")){const z=_.match(/"([^"]+)"$/);if(z){for(let X=w+1;X<Math.min(w+5,e.length);X++)if(e[X].includes("modulename")){const ee=e[X].match(/"([^"]+)"$/);ee&&t.modprobeAliases.push({alias:z[1],module:ee[1]});break}}}const B=_.match(/command "(.+?dracut.+?)"/);B&&(p=B[1],f="dracut");const Y=_.match(/command "(.+?update-initramfs.+?)"/);Y&&(p=Y[1],f="update-initramfs");const G=_.match(/command "(.+?mkinitrd.+?)"/);if(G&&!_.includes("update-initramfs")&&(p=G[1],f="mkinitrd"),_.includes("command (0x32) took")&&p){const z=_.match(/took (\d+\.\d+) secs/);z&&(v=parseFloat(z[1]))}const Q=_.match(/dracut: \*\*\* Including module: (.+?) \*\*\*/);Q&&u.push(Q[1]);const K=_.match(/Adding module \/usr\/lib\/modules\/\S+\/(.+\.ko)/);K&&u.push(K[1]);const re=_.match(/dracut: (?:dracut: )?using auto-determined compression method '(.+?)'/);re&&(h=re[1]);const ge=_.match(/Creating (?:initramfs )?image file '(.+?)'/);ge&&(k=ge[1]);const et=_.match(/update-initramfs: Generating ([^"\\]+)/);if(et&&(k=et[1].trim()),_.includes('command = "')&&_.includes("update-initramfs")){const z=_.match(/command = "([\s\S]+)"/);if(z){const X=z[1].split(/\\n/);let ee="";for(const me of X){const ae=me.trim();if(!ae)continue;const Dt=ae.match(/Adding module \/usr\/lib\/modules\/\S+\/(.+\.ko)/);if(Dt){u.push(Dt[1]);continue}if(ae.startsWith("Adding binary")&&!ae.includes("module")){const gt=ae.replace(/^Adding binary(?:-link)?\s+/,"");b.push(gt);continue}if(ae.startsWith("Adding firmware ")){g.push(ae.replace("Adding firmware ",""));continue}if(ae.startsWith("Adding config ")){m.push(ae.replace("Adding config ",""));continue}const ht=ae.match(/Copying module directory (.+)/);if(ht){ee=ht[1],j.push({dir:ee,excludes:""});continue}if(ae.startsWith("(excluding ")&&j.length>0){j[j.length-1].excludes=ae;continue}if(ae.startsWith("Calling hook ")){x.push(ae.replace("Calling hook ",""));continue}if(ae.startsWith("microcode bundle ")){N++;continue}if(!k){const gt=ae.match(/update-initramfs: Generating (.+)/);gt&&(k=gt[1].trim())}}}}const At=_.match(/^gcaps_(\w+)\s*=\s*(.+)/);if(At){t.guestCaps||(t.guestCaps={blockBus:"",netBus:"",virtioRng:!1,virtioBalloon:!1,pvpanic:!1,virtioSocket:!1,machine:"",arch:"",virtio10:!1,rtcUtc:!1});const z=At[1],X=At[2].trim();switch(z){case"block_bus":t.guestCaps.blockBus=X;break;case"net_bus":t.guestCaps.netBus=X;break;case"virtio_rng":t.guestCaps.virtioRng=X==="true";break;case"virtio_balloon":t.guestCaps.virtioBalloon=X==="true";break;case"isa_pvpanic":t.guestCaps.pvpanic=X==="true";break;case"virtio_socket":t.guestCaps.virtioSocket=X==="true";break;case"machine":t.guestCaps.machine=X;break;case"arch":t.guestCaps.arch=X;break;case"virtio_1_0":t.guestCaps.virtio10=X==="true";break;case"rtc_utc":t.guestCaps.rtcUtc=X==="true";break}}if(_.includes("is_file")&&(_.includes("VBoxGuestAdditions")||_.includes("parallels-tools")||_.includes("vmware-uninstall")||_.includes("kudzu"))){const z=_.match(/is_file "(.+?)"/);if(z){const X=_.match(/is_file = (\d)/),ee=X?X[1]==="1":!1;t.cleanupChecks.push(`${z[1]} ${ee?"(found)":"(not found)"}`)}}}r&&t.kernels.push(r);const y=new Set;t.kernels=t.kernels.filter(w=>{const _=`${w.name}-${w.version}`;return y.has(_)?!1:(y.add(_),!0)});const C=new Set;t.augeasErrors=t.augeasErrors.filter(w=>C.has(w.file)?!1:(C.add(w.file),!0));const M=new Set;t.boot.fstabEntries=t.boot.fstabEntries.filter(w=>M.has(w.spec)?!1:(M.add(w.spec),!0));const P=[...new Set(u)];return(p||P.length>0)&&(t.initramfs={tool:f||"unknown",command:p,includedModules:P,compressionMethod:h,durationSecs:v,initramfsPath:k,binaries:b,firmware:g,configs:m,hooks:x,copyDirs:j,microcodeCount:N}),t}function Ew(e){return e.slice(0,Math.min(200,e.length)).some(r=>r.includes("picked conversion module")&&!r.includes("windows")||r.includes("candidate kernel packages")||r.includes("installing kernel")||r.includes("rebuilding initrd")||r.includes("remapping networks"))}function Pw(e){const t={conversionModule:"",osInfo:{type:"",arch:"",majorVersion:null,minorVersion:null,productName:"",productVariant:"",osinfo:"",controlSet:"",systemRoot:""},guestCaps:null,virtioIsoPath:"",virtioIsoVersion:"",hasVirtioDrivers:!1,warnings:[]};for(let r=0;r<e.length;r++){const n=e[r],a=n.match(/picked conversion module (\S+)/);a&&(t.conversionModule=a[1]);const i=n.match(/inspect_get_type = "(.+?)"/);i&&!t.osInfo.type&&(t.osInfo.type=i[1]);const l=n.match(/inspect_get_arch = "(.+?)"/);l&&!t.osInfo.arch&&(t.osInfo.arch=l[1]);const o=n.match(/inspect_get_major_version = (\d+)/);o&&t.osInfo.majorVersion===null&&(t.osInfo.majorVersion=parseInt(o[1],10));const c=n.match(/inspect_get_minor_version = (\d+)/);c&&t.osInfo.minorVersion===null&&(t.osInfo.minorVersion=parseInt(c[1],10));const d=n.match(/inspect_get_product_name = "(.+?)"/);d&&!t.osInfo.productName&&(t.osInfo.productName=d[1]);const u=n.match(/inspect_get_product_variant = "(.+?)"/);u&&!t.osInfo.productVariant&&(t.osInfo.productVariant=u[1]);const p=n.match(/inspect_get_osinfo = "(.+?)"/);p&&!t.osInfo.osinfo&&(t.osInfo.osinfo=p[1]);const f=n.match(/inspect_get_windows_current_control_set = "(.+?)"/);f&&!t.osInfo.controlSet&&(t.osInfo.controlSet=f[1]);const h=n.match(/inspect_get_windows_systemroot = "(.+?)"/);h&&!t.osInfo.systemRoot&&(t.osInfo.systemRoot=h[1]);const v=n.match(/copy_from_virtio_win:\s+guest tools source ISO\s+(\S+)/);v&&(t.virtioIsoPath=v[1]);const k=n.match(/virtio-win-(\d[\d.]+\d)\.iso/);k&&!t.virtioIsoVersion&&(t.virtioIsoVersion=k[1]),n.includes("This guest has virtio drivers installed")&&(t.hasVirtioDrivers=!0);const b=n.match(/^gcaps_(\w+)\s*=\s*(.+)/);if(b){t.guestCaps||(t.guestCaps={blockBus:"",netBus:"",virtioRng:!1,virtioBalloon:!1,pvpanic:!1,virtioSocket:!1,machine:"",arch:"",virtio10:!1,rtcUtc:!1});const m=b[1],x=b[2].trim();switch(m){case"block_bus":t.guestCaps.blockBus=x;break;case"net_bus":t.guestCaps.netBus=x;break;case"virtio_rng":t.guestCaps.virtioRng=x==="true";break;case"virtio_balloon":t.guestCaps.virtioBalloon=x==="true";break;case"isa_pvpanic":t.guestCaps.pvpanic=x==="true";break;case"virtio_socket":t.guestCaps.virtioSocket=x==="true";break;case"machine":t.guestCaps.machine=x;break;case"arch":t.guestCaps.arch=x;break;case"virtio_1_0":t.guestCaps.virtio10=x==="true";break;case"rtc_utc":t.guestCaps.rtcUtc=x==="true";break}}const g=n.match(/virt-v2v:\s*warning:\s*(.+)/);if(g){const m=g[1].trim();t.warnings.includes(m)||t.warnings.push(m)}}return t}function yx(e){return e.slice(0,Math.min(200,e.length)).some(r=>r.includes("picked conversion module")&&r.includes("windows")||r.includes("copy_from_virtio_win")||r.includes("virtio_win: read_file"))}function Iw({content:e,stageName:t}){var l;const r=S.useMemo(()=>Lw(e),[e]);if(!(r.inputDisk!==null||r.outputDisk!==null||r.vddkConnection!==null||r.filterStack.length>0||r.workerCount>0))return null;const a=t.match(/(\d+)\/(\d+)/),i=a?`Disk ${a[1]} of ${a[2]}`:"";return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i&&s.jsx(Ur,{color:"slate",children:i}),r.inputDisk&&s.jsx(Ur,{color:"blue",children:r.inputDisk.exportSizeHuman||q(r.inputDisk.exportSize)}),((l=r.vddkConnection)==null?void 0:l.transportMode)&&s.jsx(Ur,{color:"green",children:r.vddkConnection.transportMode}),r.workerCount>0&&s.jsxs(Ur,{color:"purple",children:[r.workerCount," workers"]}),r.partitions.length>0&&s.jsxs(Ur,{color:"slate",children:[r.partitions.length," partition",r.partitions.length!==1?"s":""]}),r.warnings.length>0&&s.jsxs(Ur,{color:"amber",children:[r.warnings.length," warning",r.warnings.length!==1?"s":""]})]}),(r.inputDisk||r.outputDisk)&&s.jsx(Tw,{inputDisk:r.inputDisk,outputDisk:r.outputDisk}),r.inputDisk&&r.outputDisk&&s.jsx(Fw,{inputDisk:r.inputDisk,outputDisk:r.outputDisk}),r.vddkConnection&&s.jsx(Aw,{conn:r.vddkConnection}),r.filterStack.length>0&&s.jsx(Dw,{filters:r.filterStack}),r.partitions.length>0&&s.jsx($w,{partitions:r.partitions}),r.warnings.length>0&&s.jsx(Ow,{warnings:r.warnings})]})}function Ur({children:e,color:t}){return s.jsx(se,{color:t,variant:"pill",children:e})}function Pr({label:e,value:t,mono:r}){return s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 min-w-[90px]",children:e}),s.jsx("span",{className:`text-[11px] text-slate-700 dark:text-gray-200 ${r?"font-mono":""}`,children:t})]})}function Tw({inputDisk:e,outputDisk:t}){return s.jsxs("div",{children:[s.jsx(H,{title:"Disk Info"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e&&s.jsx(Zu,{disk:e,direction:"Input"}),t&&s.jsx(Zu,{disk:t,direction:"Output"})]})]})}function Zu({disk:e,direction:t}){return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-baseline gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold ${t==="Input"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300"}`,children:t}),s.jsx("span",{className:"text-[11px] font-medium text-slate-700 dark:text-gray-200",children:e.exportSizeHuman||q(e.exportSize)})]}),s.jsxs("div",{className:"px-3 py-2 space-y-1",children:[e.protocol&&s.jsx(Pr,{label:"Protocol",value:e.protocol}),e.uri&&s.jsx(Pr,{label:"URI",value:e.uri,mono:!0}),e.blockSizes.preferred&&s.jsx(Pr,{label:"Block sizes",value:`min=${e.blockSizes.minimum}, pref=${e.blockSizes.preferred}, max=${e.blockSizes.maximum}`,mono:!0})]})]})}function Fw({inputDisk:e,outputDisk:t}){const r=new Set;for(const c of Object.keys(e.capabilities))r.add(c);for(const c of Object.keys(t.capabilities))r.add(c);const n=Array.from(r).filter(c=>c in qu),a=n.some(c=>(e.capabilities[c]||"")!==(t.capabilities[c]||"")),[i,l]=S.useState(!a),o=i?n:n.filter(c=>(e.capabilities[c]||"")!==(t.capabilities[c]||""));return n.length===0?null:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(H,{title:"Capabilities Comparison"}),a&&s.jsx("button",{onClick:()=>l(!i),className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:i?"Show differences only":"Show all"})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1.5 font-medium",children:"Capability"}),s.jsx("th",{className:"px-3 py-1.5 font-medium text-center",children:"Input"}),s.jsx("th",{className:"px-3 py-1.5 font-medium text-center",children:"Output"})]})}),s.jsx("tbody",{children:o.map(c=>{const d=e.capabilities[c]||"",u=t.capabilities[c]||"",p=d!==u;return s.jsxs("tr",{className:`border-b border-slate-50 dark:border-slate-800/50 ${p?"bg-amber-50/50 dark:bg-amber-900/10":""}`,children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-600 dark:text-gray-300",children:qu[c]||c}),s.jsx("td",{className:"px-3 py-1.5 text-center",children:s.jsx(Ju,{value:d,highlight:p})}),s.jsx("td",{className:"px-3 py-1.5 text-center",children:s.jsx(Ju,{value:u,highlight:p})})]},c)})})]})})]})}function Ju({value:e,highlight:t}){return e==="true"?s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${t?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"text-green-600 dark:text-green-400"}`,children:"yes"}):e==="false"?s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${t?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"text-slate-400 dark:text-gray-500"}`,children:"no"}):s.jsx("span",{className:"text-slate-500 dark:text-gray-400 text-[10px]",children:e})}function Aw({conn:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"VDDK Connection"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 flex-wrap",children:[e.transportMode&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${e.transportMode==="nbdssl"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":e.transportMode==="file"?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300"}`,children:e.transportMode}),e.backingSize>0&&s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:q(e.backingSize)})]}),s.jsxs("div",{className:"px-3 py-2 space-y-1",children:[e.vmdkPath&&s.jsx(Pr,{label:"VMDK",value:e.vmdkPath,mono:!0}),e.nfcEndpoint&&s.jsx(Pr,{label:"NFC Endpoint",value:e.nfcEndpoint,mono:!0}),e.blockParams&&s.jsx(Pr,{label:"Block Params",value:`minblock=${e.blockParams.minblock}, maxdata=${q(e.blockParams.maxdata)}, maxlen=${q(e.blockParams.maxlen)}`,mono:!0}),e.socketBuffers&&s.jsx(Pr,{label:"Socket Buffers",value:`client: snd=${q(e.socketBuffers.clientSnd)} rcv=${q(e.socketBuffers.clientRcv)} | server: snd=${q(e.socketBuffers.serverSnd)} rcv=${q(e.socketBuffers.serverRcv)}`,mono:!0})]})]})]})}function Dw({filters:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"nbdkit Filter Stack",count:e.length}),s.jsx("div",{className:"flex items-center flex-wrap gap-1",children:e.map((t,r)=>s.jsxs("span",{className:"contents",children:[s.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-mono font-medium ${t==="vddk"?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-300 border border-slate-200 dark:border-slate-700"}`,children:t}),r<e.length-1&&s.jsx("span",{className:"text-slate-300 dark:text-gray-600 text-[10px] mx-0.5",children:""})]},r))})]})}function $w({partitions:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"MBR Partition Table",count:e.length}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"#"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Type ID"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Active"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Start Sector"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Sectors"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Size"})]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50",children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:r+1}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:s.jsx(Rw,{id:t.id})}),s.jsx("td",{className:"px-3 py-1.5",children:t.active?s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"active"}):s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-500 dark:text-gray-400",children:t.startSector.toLocaleString()}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-500 dark:text-gray-400",children:t.sectorCount.toLocaleString()}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(t.sizeBytes)})]},r))})]})})]})}const e0={"0x7":"NTFS / exFAT / HPFS","0x83":"Linux","0x82":"Linux Swap","0x8e":"Linux LVM","0xfd":"Linux RAID","0xc":"FAT32 (LBA)","0xb":"FAT32 (CHS)","0xe":"FAT16 (LBA)","0x6":"FAT16","0x1":"FAT12","0xef":"EFI System","0xee":"GPT Protective MBR","0x0":"Empty"};function Rw({id:e}){const t=e0[e.toLowerCase()]||e0[e]||"";return s.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-300 text-[10px]",children:e}),t&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:t})]})}function Ow({warnings:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"VDDK Warnings",count:e.length}),s.jsx("div",{className:"space-y-1.5",children:e.map((t,r)=>s.jsxs("div",{className:"flex items-start gap-2 px-3 py-2 rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/10 text-xs text-amber-800 dark:text-amber-200",children:[s.jsx("span",{className:"flex-shrink-0 mt-0.5",children:""}),s.jsx("span",{children:t})]},r))})]})}function Bw(e){const t={apiVersion:"",kind:"",metadata:{name:"",labels:{}},firmware:"",resources:{memory:"",cpuCores:0},features:[],clock:{offset:"",timers:{}},disks:[],volumes:[],interfaces:[],networks:[],rng:!1,terminationGracePeriod:0,generatedBy:"",rawYaml:""};let r=-1;for(let h=0;h<e.length;h++)if(e[h].trim()==="---"||e[h].trim().startsWith("apiVersion:")){r=h;break}if(r===-1)return t;const n=e.slice(r);t.rawYaml=n.join(`
`);for(let h=0;h<e.length;h++){const v=e[h].match(/^#\s*generated by\s+(.+)/i);if(v){t.generatedBy=v[1].trim();break}}const a=[{indent:-1,ctx:"root"}];function i(){return a[a.length-1].ctx}function l(h,v){a.push({indent:h,ctx:v})}function o(h){for(;a.length>1&&a[a.length-1].indent>=h;)a.pop()}let c={},d={},u={},p={},f="";for(const h of n){if(h.trim()===""||h.trim()==="---"||h.trim().startsWith("#"))continue;const v=h.search(/\S/),k=h.trim();o(v);const b=i(),g=k.match(/^(\S[^:]*?):\s*(.*)/),m=k.startsWith("- ");if(g){const x=g[1].trim(),j=g[2].replace(/^["']|["']$/g,"").trim();b==="root"?x==="apiVersion"?t.apiVersion=j:x==="kind"?t.kind=j:x==="metadata"?l(v,"metadata"):x==="spec"&&l(v,"spec"):b==="metadata"?x==="name"?t.metadata.name=j:x==="labels"&&l(v,"labels"):b==="labels"?t.metadata.labels[x]=j:b==="spec"?x==="template"&&l(v,"template"):b==="template"?x==="spec"&&l(v,"templateSpec"):b==="templateSpec"?x==="domain"?l(v,"domain"):x==="volumes"?l(v,"volumes"):x==="networks"?l(v,"networks"):x==="terminationGracePeriodSeconds"&&(t.terminationGracePeriod=parseInt(j,10)||0):b==="domain"?x==="firmware"?l(v,"firmware"):x==="resources"?l(v,"resources"):x==="cpu"?l(v,"cpu"):x==="devices"&&l(v,"devices"):b==="firmware"?x==="bootloader"&&l(v,"bootloader"):b==="bootloader"?x==="bios"?t.firmware="BIOS":x==="efi"&&(t.firmware="UEFI"):b==="resources"?x==="clock"?l(v,"clock"):x==="requests"?l(v,"requests"):x==="features"&&l(v,"features"):b==="requests"?x==="memory"&&(t.resources.memory=j):b==="clock"?x==="utc"?t.clock.offset="UTC":x==="timer"&&l(v,"timers"):b==="timers"?(f=x,t.clock.timers[x]={},l(v,"timerEntry")):b==="timerEntry"?t.clock.timers[f][x]=j:b==="cpu"?x==="cores"&&(t.resources.cpuCores=parseInt(j,10)||0):b==="devices"?x==="rng"?t.rng=!0:x==="disks"?l(v,"disks"):x==="interfaces"&&l(v,"interfaces"):b==="diskEntry"?x==="name"?c.name=j:x==="disk"&&l(v,"diskProp"):b==="diskProp"?x==="bus"&&(c.bus=j):b==="ifaceEntry"?x==="name"?u.name=j:x==="bridge"?u.type="bridge":x==="masquerade"?u.type="masquerade":x==="sriov"?u.type="sriov":x==="macAddress"?u.macAddress=j:x==="model"&&(u.model=j):b==="volumeEntry"?x==="name"?d.name=j:x==="hostDisk"&&l(v,"hostDisk"):b==="hostDisk"?x==="path"?d.path=j:x==="type"&&(d.type=j):b==="networkEntry"&&(x==="name"?p.name=j:x==="networkName"&&(p.networkName=j))}if(m){const x=k.slice(2);if(b==="disks"){c.name&&t.disks.push({name:c.name,bus:c.bus||""}),c={},l(v,"diskEntry");const j=x.match(/^(\S[^:]*?):\s*(.*)/);if(j){const N=j[1].trim();N==="disk"?l(v+2,"diskProp"):N==="name"&&(c.name=j[2].replace(/^["']|["']$/g,"").trim())}}else if(b==="interfaces"){u.name&&t.interfaces.push({name:u.name,type:u.type||"",macAddress:u.macAddress||"",model:u.model||""}),u={},l(v,"ifaceEntry");const j=x.match(/^(\S[^:]*?):\s*(.*)/);if(j){const N=j[1].trim(),y=j[2].replace(/^["']|["']$/g,"").trim();N==="name"&&(u.name=y)}}else if(b==="volumes"){d.name&&t.volumes.push({name:d.name,path:d.path||"",type:d.type||""}),d={},l(v,"volumeEntry");const j=x.match(/^(\S[^:]*?):\s*(.*)/);if(j){const N=j[1].trim();N==="hostDisk"?l(v+2,"hostDisk"):N==="name"&&(d.name=j[2].replace(/^["']|["']$/g,"").trim())}}else if(b==="networks"){p.name&&t.networks.push({name:p.name,networkName:p.networkName||""}),p={},l(v,"networkEntry");const j=x.match(/^(\S[^:]*?):\s*(.*)/);if(j){const N=j[1].trim(),y=j[2].replace(/^["']|["']$/g,"").trim();N==="networkName"?p.networkName=y:N==="name"&&(p.name=y)}}}}return c.name&&t.disks.push({name:c.name,bus:c.bus||""}),u.name&&t.interfaces.push({name:u.name,type:u.type||"",macAddress:u.macAddress||"",model:u.model||""}),d.name&&t.volumes.push({name:d.name,path:d.path||"",type:d.type||""}),p.name&&t.networks.push({name:p.name,networkName:p.networkName||""}),t}function bx(e){const t=e.toLowerCase();return t.includes("creating")&&t.includes("output")&&t.includes("metadata")}function Vw({content:e}){const t=S.useMemo(()=>Bw(e),[e]),[r,n]=S.useState(!1);if(!t.rawYaml)return null;const a=new Map(t.volumes.map(l=>[l.name,l])),i=new Map(t.networks.map(l=>[l.name,l]));return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2.5 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-200",children:t.metadata.name||"Unknown VM"}),t.kind&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-indigo-50 dark:bg-indigo-900/20 text-[9px] font-semibold text-indigo-600 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:t.kind}),t.apiVersion&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-[9px] text-slate-500 dark:text-gray-400",children:t.apiVersion}),t.firmware&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold border ${t.firmware==="UEFI"?"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 border-purple-200 dark:border-purple-800":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 border-blue-200 dark:border-blue-800"}`,children:t.firmware}),t.generatedBy&&s.jsx("span",{className:"ml-auto text-[10px] text-slate-400 dark:text-gray-500 italic",children:t.generatedBy})]}),Object.keys(t.metadata.labels).length>0&&s.jsx("div",{className:"px-3 py-2 flex flex-wrap gap-1.5",children:Object.entries(t.metadata.labels).map(([l,o])=>{const c=l.includes("/")?l.split("/").pop():l;return s.jsxs("span",{className:"inline-flex items-baseline gap-1 px-1.5 py-0.5 rounded text-[10px] bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-300 border border-slate-200 dark:border-slate-700",title:l,children:[s.jsxs("span",{className:"text-slate-400 dark:text-gray-500",children:[c,":"]}),s.jsx("span",{className:"font-mono",children:o})]},l)})})]}),(t.resources.memory||t.resources.cpuCores>0)&&s.jsxs("div",{children:[s.jsx(H,{title:"Compute Resources"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1.5 px-3 py-2.5 text-[11px]",children:[t.resources.cpuCores>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"CPU Cores"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200 font-semibold",children:t.resources.cpuCores})]}),t.resources.memory&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Memory"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200 font-semibold",children:t.resources.memory})]}),t.firmware&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Firmware"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:t.firmware})]}),t.rng&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"RNG Device"}),s.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 text-[10px]",children:"Enabled"})]})]})})]}),t.disks.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:`Storage (${t.disks.length} disk${t.disks.length>1?"s":""})`}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"#"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Name"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Bus"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Volume Path"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Type"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:t.disks.map((l,o)=>{const c=a.get(l.name);return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-400 dark:text-gray-500",children:o}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-700 dark:text-gray-200",children:l.name}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold border ${l.bus==="virtio"?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800":l.bus==="scsi"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 border-blue-200 dark:border-blue-800":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-gray-400 border-slate-200 dark:border-slate-700"}`,children:l.bus||"default"})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400 truncate max-w-[300px]",title:c==null?void 0:c.path,children:(c==null?void 0:c.path)||"--"}),s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:(c==null?void 0:c.type)||"--"})]},o)})})]})})]}),t.interfaces.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:`Networking (${t.interfaces.length} interface${t.interfaces.length>1?"s":""})`}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Network"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Type"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"MAC Address"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Model"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:t.interfaces.map((l,o)=>{const c=i.get(l.name);return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-700 dark:text-gray-200",children:(c==null?void 0:c.networkName)||l.name}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold border ${l.type==="bridge"?"bg-sky-50 dark:bg-sky-900/20 text-sky-600 dark:text-sky-300 border-sky-200 dark:border-sky-800":l.type==="masquerade"?"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-300 border-amber-200 dark:border-amber-800":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-gray-400 border-slate-200 dark:border-slate-700"}`,children:l.type||"default"})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-600 dark:text-gray-300",children:l.macAddress||"--"}),s.jsx("td",{className:"px-3 py-1.5",children:l.model?s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-500 dark:text-gray-400 border border-slate-200 dark:border-slate-700",children:l.model}):"--"})]},o)})})]})})]}),Object.keys(t.clock.timers).length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Clock & Timers"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:"Offset:"}),s.jsx("span",{className:"text-[11px] text-slate-700 dark:text-gray-200 font-semibold",children:t.clock.offset||"Not set"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 px-3 py-2",children:Object.entries(t.clock.timers).map(([l,o])=>{const c=Object.entries(o).map(([d,u])=>`${d}: ${u}`).join(", ");return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-300 border border-slate-200 dark:border-slate-700",title:c||l,children:[s.jsx("span",{className:"font-semibold",children:l}),c&&s.jsxs("span",{className:"text-slate-400 dark:text-gray-500",children:["(",c,")"]})]},l)})})]})]}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-1.5 text-[11px] text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 transition-colors",children:[s.jsx("svg",{className:`w-3.5 h-3.5 transition-transform ${r?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("span",{className:"font-medium",children:"KubeVirt YAML"})]}),r&&s.jsx("div",{className:"mt-2 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsx("pre",{className:"px-3 py-2 text-[10px] font-mono text-slate-600 dark:text-gray-300 bg-slate-50 dark:bg-slate-900/50 overflow-x-auto max-h-[400px] overflow-y-auto whitespace-pre",children:t.rawYaml})})]})]})}function zw({content:e,toolRun:t,stageStartLine:r,stageEndLine:n}){var u,p,f;const a=S.useMemo(()=>_w(e),[e]),i=S.useMemo(()=>!t||r===void 0||n===void 0?(t==null?void 0:t.apiCalls)??[]:t.apiCalls.filter(h=>h.lineNumber>=r&&h.lineNumber<n),[t,r,n]),l=S.useMemo(()=>!t||r===void 0||n===void 0?(t==null?void 0:t.virtioWin.fileCopies)??[]:t.virtioWin.fileCopies.filter(h=>h.lineNumber>=r&&h.lineNumber<n),[t,r,n]);if(!(a.conversionModule||a.kernels.length>0||a.packageOps.length>0||a.guestCaps||a.initramfs))return null;const c=["is_file","is_dir","is_symlink","is_blockdev","is_chardev","exists","stat","lstat","aug_get","aug_set","aug_rm","aug_match","aug_clear","aug_ls"],d=t&&(i.some(h=>c.includes(h.name))||l.length>0);return s.jsxs("div",{className:"space-y-4",children:[(a.conversionModule||a.guestCaps||a.osDetected)&&s.jsx(Ww,{parsed:a}),d&&t&&s.jsxs("div",{children:[s.jsx(H,{title:"File Operations"}),s.jsx(zc,{apiCalls:i,fileCopies:l,driveMappings:(u=t.guestInfo)==null?void 0:u.driveMappings,fstab:(p=t.guestInfo)==null?void 0:p.fstab,virtioWinIsoPath:(f=t.virtioWin)==null?void 0:f.isoPath,defaultExpandGuest:!0})]}),a.kernels.length>0&&s.jsx(Hw,{kernels:a.kernels,candidates:a.candidatePackages}),a.packageOps.length>0&&s.jsx(Uw,{ops:a.packageOps}),(a.boot.bootloader||a.boot.blockDeviceMap.length>0||a.boot.grubCmdline)&&s.jsx(Gw,{boot:a.boot,defaultKernel:a.defaultKernel,modprobeAliases:a.modprobeAliases}),a.initramfs&&s.jsx(Yw,{initramfs:a.initramfs}),a.augeasErrors.length>0&&s.jsx(Qw,{errors:a.augeasErrors})]})}function Ww({parsed:e}){const{guestCaps:t}=e;return s.jsxs("div",{children:[s.jsx(H,{title:"Conversion Summary"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[11px]",children:[e.conversionModule&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Module:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:e.conversionModule})]}),e.osDetected&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"OS:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:e.osDetected})]}),t&&s.jsxs(s.Fragment,{children:[t.machine&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Machine:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.machine})]}),t.arch&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Arch:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.arch})]})]})]}),t&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsxs(se,{color:"blue",children:["Block: ",t.blockBus||"n/a"]}),s.jsxs(se,{color:"blue",children:["Net: ",t.netBus||"n/a"]}),t.virtio10&&s.jsx(se,{color:"green",children:"VirtIO 1.0"}),t.virtioRng&&s.jsx(se,{color:"green",children:"RNG"}),t.virtioBalloon&&s.jsx(se,{color:"green",children:"Balloon"}),t.pvpanic&&s.jsx(se,{color:"green",children:"pvpanic"}),t.virtioSocket&&s.jsx(se,{color:"green",children:"vsock"}),t.rtcUtc&&s.jsx(se,{color:"slate",children:"RTC UTC"})]})]})]})}function Hw({kernels:e,candidates:t}){return s.jsxs("div",{children:[s.jsx(H,{title:"Kernel Analysis"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[t.length>0&&s.jsxs("div",{className:"px-3 py-1.5 border-b border-slate-100 dark:border-slate-800 text-[10px] text-slate-500 dark:text-gray-400",children:["Candidate packages:"," ",t.map((r,n)=>s.jsxs("span",{className:"font-mono text-slate-600 dark:text-gray-300",children:[r,n<t.length-1?", ":""]},n))]}),s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Package"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Version"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Modules"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"VirtIO Drivers"})]})}),s.jsx("tbody",{children:e.map((r,n)=>s.jsxs("tr",{className:`border-b border-slate-50 dark:border-slate-800/50 last:border-b-0 ${r.isBest?"bg-green-50 dark:bg-green-900/10":""}`,children:[s.jsxs("td",{className:"px-3 py-1.5",children:[s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:r.name}),r.isBest&&s.jsx(se,{color:"green",children:"best"}),r.isDefault&&s.jsx(se,{color:"blue",children:"default"})]}),s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:r.version}),s.jsx("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:r.modulesCount>0?r.modulesCount:"-"}),s.jsx("td",{className:"px-3 py-1",children:s.jsx("div",{className:"flex flex-wrap gap-0.5",children:Object.entries(r.virtio).map(([a,i])=>s.jsx(se,{color:i?"green":"red",children:a},a))})})]},n))})]})]})]})}function Uw({ops:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Package Removal"}),e.map((t,r)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden mb-2",children:[s.jsxs("div",{className:"px-3 py-1.5 bg-slate-50 dark:bg-slate-800/50 flex items-baseline justify-between border-b border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-baseline gap-2 min-w-0",children:[s.jsx(se,{color:"slate",children:t.manager}),s.jsx("span",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300 truncate",children:t.command})]}),s.jsxs("div",{className:"flex items-baseline gap-2 flex-shrink-0",children:[t.freedSpace&&s.jsxs(se,{color:"green",children:["Freed: ",t.freedSpace]}),t.durationSecs!==null&&s.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-gray-500",children:[t.durationSecs.toFixed(1),"s"]})]})]}),t.packages.length>0&&s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Package"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Version"}),t.manager!=="apt"&&s.jsx("th",{className:"px-3 py-1 font-medium",children:"Size"})]})}),s.jsx("tbody",{children:t.packages.map((n,a)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsxs("td",{className:"px-3 py-1",children:[s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:n.name}),n.arch&&s.jsx("span",{className:"text-[9px] text-slate-400 dark:text-gray-500 ml-1",children:n.arch})]}),s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:n.version}),t.manager!=="apt"&&s.jsx("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:n.size})]},a))})]})]},r))]})}function Gw({boot:e,defaultKernel:t,modprobeAliases:r}){const[n,a]=S.useState(!1);return s.jsxs("div",{children:[s.jsx(H,{title:"Boot & Driver Configuration"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[11px]",children:[e.bootloader&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Bootloader:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:e.bootloader}),e.bootloaderPath&&s.jsxs("span",{className:"font-mono text-[10px] text-slate-400 dark:text-gray-500 ml-1",children:["(",e.bootloaderPath,")"]})]}),t&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"DEFAULTKERNEL:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t})]})]}),e.blockDeviceMap.length>0&&s.jsxs("div",{className:"text-[11px]",children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Block device map:"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-0.5",children:e.blockDeviceMap.map((i,l)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded border bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 font-mono text-[10px]",children:[s.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:i.from}),s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""}),s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:i.to})]},l))})]}),r.length>0&&s.jsxs("div",{className:"text-[11px]",children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Modprobe aliases added:"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-0.5",children:r.map((i,l)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded border bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 font-mono text-[10px]",children:[s.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:i.alias}),s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""}),s.jsx("span",{className:"text-green-600 dark:text-green-400",children:i.module})]},l))})]}),e.grubCmdline&&s.jsxs("div",{className:"text-[11px]",children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"GRUB_CMDLINE_LINUX:"}),s.jsx("div",{className:"mt-0.5 font-mono text-[10px] text-slate-600 dark:text-gray-300 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 break-all",children:e.grubCmdline})]}),e.fstabEntries.length>0&&s.jsxs("div",{className:"text-[11px]",children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"fstab entries:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-0.5",children:e.fstabEntries.map((i,l)=>s.jsx("span",{className:"font-mono text-[10px] px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-300",children:i.spec},l))})]}),e.efiFiles.length>0&&s.jsxs("div",{className:"text-[11px]",children:[s.jsxs("button",{onClick:()=>a(!n),className:"text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 transition-colors",children:[s.jsx(Te,{expanded:n,className:"text-[9px] mr-1"}),"EFI files (",e.efiFiles.length,")"]}),n&&s.jsx("div",{className:"mt-1 pl-3 space-y-0.5",children:e.efiFiles.map((i,l)=>s.jsx("div",{className:"font-mono text-[10px] text-slate-500 dark:text-gray-400",children:i},l))})]})]})]})}function Kw(e){const t=new Map;for(const r of e){const n=r.replace(/^kernel\//,"").split("/");let a;n.length>=3?a=n.slice(0,2).join("/"):n.length===2?a=n[0]:a="other",t.has(a)||t.set(a,[]),t.get(a).push(n[n.length-1])}return new Map([...t.entries()].sort((r,n)=>n[1].length-r[1].length||r[0].localeCompare(n[0])))}function Gr({label:e,count:t,items:r,grouped:n,badgeColor:a="slate"}){const[i,l]=S.useState(!1),[o,c]=S.useState(null);return t===0?null:s.jsxs("div",{className:"text-[11px]",children:[s.jsxs("button",{onClick:()=>l(!i),className:"flex items-center gap-1.5 text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 transition-colors",children:[s.jsx(Te,{expanded:i,className:"text-[9px]"}),s.jsx("span",{children:e}),s.jsx(se,{color:a,children:t})]}),i&&n&&s.jsx("div",{className:"mt-1 ml-3 space-y-1 max-h-[400px] overflow-y-auto",children:[...n.entries()].map(([d,u])=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>c(o===d?null:d),className:"flex items-center gap-1 text-slate-600 dark:text-gray-300 hover:text-slate-800 dark:hover:text-gray-100 transition-colors",children:[s.jsx(Te,{expanded:o===d,className:"text-[8px]"}),s.jsxs("span",{className:"font-mono text-[10px] text-blue-600 dark:text-blue-400",children:[d,"/"]}),s.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-gray-500",children:["(",u.length,")"]})]}),o===d&&s.jsx("div",{className:"ml-3 mt-0.5 flex flex-wrap gap-1",children:u.map((p,f)=>s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[9px] font-mono text-slate-600 dark:text-gray-300",children:p},f))})]},d))}),i&&r&&!n&&s.jsx("div",{className:"mt-1 ml-3 flex flex-wrap gap-1 max-h-[300px] overflow-y-auto",children:r.map((d,u)=>s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[9px] font-mono text-slate-600 dark:text-gray-300 break-all",children:d},u))})]})}function Yw({initramfs:e}){const t=e.tool==="dracut"?"dracut":e.tool==="update-initramfs"?"update-initramfs":e.tool,r=S.useMemo(()=>Kw(e.includedModules),[e.includedModules]),n=e.binaries.length>0||e.firmware.length>0||e.configs.length>0||e.hooks.length>0||e.copyDirs.length>0||e.microcodeCount>0;return s.jsxs("div",{children:[s.jsx(H,{title:`Initramfs Rebuild (${t})`}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-2",children:[e.command&&s.jsx("div",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 break-all",children:e.command}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.durationSecs!==null&&s.jsxs(se,{color:"blue",children:["Duration: ",e.durationSecs.toFixed(1),"s"]}),e.compressionMethod&&s.jsxs(se,{color:"slate",children:["Compression: ",e.compressionMethod]}),e.initramfsPath&&s.jsxs(se,{color:"slate",children:["Output: ",e.initramfsPath]})]}),n&&s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.includedModules.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",children:[e.includedModules.length," modules"]}),e.binaries.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300",children:[e.binaries.length," binaries"]}),e.firmware.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:[e.firmware.length," firmware"]}),e.configs.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:[e.configs.length," configs"]}),e.hooks.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:[e.hooks.length," hooks"]}),e.microcodeCount>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-medium bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300",children:[e.microcodeCount," microcode bundles"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Gr,{label:"Kernel modules",count:e.includedModules.length,grouped:r,badgeColor:"blue"}),s.jsx(Gr,{label:"Hooks",count:e.hooks.length,items:e.hooks,badgeColor:"amber"}),e.copyDirs.length>0&&s.jsx(Gr,{label:"Copied module directories",count:e.copyDirs.length,items:e.copyDirs.map(a=>a.excludes?`${a.dir} ${a.excludes}`:a.dir),badgeColor:"slate"}),s.jsx(Gr,{label:"Binaries & libraries",count:e.binaries.length,items:e.binaries,badgeColor:"slate"}),s.jsx(Gr,{label:"Firmware",count:e.firmware.length,items:e.firmware,badgeColor:"amber"}),s.jsx(Gr,{label:"Configuration files",count:e.configs.length,items:e.configs,badgeColor:"green"})]})]})]})}function Qw({errors:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{children:[s.jsx(H,{title:"Augeas Parse Errors"}),s.jsxs("div",{className:"border border-amber-200 dark:border-amber-800 rounded-lg overflow-hidden",children:[s.jsx("button",{onClick:()=>r(!t),className:"w-full px-3 py-1.5 flex items-center justify-between bg-amber-50 dark:bg-amber-900/10 text-[11px] text-amber-700 dark:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors",children:s.jsxs("span",{children:[s.jsx(Te,{expanded:t,className:"text-[9px] mr-1"}),e.length," file",e.length!==1?"s":""," failed to parse"]})}),t&&s.jsx("div",{className:"px-3 py-2 space-y-1 bg-white dark:bg-slate-900",children:e.map((n,a)=>s.jsxs("div",{className:"text-[10px] font-mono",children:[s.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:n.file}),n.message&&s.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:[" "," ",n.message,n.line&&` at line ${n.line}`,n.char&&`:${n.char}`]})]},a))})]})]})}function Xw({content:e,toolRun:t,stageStartLine:r,stageEndLine:n}){var f,h,v;const a=S.useMemo(()=>Pw(e),[e]),i=S.useMemo(()=>!t||r===void 0||n===void 0?(t==null?void 0:t.registryHiveAccesses)??[]:t.registryHiveAccesses.filter(k=>k.lineNumber>=r&&k.lineNumber<n),[t,r,n]),l=S.useMemo(()=>xx(i),[i]),o=S.useMemo(()=>!t||r===void 0||n===void 0?(t==null?void 0:t.apiCalls)??[]:t.apiCalls.filter(k=>k.lineNumber>=r&&k.lineNumber<n),[t,r,n]),c=S.useMemo(()=>!t||r===void 0||n===void 0?(t==null?void 0:t.virtioWin.fileCopies)??[]:t.virtioWin.fileCopies.filter(k=>k.lineNumber>=r&&k.lineNumber<n),[t,r,n]);if(!(a.conversionModule||a.osInfo.productName||a.guestCaps||l.length>0))return null;const u=["is_file","is_dir","is_symlink","is_blockdev","is_chardev","exists","stat","lstat","aug_get","aug_set","aug_rm","aug_match","aug_clear","aug_ls"],p=t&&(o.some(k=>u.includes(k.name))||c.length>0);return s.jsxs("div",{className:"space-y-4",children:[(a.conversionModule||a.osInfo.productName||a.guestCaps)&&s.jsx(qw,{parsed:a}),l.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Registry Hive Operations"}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[l.length," registry hive",l.length!==1?"s":""," accessed (",i.length," key path",i.length!==1?"s":""," traversed)"]}),s.jsx("div",{className:"space-y-2",children:l.map(k=>s.jsx(hx,{group:k},k.hivePath))})]}),a.warnings.length>0&&s.jsx(Zw,{warnings:a.warnings}),p&&t&&s.jsxs("div",{children:[s.jsx(H,{title:"File Operations"}),s.jsx(zc,{apiCalls:o,fileCopies:c,driveMappings:(f=t.guestInfo)==null?void 0:f.driveMappings,fstab:(h=t.guestInfo)==null?void 0:h.fstab,virtioWinIsoPath:(v=t.virtioWin)==null?void 0:v.isoPath,defaultExpandGuest:!0})]})]})}function qw({parsed:e}){const{osInfo:t,guestCaps:r}=e;return s.jsxs("div",{children:[s.jsx(H,{title:"Conversion Summary"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[11px]",children:[e.conversionModule&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Module:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:e.conversionModule})]}),t.productName&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"OS:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:t.productName})]}),t.productVariant&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Variant:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:t.productVariant})]}),t.osinfo&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"OSInfo ID:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.osinfo})]}),t.arch&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Arch:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.arch})]}),(r==null?void 0:r.machine)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Machine:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:r.machine})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[11px]",children:[t.controlSet&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Control Set:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.controlSet})]}),t.systemRoot&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"System Root:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.systemRoot})]}),e.virtioIsoPath&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"VirtIO ISO:"})," ",s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200",children:e.virtioIsoPath}),e.virtioIsoVersion&&s.jsxs("span",{className:"text-slate-400 dark:text-gray-500 ml-1",children:["v",e.virtioIsoVersion]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.hasVirtioDrivers&&s.jsx(se,{color:"green",children:"VirtIO drivers installed"}),r&&s.jsxs(s.Fragment,{children:[s.jsxs(se,{color:"blue",children:["Block: ",r.blockBus||"n/a"]}),s.jsxs(se,{color:"blue",children:["Net: ",r.netBus||"n/a"]}),r.virtio10&&s.jsx(se,{color:"green",children:"VirtIO 1.0"}),r.virtioRng&&s.jsx(se,{color:"green",children:"RNG"}),r.virtioBalloon&&s.jsx(se,{color:"green",children:"Balloon"}),r.pvpanic&&s.jsx(se,{color:"green",children:"pvpanic"}),r.virtioSocket?s.jsx(se,{color:"green",children:"vsock"}):s.jsx(se,{color:"slate",children:"vsock off"}),r.rtcUtc?s.jsx(se,{color:"slate",children:"RTC UTC"}):s.jsx(se,{color:"slate",children:"RTC local"})]})]})]})]})}function Zw({warnings:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Warnings"}),s.jsx("div",{className:"border border-amber-200 dark:border-amber-800 rounded-lg px-3 py-2 bg-amber-50 dark:bg-amber-900/10 space-y-1",children:e.map((t,r)=>s.jsx("div",{className:"text-[10px] text-amber-700 dark:text-amber-300",children:t},r))})]})}function jx(e){const t=e.toLowerCase();return Kc(t)||Uc(t)||Hc(t)?!1:t.includes("inspecting")&&t.includes("source")||t.includes("detecting")&&(t.includes("bios")||t.includes("uefi")||t.includes("boot"))||t.includes("checking")&&t.includes("filesystem")&&t.includes("integrity")||t.includes("mapping")&&t.includes("filesystem")}function Uc(e){const t=e.toLowerCase();return t.includes("checking")&&t.includes("filesystem")&&t.includes("integrity")}function wx(e){const t=e.toLowerCase();return t.includes("opening")&&t.includes("source")}function Nx(e){const t=e.toLowerCase();return t.includes("setting up")&&t.includes("source")}function Sx(e){const t=e.toLowerCase();return t.includes("setting up")&&t.includes("destination")}function Gc(e){return e.toLowerCase().includes("selinux")}function Cx(e){const t=e.toLowerCase();return t.includes("closing")&&t.includes("overlay")}function Mx(e){const t=e.toLowerCase();return t.includes("finishing")&&t.includes("off")}function Lx(e){const t=e.toLowerCase();return t.includes("setting")&&t.includes("hostname")}function Kc(e){const t=e.toLowerCase();return(t.includes("bios")||t.includes("uefi"))&&t.includes("boot")}function Jw(e){const t=e.toLowerCase();return t.includes("seed")||t.includes("random")}const eN=[jx,wx,Nx,Sx,Gc,Cx,Mx,Lx,Kc,Uc,Hc,kx,bx];function _x(e){const t=e.toLowerCase();return eN.some(r=>r(e))||Jw(e)||t.includes("checking")&&t.includes("free")&&t.includes("disk")||t.includes("checking")&&t.includes("free")&&t.includes("space")}function Yc(e,t){const r=e.toLowerCase();return!!(r.includes("conversion")&&(r.includes("linux")||r.includes("rhel"))||r.includes("converting")&&!r.includes("windows")&&r.includes("to run on")||r.includes("converting")&&!r.includes("windows")&&r.includes("to ")||r.includes("picked conversion module")&&!r.includes("windows")||t&&!_x(e)&&Ew(t)&&!yx(t))}function li(e,t){const r=e.toLowerCase();return!!(r.includes("converting")&&r.includes("windows")||r.includes("picked conversion module")&&r.includes("windows")||r.includes("conversion")&&r.includes("windows")||t&&!_x(e)&&yx(t))}function tN({content:e}){const t=S.useMemo(()=>Cw(e),[e]);return t.disks.length>0||t.filesystems.length>0||t.inspectionSteps.length>0||Object.keys(t.osInfo).length>0||t.fsckResults.length>0||t.bootDevice!==null||t.fstrimResults.length>0?s.jsxs("div",{className:"space-y-4",children:[t.disks.length>0&&s.jsx(rN,{disks:t.disks,filesystems:t.filesystems,lvmVolumes:t.lvmVolumes}),t.inspectionSteps.length>0&&s.jsx(nN,{steps:t.inspectionSteps}),t.bootDevice&&s.jsx(aN,{info:t.bootDevice}),t.fsckResults.length>0&&s.jsx(lN,{results:t.fsckResults}),t.fstrimResults.length>0&&s.jsx(iN,{results:t.fstrimResults}),Object.keys(t.osInfo).length>0&&s.jsx(dN,{osInfo:t.osInfo})]}):null}function rN({disks:e,filesystems:t,lvmVolumes:r}){const n=new Map(t.map(i=>[i.device,i.fsType])),a=i=>({fat32:"vfat",fat16:"vfat",fat12:"vfat","linux-swap(v1)":"swap","linux-swap":"swap",hfs:"hfsplus"})[i.toLowerCase()]||i;return s.jsxs("div",{children:[s.jsx(H,{title:"Disk Layout",count:e.length}),s.jsxs("div",{className:"space-y-3",children:[e.map(i=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-baseline gap-3 px-3 py-2 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("span",{className:"font-mono text-xs font-semibold text-slate-700 dark:text-gray-200",children:i.device}),s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:q(i.sizeBytes)}),s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300 font-mono",children:i.tableType}),i.model&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 truncate max-w-[200px]",children:i.model})]}),i.partitions.length>0&&s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"#"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Size"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"FS Type"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Name / Flags"})]})}),s.jsx("tbody",{children:i.partitions.map(l=>{const o=`${i.device}${l.number}`,c=n.get(o)||a(l.fsType),d=kw(l.gptTypeGuid),u=[l.name,l.flags].filter(Boolean).join(", ");return s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:o}),s.jsx("td",{className:"px-3 py-1.5 text-slate-600 dark:text-gray-300",children:q(l.sizeBytes)}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-mono text-[10px]",children:c||""})}),s.jsxs("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:[d?s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 text-[10px]",children:d}):u||"",d&&u&&s.jsx("span",{className:"ml-1.5 text-[10px] text-slate-400 dark:text-gray-500",children:u})]})]},l.number)})})]})]},i.device)),r.length>0&&s.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 font-semibold uppercase",children:"LVM:"}),r.map(i=>s.jsx("span",{className:"px-2 py-0.5 rounded bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-[10px] font-mono",children:i},i))]})]})]})}const ua={root:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",boot:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",swap:"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800",default:"bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-400 border-slate-200 dark:border-slate-700"};function sN(e){const t=e.toLowerCase();return t.includes("root")?ua.root:t.includes("boot")||t.includes("grub")?ua.boot:t.includes("swap")?ua.swap:ua.default}function nN({steps:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Partition Inspection",count:e.length}),s.jsx("div",{className:"space-y-1.5",children:e.map((t,r)=>s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px]",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 flex-shrink-0 translate-y-[5px]"}),s.jsx("span",{className:"font-mono font-medium text-slate-700 dark:text-gray-200 min-w-[110px]",children:t.device}),s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-mono text-[10px] min-w-[40px] text-center",children:t.fsType}),t.result?s.jsx("span",{className:`px-2 py-0.5 rounded border text-[10px] font-medium ${sN(t.result)}`,children:t.result}):s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 italic",children:"checked"})]},r))})]})}function aN({info:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Boot Device"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-3 space-y-2",children:[e.device&&s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px]",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Boot filesystem on:"}),s.jsx("span",{className:"font-mono font-medium text-slate-700 dark:text-gray-200",children:e.device})]}),e.grubSignature!==null&&s.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"GRUB signature:"}),s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${e.grubSignature?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-gray-400"}`,children:e.grubSignature?"found":"not found"})]}),e.mountPoints.length>0&&s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 font-semibold uppercase",children:"Mount Points"}),e.mountPoints.map((t,r)=>s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px] pl-2",children:[s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 min-w-[130px]",children:t.device}),s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:""}),s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-200",children:t.mountpoint})]},r))]})]})]})}function iN({results:e}){const t=e.reduce((r,n)=>r+n.trimmedBytes,0);return s.jsxs("div",{children:[s.jsx(H,{title:"Filesystem Trim (unused space)",count:e.length}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Trimmed"})]})}),s.jsxs("tbody",{children:[e.map((r,n)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-700 dark:text-gray-200",children:r.device}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:r.trimmedHuman})]},n)),e.length>1&&s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-medium text-slate-500 dark:text-gray-400",children:"Total"}),s.jsx("td",{className:"px-3 py-1.5 text-right font-medium text-slate-700 dark:text-gray-200",children:q(t)})]})]})]})})]})}function lN({results:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Filesystem Integrity Checks",count:e.length}),s.jsx("div",{className:"space-y-2",children:e.map((t,r)=>s.jsx(oN,{result:t},r))})]})}function oN({result:e}){const[t,r]=S.useState(!1),n=e.exitCode===0,a=e.passes.length>0||!!e.summary;return s.jsxs("div",{className:`border rounded-lg overflow-hidden ${n?"border-green-200 dark:border-green-800":"border-red-200 dark:border-red-800"}`,children:[s.jsxs("div",{onClick:a?()=>r(!t):void 0,className:`flex items-center gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 ${a?"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/70":""} transition-colors`,children:[a&&s.jsx(Te,{expanded:t,className:"text-[9px] text-slate-400 dark:text-gray-500"}),s.jsx("span",{className:"text-sm",children:n?"":""}),s.jsx("span",{className:"font-mono text-[11px] font-medium text-slate-700 dark:text-gray-200",children:e.device}),e.exitCode>=0&&s.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${n?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:["exit ",e.exitCode]})]}),t&&a&&s.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-mono text-slate-500 dark:text-gray-400 space-y-0.5",children:[e.passes.map((i,l)=>s.jsx("div",{children:i},l)),e.summary&&s.jsx("div",{className:"text-slate-600 dark:text-gray-300 mt-1",children:e.summary})]})]})}const cN={root:"Root Device",type:"OS Type",distro:"Distribution",osinfo:"OS Info ID",arch:"Architecture",major_version:"Major Version",minor_version:"Minor Version",package_format:"Package Format",package_management:"Package Manager",product_name:"Product Name",product_variant:"Variant",hostname:"Hostname",windows_systemroot:"System Root",windows_software_hive:"Software Hive",windows_system_hive:"System Hive",windows_current_control_set:"Control Set",drive_mappings:"Drive Mappings"};function dN({osInfo:e}){var n;const t=((n=e.type)==null?void 0:n.toLowerCase())||"",r=t==="windows"?"":t==="linux"?"":"";return s.jsxs("div",{children:[s.jsx(H,{title:"Detected Operating System"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.product_name&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-sm",children:r}),s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-200",children:e.product_name}),e.product_variant&&e.product_variant!=="unknown"&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300",children:e.product_variant})]}),s.jsx("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1 px-3 py-2 text-[11px]",children:Object.entries(e).map(([a,i])=>{if(a==="product_name"||a==="product_variant"||!i||i==="unknown"||i==="")return null;const l=cN[a]||a.replace(/_/g," ");return s.jsxs("div",{className:"contents",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 capitalize whitespace-nowrap",children:l}),s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-200 break-all",children:i})]},a)})})]})]})}function uN(e){var c;const t={memsize:0,smp:0,backend:"",identifier:"",drives:[],qemuCmdLine:[]},r=[],n=[],a=new Set;let i=!1;const l=[];let o=null;for(let d=0;d<e.length;d++){const u=e[d],p=u.match(/set_memsize\s+=?\s*(\d+)/);p&&parseInt(p[1],10)>0&&(t.memsize=parseInt(p[1],10));const f=u.match(/set_smp\s+=?\s*(\d+)/);f&&parseInt(f[1],10)>0&&(t.smp=parseInt(f[1],10));const h=u.match(/get_backend\s+=\s+"([^"]+)"/);h&&(t.backend=h[1]);const v=u.match(/set_identifier\s+"([^"]+)"/);v&&(t.identifier=v[1]);const k=u.match(/add_drive\s+"[^"]*"\s+"format:\w+"\s+"protocol:(\w+)"\s+"server:([^"]+)"/);if(k&&t.drives.push({protocol:k[1],server:k[2]}),u.includes("/usr/libexec/qemu-kvm")&&!u.startsWith("libguestfs:")){i=!0,l.push(u.replace(/\s*\\$/,"").trim());continue}if(i){const M=u.replace(/\s*\\$/,"").trim();if(M.startsWith("-")||M.startsWith('"')){l.push(M);continue}else i=!1,t.qemuCmdLine=l}u.includes("begin building supermin appliance")&&!a.has("supermin-start")&&(a.add("supermin-start"),r.push({timestamp:"",label:"Building supermin appliance"})),u.includes("finished building supermin appliance")&&!a.has("supermin-done")&&(a.add("supermin-done"),r.push({timestamp:"",label:"Supermin appliance built"}));const b=u.match(/supermin: kernel: picked vmlinuz\s+(.+)/);b&&!a.has("kernel-pick")&&(a.add("kernel-pick"),r.push({timestamp:"",label:"Kernel selected",detail:b[1].trim()})),u.includes("begin testing qemu features")&&!a.has("qemu-test")&&(a.add("qemu-test"),r.push({timestamp:"",label:"Testing QEMU features"}));const g=u.match(/qemu version:\s+(.+)/);g&&!a.has("qemu-ver")&&(a.add("qemu-ver"),r.push({timestamp:"",label:"QEMU version",detail:g[1].trim()}));const m=u.match(/qemu KVM:\s+(.+)/);m&&!a.has("kvm")&&(a.add("kvm"),r.push({timestamp:"",label:"KVM",detail:m[1].trim()}));const x=u.match(/\[\s*([\d.]+)\]\s+Linux version\s+(\S+)/);x&&!a.has("kernel-boot")&&(a.add("kernel-boot"),r.push({timestamp:x[1],label:"Kernel boot",detail:x[2]}));const j=u.match(/\[\s*([\d.]+)\]\s+scsi\s+\d+:\d+:\d+:\d+:\s+Direct-Access\s+(.+)/);j&&!a.has(`scsi-${j[2]}`)&&(a.add(`scsi-${j[2]}`),r.push({timestamp:j[1],label:"Disk detected",detail:j[2].trim()})),u.includes("appliance is up")&&!a.has("appliance-up")&&(a.add("appliance-up"),r.push({timestamp:"",label:"Appliance is up (guestfsd ready)"}));const N=u.match(/VixDiskLib_Open\s+\(connection,\s+(.+?),\s+\d+,/);N&&(o&&n.push({vmdk:o.vmdk||"",transportMode:o.transportMode||"unknown",fileSize:o.fileSize??null,errors:o.errors||[]}),o={vmdk:N[1].trim(),errors:[]});const y=u.match(/transport mode:\s+(\w+)/);y&&o&&(o.transportMode=y[1]);const C=u.match(/cow: underlying file size:\s+(\d+)/);if(C&&o&&(o.fileSize=parseInt(C[1],10)),o&&(u.includes("error -[")||u.includes("Cannot use advanced transport"))){const M=u.replace(/^.*?debug:\s*/,"").trim();M&&!((c=o.errors)!=null&&c.includes(M))&&o.errors.push(M)}}return o&&n.push({vmdk:o.vmdk||"",transportMode:o.transportMode||"unknown",fileSize:o.fileSize??null,errors:o.errors||[]}),{appliance:t,bootTimeline:r,nbdkitConns:n}}function pN({content:e}){const t=S.useMemo(()=>uN(e),[e]);return t.appliance.memsize>0||t.bootTimeline.length>0||t.nbdkitConns.length>0?s.jsxs("div",{className:"space-y-4",children:[t.appliance.memsize>0&&s.jsx(fN,{config:t.appliance}),t.nbdkitConns.length>0&&s.jsx(xN,{conns:t.nbdkitConns}),t.bootTimeline.length>0&&s.jsx(hN,{events:t.bootTimeline})]}):null}function fN({config:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Libguestfs Appliance VM"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex flex-wrap items-baseline gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50",children:[e.memsize>0&&s.jsxs("span",{className:"px-2 py-0.5 rounded bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-[10px] font-medium",children:["Memory: ",e.memsize," MB"]}),e.smp>0&&s.jsxs("span",{className:"px-2 py-0.5 rounded bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-[10px] font-medium",children:["vCPUs: ",e.smp]}),e.backend&&s.jsxs("span",{className:"px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-300 text-[10px] font-mono",children:["backend: ",e.backend]}),e.identifier&&s.jsxs("span",{className:"px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-gray-300 text-[10px] font-mono",children:["id: ",e.identifier]}),s.jsxs("span",{className:"px-2 py-0.5 rounded bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-[10px] font-medium",children:[e.drives.length," drive",e.drives.length!==1?"s":""]})]}),e.drives.length>0&&s.jsx("div",{className:"px-3 py-2 space-y-1 border-t border-slate-100 dark:border-slate-800",children:e.drives.map((t,r)=>s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px]",children:[s.jsxs("span",{className:"text-slate-400 dark:text-gray-500 w-8",children:["hd",r]}),s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-[10px] font-mono",children:t.protocol}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 truncate",children:t.server})]},r))}),e.qemuCmdLine.length>0&&s.jsx(mN,{cmdLines:e.qemuCmdLine})]})]})}function mN({cmdLines:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800",children:[s.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center justify-between px-3 py-1.5 text-[10px] text-slate-500 dark:text-gray-400 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[s.jsxs("span",{children:["QEMU command (",e.length," args)"]}),s.jsx("span",{children:t?"":"+"})]}),t&&s.jsx("pre",{className:"px-3 py-2 text-[10px] font-mono text-slate-600 dark:text-gray-300 bg-slate-50 dark:bg-slate-900 overflow-x-auto max-h-[300px] overflow-y-auto leading-relaxed",children:e.join(` \\
    `)})]})}function xN({conns:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"VDDK Disk Connections",count:e.length}),s.jsx("div",{className:"space-y-2",children:e.map((t,r)=>s.jsxs("div",{className:`border rounded-lg overflow-hidden ${t.errors.length>0?"border-amber-200 dark:border-amber-800":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("div",{className:"flex items-baseline gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 flex-wrap",children:[s.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:["#",r+1]}),s.jsx("span",{className:"font-mono text-[11px] text-slate-700 dark:text-gray-200 truncate max-w-[400px]",children:t.vmdk}),s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${t.transportMode==="nbdssl"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300"}`,children:t.transportMode}),t.fileSize!=null&&s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:q(t.fileSize)})]}),t.errors.length>0&&s.jsx("div",{className:"px-3 py-1.5 border-t border-amber-100 dark:border-amber-900/30 bg-amber-50/50 dark:bg-amber-900/10",children:t.errors.map((n,a)=>s.jsx("div",{className:"text-[10px] text-amber-700 dark:text-amber-400 break-words",children:n},a))})]},r))})]})}function hN({events:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Boot Timeline",count:e.length}),s.jsx("div",{className:"space-y-1",children:e.map((t,r)=>s.jsxs("div",{className:"flex items-start gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex flex-col items-center pt-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 dark:bg-blue-500 flex-shrink-0"}),r<e.length-1&&s.jsx("div",{className:"w-px h-3 bg-blue-200 dark:bg-blue-800"})]}),s.jsxs("div",{className:"flex items-baseline gap-2 min-w-0",children:[t.timestamp&&s.jsxs("span",{className:"text-[10px] font-mono text-slate-400 dark:text-gray-500 min-w-[45px] text-right flex-shrink-0",children:["[",t.timestamp,"s]"]}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200",children:t.label}),t.detail&&s.jsx("span",{className:"text-slate-500 dark:text-gray-400 font-mono text-[10px] truncate max-w-[300px]",children:t.detail})]})]},r))})]})}function gN(e){const t=(e.match(/\\x[0-9a-f]{2}/gi)||[]).length,r=e.length;if(r>0&&t/(r/4)>.5)return null;try{return e.replace(/\\x0a/g,`
`).replace(/\\x0d/g,"\r").replace(/\\x09/g,"	").replace(/\\x([0-9a-f]{2})/gi,(n,a)=>{const i=parseInt(a,16);return i>=32&&i<127?String.fromCharCode(i):""}).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}catch{return null}}function vN(e){const t=[],r=new Set;for(const n of e){const a=n.match(/(?:^|\s)(write|write_append|internal_write|internal_write_append)\s+"([^"]+)"\s+"([^"]*)"(.*)$/);if(a){const l=a[1].includes("append")?"write_append":"write",o=a[2],c=a[3],d=a[4],u=`${l}:${o}`;if(r.has(u))continue;r.add(u);let p=null;const f=d.match(/original size (\d+) bytes/);f&&(p=parseInt(f[1],10));const h=gN(c);t.push({path:o,content:h,operation:l,sizeBytes:p});continue}const i=n.match(/(?:^|\s)truncate\s+"([^"]+)"/);if(i){const l=i[1],o=`truncate:${l}`;r.has(o)||(r.add(o),t.push({path:l,content:null,operation:"truncate",sizeBytes:null}))}}return t}function kN({content:e}){const t=S.useMemo(()=>vN(e),[e]);return t.length===0?null:s.jsxs("div",{children:[s.jsx(H,{title:"File Operations",count:t.length}),s.jsx("div",{className:"space-y-2",children:t.map((r,n)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase ${r.operation==="truncate"?"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300":r.operation==="write_append"?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300"}`,children:r.operation==="write_append"?"append":r.operation}),s.jsx("span",{className:"font-mono text-[11px] text-slate-700 dark:text-gray-200 truncate",children:r.path}),r.sizeBytes!=null&&s.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 ml-auto flex-shrink-0",children:[r.sizeBytes," bytes"]})]}),r.content!=null&&r.content.trim().length>0&&s.jsx("pre",{className:"px-3 py-1.5 text-[10px] font-mono text-slate-600 dark:text-gray-300 bg-white dark:bg-slate-900 max-h-[120px] overflow-y-auto overflow-x-auto whitespace-pre-wrap break-words",children:r.content.trim()}),r.content===null&&r.operation!=="truncate"&&s.jsxs("div",{className:"px-3 py-1.5 text-[10px] text-slate-400 dark:text-gray-500 italic bg-white dark:bg-slate-900",children:["binary data",r.sizeBytes!=null?` (${r.sizeBytes} bytes)`:""]})]},n))})]})}function yN(e){return e.some(t=>/(?:write|write_append|internal_write)\s+"\//.test(t))}function bN(e){let t=null;const r=[],n=[],a={},i=[];let l=null;const o=[];let c=0,d="",u="",p="",f="";for(let h=0;h<e.length;h++){const v=e[h],k=v.match(/^\s*source name:\s+(.+)/);k&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.sourceName=k[1].trim());const b=v.match(/^hypervisor type:\s+(.+)/);b&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.hypervisorType=b[1].trim());const g=v.match(/^\s*VM genid:\s+(.+)/);g&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.genid=g[1].trim());const m=v.match(/^\s*memory:\s+(\d+)\s+\(bytes\)/);m&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.memory=parseInt(m[1],10));const x=v.match(/^\s*nr vCPUs:\s+(\d+)/);x&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.vcpus=parseInt(x[1],10));const j=v.match(/^\s*firmware:\s+(.+)/);j&&(t||(t={sourceName:"",hypervisorType:"",genid:"",memory:0,vcpus:0,firmware:""}),t.firmware=j[1].trim());const N=v.match(/^\tBridge "([^"]+)" mac:\s+(\S+)\s+\[(\w+)\]/);N&&!n.some(A=>A.mac===N[2])&&n.push({bridge:N[1],mac:N[2],model:N[3]});const y=v.match(/disk_create "([^"]+)" "raw" (\d+)/);y&&r.push({index:c++,bus:"",destFile:y[1],sizeBytes:parseInt(y[2],10),outputSocket:"",sourceVmdk:""});const C=v.match(/^gcaps_(\w+)\s+=\s+(.+)/);C&&(a[C[1]]=C[2].trim());const M=v.match(/file: config key=(?:file|dir), value=(.+)/);if(M){const A=M[1].trim();for(let R=h+1;R<Math.min(h+15,e.length);R++){const V=e[R].match(/bound to unix socket\s+(\S+)/);if(V){o.push({dir:A,socket:V[1]});break}}}const P=v.match(/VixDiskLib_Open\s*\(connection,\s*(.+\.vmdk),/);P&&(d=P[1].trim());const w=v.match(/NBD_ClientOpen:.*@([\d.]+:\d+)/);w&&(u=w[1]);const _=v.match(/transport mode:\s+(\S+)/);_&&(p=_[1]);const L=v.match(/nbd_connect_(?:unix|uri):\s*enter:.*(?:unixsocket|uri)="([^"]+)"/);if(L){const A=L[1],R=A.match(/socket=([^&"]+)/);f=R?R[1]:A}const I=v.match(/exportsize:\s+(\d+)/);I&&d&&(i.push({vmdk:d,server:u,transportMode:p,sizeBytes:parseInt(I[1],10),inputSocket:f}),d="",u="",p="",f="");const E=v.match(/^(\S+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)%\s+(.+)/);E&&!E[1].startsWith("Filesystem")&&(l={filesystem:E[1],sizeKB:parseInt(E[2],10),usedKB:parseInt(E[3],10),availKB:parseInt(E[4],10),usePercent:parseInt(E[5],10),mountPoint:E[6].trim()})}for(const h of r){const v=o.find(k=>h.destFile.startsWith(k.dir)||k.dir===h.destFile);v&&(h.outputSocket=v.socket)}for(let h=0;h<r.length&&h<i.length;h++)r[h].sourceVmdk=i[h].vmdk;return{vmPlan:t,disks:r,nics:n,guestCaps:a,sourceConns:i,fsUsage:l}}function jN({content:e}){const t=S.useMemo(()=>bN(e),[e]);return t.vmPlan!==null||t.disks.length>0||Object.keys(t.guestCaps).length>0||t.sourceConns.length>0?s.jsxs("div",{className:"space-y-4",children:[t.vmPlan&&s.jsx(wN,{plan:t.vmPlan,nics:t.nics}),t.sourceConns.length>0&&s.jsx(NN,{conns:t.sourceConns}),t.disks.length>0&&s.jsx(SN,{disks:t.disks}),t.fsUsage&&s.jsx(CN,{usage:t.fsUsage}),Object.keys(t.guestCaps).length>0&&s.jsx(LN,{caps:t.guestCaps})]}):null}function wN({plan:e,nics:t}){return s.jsxs("div",{children:[s.jsx(H,{title:"Conversion Plan"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-200",children:e.sourceName}),e.hypervisorType&&s.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-[10px] text-slate-600 dark:text-gray-300",children:e.hypervisorType})]}),s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1 px-3 py-2 text-[11px]",children:[e.memory>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Memory"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:q(e.memory)})]}),e.vcpus>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"vCPUs"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.vcpus})]}),e.firmware&&e.firmware!=="unknown"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Firmware"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.firmware})]}),e.genid&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"VM GenID"}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 text-[10px]",children:e.genid})]})]}),t.length>0&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-100 dark:border-slate-800 space-y-1",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 font-semibold uppercase",children:"Network Adapters"}),t.map((r,n)=>s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px] pl-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:r.bridge}),s.jsx("span",{className:"font-mono text-[10px] text-slate-500 dark:text-gray-400",children:r.mac}),s.jsx("span",{className:"px-1 py-0 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-500 dark:text-gray-400",children:r.model})]},n))]})]})]})}function NN({conns:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Source VDDK Connections"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"VMDK"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Transport"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Server"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Size"})]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-700 dark:text-gray-200 max-w-[250px] truncate",title:t.vmdk,children:t.vmdk}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-indigo-50 dark:bg-indigo-900/20 text-[9px] text-indigo-600 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:t.transportMode||"unknown"})}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:t.server||"--"}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(t.sizeBytes)})]},r))})]})})]})}function SN({disks:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Destination Disks"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"#"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"File"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Size"})]})}),s.jsx("tbody",{children:e.map(t=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:t.index}),s.jsxs("td",{className:"px-3 py-1.5",children:[s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-200 text-[10px]",children:t.destFile.split("/").pop()}),t.outputSocket&&s.jsxs("span",{className:"ml-2 text-[9px] text-slate-400 dark:text-gray-500 font-mono",children:[""," ",t.outputSocket.split("/").pop()]}),t.sourceVmdk&&s.jsxs("span",{className:"ml-2 text-[9px] text-slate-400 dark:text-gray-500 font-mono",title:t.sourceVmdk,children:[""," ",t.sourceVmdk.split("/").pop()]})]}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(t.sizeBytes)})]},t.index))})]})})]})}function CN({usage:e}){const t=e.usePercent,r=t>=90?"bg-red-500 dark:bg-red-400":t>=75?"bg-amber-500 dark:bg-amber-400":"bg-green-500 dark:bg-green-400";return s.jsxs("div",{children:[s.jsx(H,{title:"Destination Storage"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2",children:[s.jsxs("div",{className:"flex items-baseline justify-between text-[11px] mb-1.5",children:[s.jsx("span",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300 truncate max-w-[300px]",title:e.filesystem,children:e.mountPoint}),s.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:[q(e.usedKB*1024)," / ",q(e.sizeKB*1024),s.jsxs("span",{className:"ml-1 font-medium",children:["(",t,"%)"]})]})]}),s.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all ${r}`,style:{width:`${Math.min(t,100)}%`}})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 dark:text-gray-500 mt-1",children:[s.jsxs("span",{children:["Available: ",q(e.availKB*1024)]}),s.jsx("span",{className:"font-mono truncate max-w-[250px]",title:e.filesystem,children:e.filesystem.length>40?"..."+e.filesystem.slice(-37):e.filesystem})]})]})]})}const MN={block_bus:"Block Bus",net_bus:"Network Bus",machine:"Machine Type",arch:"Architecture",virtio_rng:"VirtIO RNG",virtio_balloon:"VirtIO Balloon",isa_pvpanic:"ISA PV Panic",virtio_socket:"VirtIO Socket",virtio_1_0:"VirtIO 1.0",rtc_utc:"RTC UTC"};function LN({caps:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Guest Capabilities"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(e).map(([t,r])=>{const n=MN[t]||t.replace(/_/g," "),a=r==="true",i=r==="false";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border ${a?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":i?"bg-slate-50 dark:bg-slate-800/50 text-slate-400 dark:text-gray-500 border-slate-200 dark:border-slate-700":"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800"}`,children:[s.jsxs("span",{className:"font-medium",children:[n,":"]}),s.jsx("span",{children:r})]},t)})})]})}function _N(e){if(!e)return[];const t=[];for(const r of e.rawLines)/^\s*[Rr]elabeled\s+/.test(r)&&t.push(r);return t}function EN({content:e,toolRun:t,stageApiCalls:r,stageFileCopies:n}){const a=S.useMemo(()=>_N(t),[t]),i=S.useMemo(()=>Mw(e,a.length>0?a:void 0),[e,a]),l=S.useMemo(()=>i.relabelGroups.flatMap(c=>c.files),[i.relabelGroups]);return i.config.loadPolicyFound||i.config.mode||i.config.type||i.config.selinuxRelabelAvailable||i.augeasErrors.length>0||i.mountPoints.length>0||i.setfiles.exitCode!==null||i.totalRelabeled>0?s.jsxs("div",{className:"space-y-4",children:[(i.config.mode||i.config.type||i.config.loadPolicyFound||i.config.selinuxRelabelAvailable)&&s.jsx(PN,{config:i.config}),(i.totalRelabeled>0||r&&r.length>0||n&&n.length>0)&&s.jsxs("div",{children:[s.jsx(H,{title:"File Operations"}),s.jsx(mx,{apiCalls:r??[],fileCopies:n,relabeledFiles:l})]}),i.mountPoints.length>0&&s.jsx(IN,{mounts:i.mountPoints}),i.augeasErrors.length>0&&s.jsx(TN,{errors:i.augeasErrors}),(i.setfiles.durationSecs!==null||i.setfiles.exitCode!==null||i.setfiles.contextErrors.length>0)&&s.jsx(FN,{setfiles:i.setfiles})]}):s.jsx("div",{className:"px-3 py-4 text-center",children:s.jsx("span",{className:"text-xs text-slate-400 dark:text-gray-500 italic",children:"No SELinux relabelling data found in this stage."})})}function PN({config:e}){const t=e.mode==="disable"?"disabled":e.mode,r=t==="enforcing"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":t==="permissive"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border-yellow-200 dark:border-yellow-800":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800";return s.jsxs("div",{children:[s.jsx(H,{title:"SELinux Configuration"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2",children:s.jsxs("div",{className:"flex items-baseline gap-3 flex-wrap",children:[t&&s.jsxs("span",{className:`inline-flex items-baseline gap-1 px-2 py-0.5 rounded text-[10px] font-medium border ${r}`,children:["SELINUX: ",t]}),e.type&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:["Type: ",e.type]}),e.loadPolicyFound&&s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:"load_policy: found"}),e.selinuxRelabelAvailable&&s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:"relabel: available"}),e.fileContextsPath&&s.jsx("span",{className:"font-mono text-[10px] text-slate-500 dark:text-gray-400",children:e.fileContextsPath})]})})]})}function IN({mounts:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Relabelled Filesystems"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Mount Point"})]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-600 dark:text-gray-300",children:t.device}),s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.path})]},r))})]})})]})}function TN({errors:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-2 mb-2 group",children:[s.jsx("svg",{className:`w-3 h-3 text-slate-400 transition-transform ${t?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("h4",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-gray-400 group-hover:text-slate-700 dark:group-hover:text-gray-300 transition-colors",children:"Augeas Parse Warnings"}),s.jsx("span",{className:"px-1.5 py-0 rounded-full bg-amber-100 dark:bg-amber-900/30 text-[10px] text-amber-700 dark:text-amber-300",children:e.length})]}),t&&s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"File"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Line"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Message"})]})}),s.jsx("tbody",{children:e.map((n,a)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-600 dark:text-gray-300",children:n.file}),s.jsxs("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:[n.line,":",n.char]}),s.jsx("td",{className:"px-3 py-1 text-amber-600 dark:text-amber-400",children:n.message})]},a))})]})})]})}function FN({setfiles:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{children:[s.jsx(H,{title:"Setfiles Execution"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.exitCode!==null&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-medium border ${e.exitCode<=1?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800"}`,children:["exit ",e.exitCode]}),e.durationSecs!==null&&s.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:[e.durationSecs.toFixed(2),"s"]}),e.autorelabelRemoved&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 italic",children:".autorelabel removed"}),e.skippedBins.length>0&&s.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:[e.skippedBins.length," old .bin file",e.skippedBins.length>1?"s":""," skipped"]})]}),e.contextErrors.length>0&&s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-1.5 text-[10px] text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[s.jsx("svg",{className:`w-2.5 h-2.5 transition-transform ${t?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.contextErrors.length," file",e.contextErrors.length>1?"s":""," could not be relabelled"]}),t&&s.jsx("div",{className:"mt-1 pl-4 space-y-0.5",children:e.contextErrors.map((n,a)=>s.jsx("div",{className:"font-mono text-[10px] text-slate-500 dark:text-gray-400",children:n},a))})]})]})]})}function AN(e){let t=null;const r=[],n=[],a=[],i=[];let l=!1;const o=[];for(let p=0;p<e.length;p++){const f=e[p];if(f.includes("libvirt xml is:")){const h=f.slice(f.indexOf("libvirt xml is:")+15).trim();if(h.length>0&&(o.push(h),h.includes("</domain>")))continue;l=!0;continue}if(l){o.push(f),f.includes("</domain>")&&(l=!1);continue}}const c=o.join(`
`),d=`["']([^"']+)["']`;if(c){const p=c.match(new RegExp(`<domain\\s+type=${d}`)),f=c.match(/<name>([^<]+)<\/name>/),h=c.match(/<uuid>([^<]+)<\/uuid>/),v=c.match(new RegExp(`<memory\\s+unit=${d}>(\\d+)<\\/memory>`)),k=c.match(/<memory>(\d+)<\/memory>/),b=c.match(/<vcpu[^>]*>(\d+)<\/vcpu>/),g=c.match(new RegExp(`<type\\s+arch=${d}`)),m=c.match(/<type[^>]*>([^<]+)<\/type>/),x=c.match(new RegExp(`<boot\\s+dev=${d}`)),j=c.match(/<vmware:datacenterpath>([^<]+)<\/vmware:datacenterpath>/),N=c.match(/<vmware:moref>([^<]+)<\/vmware:moref>/);let y=b?parseInt(b[1],10):0;if(!y){const E=c.match(new RegExp(`<topology\\s+sockets=${d}\\s+cores=${d}`));if(E){y=parseInt(E[1],10)*parseInt(E[2],10);const A=c.match(new RegExp(`<topology[^>]+threads=${d}`));A&&(y*=parseInt(A[1],10))}}let C=0;if(v){const E=v[1].toLowerCase(),A=parseInt(v[2],10);E==="kib"||E==="k"?C=A:E==="mib"||E==="m"?C=A*1024:E==="gib"||E==="g"?C=A*1024*1024:C=A}else k&&(C=parseInt(k[1],10));t={name:(f==null?void 0:f[1])||"",uuid:(h==null?void 0:h[1])||"",memoryKiB:C,vcpus:y,osArch:(g==null?void 0:g[1])||"",osType:(m==null?void 0:m[1])||"",bootDev:(x==null?void 0:x[1])||"",domainType:(p==null?void 0:p[1])||"",datacenterPath:(j==null?void 0:j[1])||"",moref:(N==null?void 0:N[1])||""};const M=new RegExp(`<disk\\s+type=${d}\\s+device=${d}>[\\s\\S]*?<source\\s+(?:file|dev)=${d}[\\s\\S]*?<target\\s+dev=${d}\\s+bus=${d}`,"g");let P;for(;(P=M.exec(c))!==null;)if(P[2]==="disk"){const A=P[0].match(new RegExp(`<driver[^>]+type=${d}`));r.push({source:P[3],target:P[4],bus:P[5],driverType:(A==null?void 0:A[1])||"",diskType:P[1]})}const w=new RegExp(`<interface\\s+type=${d}>[\\s\\S]*?<mac\\s+address=${d}[\\s\\S]*?<model\\s+type=${d}`,"g");let _;for(;(_=w.exec(c))!==null;){const A=c.slice(_.index).match(new RegExp(`<source\\s+switchid=${d}[^>]*portgroupid=${d}`));n.push({mac:_[2],model:_[3],switchId:(A==null?void 0:A[1])||"",portgroupId:(A==null?void 0:A[2])||""})}const L=new RegExp(`<controller\\s+type=${d}[^>]*model=${d}`,"g");let I;for(;(I=L.exec(c))!==null;)a.push({type:I[1],model:I[2]})}for(let p=0;p<e.length;p++){const f=e[p];if(f.includes("running nbdkit:")||f.match(/^\s*LANG=C\s+'nbdkit'/)){let h=f;f.includes("running nbdkit:")&&p+1<e.length&&(h=e[p+1]);const v={vmdk:"",socket:"",server:"",user:"",thumbprint:"",filters:[],vddkVersion:"",transportModes:""},k=h.match(/'--unix'\s+'([^']+)'/)||h.match(/--unix\s+(\S+)/);k&&(v.socket=k[1]);const b=h.match(/'server=([^']+)'/)||h.match(/server=(\S+)/);b&&(v.server=b[1]);const g=h.match(/'file=([^']+)'/)||h.match(/file=(\S+)/);g&&(v.vmdk=g[1]);const m=h.match(/'user=([^']+)'/)||h.match(/user=(\S+)/);m&&(v.user=m[1]);const x=h.match(/'thumbprint=([^']+)'/)||h.match(/thumbprint=(\S+)/);x&&(v.thumbprint=x[1]);const j=/(?:'--filter'\s+'([^']+)'|--filter\s+(\S+))/g;let N;for(;(N=j.exec(h))!==null;)v.filters.push(N[1]||N[2]);for(let y=p+1;y<Math.min(p+300,e.length);y++){const C=e[y].match(/VMware VixDiskLib \(([^)]+)\)/);C&&!v.vddkVersion&&(v.vddkVersion=C[1]);const M=e[y].match(/Available transport modes:\s+(.+)/);if(M&&!v.transportModes&&(v.transportModes=M[1].trim().replace(/\.$/,"")),y>p+1&&e[y].includes("running nbdkit:"))break}(v.vmdk||v.socket)&&(i.some(y=>y.socket===v.socket)||i.push(v))}}let u=null;for(let p=0;p<e.length;p++){const f=e[p],h=f.match(/ova:\s*orig_ova\s*=\s*(\S+),\s*top_dir\s*=\s*(\S+),\s*ova_type\s*=\s*(.+)/);if(h&&!u&&(u={ovaPath:h[1],extractDir:h[2],ovaType:h[3].trim(),ovfFile:"",manifestFile:"",disks:[]}),u&&f.includes("tar -xf")&&f.includes(".ovf")){const k=f.match(/'([^']*\.ovf)'/),b=f.match(/'([^']*\.mf)'/);k&&(u.ovfFile=k[1]),b&&(u.manifestFile=b[1])}if(u&&!u.manifestFile){const k=f.match(/ova:\s*processing manifest file\s+(\S+)/);k&&(u.manifestFile=k[1])}const v=f.match(/qemu-nbd.*'--socket'\s+'([^']+)'\s+.*json:\{/);if(v&&u){const k=v[1],b=f.match(/"offset":\s*(\d+)/),g=f.match(/"size":\s*(\d+)/);let m="";for(let x=p-1;x>=Math.max(0,p-10);x--){const j=e[x].match(/ova:\s*testing if\s+(\S+)\s+exists/);if(j){m=j[1];break}}u.disks.push({name:m,offsetBytes:b?parseInt(b[1],10):0,sizeBytes:g?parseInt(g[1],10):0,socket:k})}}for(let p=0;p<e.length;p++)if(u&&e[p].includes("running qemu-nbd:")&&p+1<e.length){const f=e[p+1],h=f.match(/'--socket'\s+'([^']+)'/),v=f.match(/"offset":\s*(\d+)/),k=f.match(/"size":\s*(\d+)/);if(h&&!u.disks.some(b=>b.socket===h[1])){let b="";for(let g=p-1;g>=Math.max(0,p-10);g--){const m=e[g].match(/ova:\s*testing if\s+(\S+)\s+exists/);if(m){b=m[1];break}}u.disks.push({name:b,offsetBytes:v?parseInt(v[1],10):0,sizeBytes:k?parseInt(k[1],10):0,socket:h[1]})}}return{vm:t,disks:r,nics:n,controllers:a,nbdkitInstances:i,ova:u}}function DN({content:e}){const t=S.useMemo(()=>AN(e),[e]);return t.vm!==null||t.nbdkitInstances.length>0||t.ova!==null?s.jsxs("div",{className:"space-y-4",children:[t.ova&&s.jsx($N,{ova:t.ova}),t.vm&&s.jsx(RN,{vm:t.vm,disks:t.disks,nics:t.nics,controllers:t.controllers}),t.nbdkitInstances.length>0&&s.jsx(ON,{instances:t.nbdkitInstances})]}):null}function $N({ova:e}){const t=e.ovaPath.split("/").pop()||e.ovaPath;return s.jsxs("div",{children:[s.jsx(H,{title:"OVA Source"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-200",children:t}),s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-900/30 text-[10px] text-amber-700 dark:text-amber-300 font-medium",children:"OVA"}),e.ovaType&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-[10px] text-slate-600 dark:text-gray-300",children:e.ovaType})]}),s.jsx("div",{className:"mt-1 flex flex-wrap gap-x-4 gap-y-0.5 text-[10px] text-slate-500 dark:text-gray-400",children:s.jsx("span",{className:"font-mono",title:"OVA path",children:e.ovaPath})})]}),(e.ovfFile||e.manifestFile)&&s.jsxs("div",{className:"px-3 py-2 border-b border-slate-100 dark:border-slate-800 flex flex-wrap gap-x-4 gap-y-1 text-[11px]",children:[e.ovfFile&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 mr-1",children:"OVF:"}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300",children:e.ovfFile})]}),e.manifestFile&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 mr-1",children:"Manifest:"}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300",children:e.manifestFile.split("/").pop()||e.manifestFile})]})]}),e.disks.length>0&&s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Disk"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Size"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Offset"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Socket"})]})}),s.jsx("tbody",{children:e.disks.map((r,n)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-700 dark:text-gray-300",children:r.name||`disk-${n}`}),s.jsx("td",{className:"px-3 py-1.5 text-slate-600 dark:text-gray-300",children:r.sizeBytes>0?q(r.sizeBytes):""}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:r.offsetBytes>0?`${r.offsetBytes.toLocaleString()} B`:""}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400 truncate max-w-[200px]",title:r.socket,children:r.socket})]},n))})]})]})]})}function RN({vm:e,disks:t,nics:r,controllers:n}){return s.jsxs("div",{children:[s.jsx(H,{title:"Source VM (Libvirt)"}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-baseline gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-200",children:e.name}),e.domainType&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-[10px] text-slate-600 dark:text-gray-300",children:e.domainType}),e.moref&&s.jsx("span",{className:"font-mono text-[10px] text-slate-400 dark:text-gray-500",children:e.moref})]}),s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1 px-3 py-2 text-[11px]",children:[e.osType&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"OS Type"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.osType})]}),e.memoryKiB>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Memory"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:q(e.memoryKiB*1024)})]}),e.vcpus>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"vCPUs"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.vcpus})]}),e.osArch&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Architecture"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.osArch})]}),e.bootDev&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Boot"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.bootDev})]}),e.datacenterPath&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Datacenter"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:e.datacenterPath})]}),e.uuid&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"UUID"}),s.jsx("span",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300",children:e.uuid})]})]}),t.length>0&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-100 dark:border-slate-800",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 font-semibold uppercase",children:"Disks"}),t.map((a,i)=>{var l;return s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px] pl-2 mt-0.5",children:[s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300",children:a.target}),s.jsx("span",{className:"px-1 py-0 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-500 dark:text-gray-400",children:a.bus}),a.driverType&&s.jsx("span",{className:"px-1 py-0 rounded bg-blue-50 dark:bg-blue-900/20 text-[9px] text-blue-600 dark:text-blue-300 border border-blue-200 dark:border-blue-800",children:a.driverType}),a.diskType&&a.diskType!=="file"&&s.jsx("span",{className:"px-1 py-0 rounded bg-amber-50 dark:bg-amber-900/20 text-[9px] text-amber-600 dark:text-amber-300 border border-amber-200 dark:border-amber-800",children:a.diskType}),n.find(o=>o.type===a.bus||o.type==="scsi"&&a.bus==="scsi")&&s.jsx("span",{className:"px-1 py-0 rounded bg-indigo-50 dark:bg-indigo-900/20 text-[9px] text-indigo-500 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800",children:((l=n.find(o=>o.type==="scsi"))==null?void 0:l.model)||a.bus}),s.jsx("span",{className:"font-mono text-[10px] text-slate-400 dark:text-gray-500 truncate",title:a.source,children:a.source.startsWith("/dev/")?a.source:a.source.split("/").pop()})]},i)})]}),r.length>0&&s.jsxs("div",{className:"px-3 py-2 border-t border-slate-100 dark:border-slate-800",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 font-semibold uppercase",children:"Network Adapters"}),r.map((a,i)=>s.jsxs("div",{className:"flex items-baseline gap-2 text-[11px] pl-2 mt-0.5",children:[s.jsx("span",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300",children:a.mac}),s.jsx("span",{className:"px-1 py-0 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-500 dark:text-gray-400",children:a.model}),a.portgroupId&&s.jsx("span",{className:"font-mono text-[10px] text-slate-400 dark:text-gray-500",children:a.portgroupId})]},i))]})]})]})}function ON({instances:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"NBDKIT Source Connections"}),s.jsx("div",{className:"space-y-2",children:e.map((t,r)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-mono text-[10px] text-slate-700 dark:text-gray-200 truncate",title:t.vmdk,children:t.vmdk}),t.vddkVersion&&s.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-indigo-50 dark:bg-indigo-900/20 text-[9px] text-indigo-600 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:["VDDK ",t.vddkVersion]})]}),s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1 px-3 py-2 text-[11px]",children:[t.server&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Server"}),s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-200",children:t.server})]}),t.socket&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Socket"}),s.jsx("span",{className:"font-mono text-[10px] text-slate-600 dark:text-gray-300",children:t.socket})]}),t.user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"User"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:t.user})]}),t.thumbprint&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Thumbprint"}),s.jsx("span",{className:"font-mono text-[10px] text-slate-500 dark:text-gray-400",children:t.thumbprint})]}),t.transportModes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Transport"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:t.transportModes.split(":").map(n=>s.jsx("span",{className:"px-1.5 py-0 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-600 dark:text-gray-300",children:n},n))})]}),t.filters.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Filters"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:t.filters.map(n=>s.jsx("span",{className:"px-1.5 py-0 rounded bg-blue-50 dark:bg-blue-900/20 text-[9px] text-blue-600 dark:text-blue-300 border border-blue-200 dark:border-blue-800",children:n},n))})]})]})]},r))})]})}function BN(e){const t=[],r=[],n=[],a=[],i=new Set,l=(o,c,d)=>{i.has(o)||(i.add(o),r.push({label:o,status:c,detail:d}))};for(let o=0;o<e.length;o++){const c=e[o],d=c.match(/umount-all:.*fsname=(\S+)\s+dir=(\S+)\s+type=(\S+)/);if(d){const f={fsname:d[1],dir:d[2],type:d[3]};t.some(h=>h.dir===f.dir)||t.push(f)}if(c.includes("umount_all")&&c.includes("= 0")&&l("Unmount all filesystems","ok"),c.includes("internal_autosync")&&c.includes("= 0")&&l("Internal autosync","ok"),c.includes("virDomainDestroy")){const f=c.match(/flags=(\S+)/);l("Destroy appliance VM","ok",f?f[1]:void 0)}if(c.includes("shutdown = 0")&&l("Shutdown libguestfs","ok"),c.includes("closing guestfs handle")){const f=c.match(/handle\s+(0x[0-9a-f]+)/);l("Close guestfs handle","ok",f==null?void 0:f[1])}c.includes("VixDiskLib_Disconnect")&&l("VDDK disconnect","ok"),c.includes("VixDiskLib_Close")&&l("VDDK close disk","ok"),(c.includes("NBD_CMD_DISC")||c.includes("client sent unknown (0x2)"))&&l("NBD client disconnect","ok");const u=c.match(/error\s+-\[.*?\]\s+(.+)/);u&&n.push(u[1].trim());const p=c.match(/rm\s*$/)||c.match(/\\?\s*-rf\s+(\S+)/);p&&p[1]&&a.push(p[1])}return{mounts:t,steps:r,errors:n,tempDirs:a}}function VN({content:e}){const t=S.useMemo(()=>BN(e),[e]);return t.steps.length>0||t.mounts.length>0?s.jsxs("div",{className:"space-y-4",children:[t.steps.length>0&&s.jsx(zN,{steps:t.steps}),t.mounts.length>0&&s.jsx(WN,{mounts:t.mounts}),t.errors.length>0&&s.jsx(HN,{errors:t.errors}),t.tempDirs.length>0&&s.jsx(UN,{dirs:t.tempDirs})]}):null}function zN({steps:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Shutdown Sequence"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsx("div",{className:"px-3 py-2 space-y-1",children:e.map((t,r)=>s.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[s.jsx("span",{className:"flex-shrink-0",children:t.status==="ok"?s.jsx("span",{className:"text-green-500 dark:text-green-400",children:""}):t.status==="error"?s.jsx("span",{className:"text-red-500 dark:text-red-400",children:""}):s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:""})}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:t.label}),t.detail&&s.jsx("span",{className:"font-mono text-[9px] text-slate-400 dark:text-gray-500",children:t.detail})]},r))})})]})}function WN({mounts:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Unmounted Filesystems"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Mount Point"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Type"})]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-700 dark:text-gray-200",children:t.dir}),s.jsx("td",{className:"px-3 py-1 font-mono text-[10px] text-slate-500 dark:text-gray-400",children:t.fsname}),s.jsx("td",{className:"px-3 py-1",children:s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[9px] text-slate-500 dark:text-gray-400",children:t.type})})]},r))})]})})]})}function HN({errors:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Shutdown Warnings"}),s.jsx("div",{className:"border border-amber-200 dark:border-amber-800 rounded-lg px-3 py-2 bg-amber-50 dark:bg-amber-900/10 space-y-1",children:e.map((t,r)=>s.jsx("div",{className:"text-[10px] font-mono text-amber-700 dark:text-amber-300",children:t},r))})]})}function UN({dirs:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Temp Directory Cleanup"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((t,r)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-300 border-slate-200 dark:border-slate-700 font-mono",children:[s.jsx("span",{className:"text-red-400 dark:text-red-500",children:"rm"})," ",t]},r))})]})}function GN(e,t){const r={hostname:"",osType:"",osDistro:"",osMajorVersion:null,warnings:[],errors:[],machineIdMissing:!1},n=t.match(/hostname[:\s]+(\S+)/i);n&&(r.hostname=n[1]);for(const a of e){const i=a.match(/inspect_get_type = "(.+?)"/);i&&!r.osType&&(r.osType=i[1]);const l=a.match(/inspect_get_distro = "(.+?)"/);l&&!r.osDistro&&(r.osDistro=l[1]);const o=a.match(/inspect_get_major_version = (\d+)/);o&&r.osMajorVersion===null&&(r.osMajorVersion=parseInt(o[1],10)),a.includes("/etc/machine-id")&&a.includes("No such file")&&(r.machineIdMissing=!0);const c=a.match(/virt-v2v:\s*warning:\s*(.+)/);if(c){const u=c[1].trim();r.warnings.includes(u)||r.warnings.push(u)}const d=a.match(/guestfsd:\s*error:\s*(.+)/);if(d){const u=d[1].trim();r.errors.includes(u)||r.errors.push(u)}}return r}function KN({content:e,stageName:t}){const r=S.useMemo(()=>GN(e,t),[e,t]),n=r.warnings.length>0,a=r.errors.length>0,i=!n&&!a;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:`flex items-center gap-2 rounded-lg px-3 py-2 text-[11px] border ${n?"bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-300":i?"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-800 text-red-700 dark:text-red-300"}`,children:[s.jsx("span",{className:"text-base flex-shrink-0",children:n?"":i?"":""}),s.jsx("div",{children:n?r.warnings.map((l,o)=>s.jsx("div",{children:l},o)):i?s.jsx("span",{children:"Hostname set successfully"}):r.errors.map((l,o)=>s.jsx("div",{children:l},o))})]}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-[11px]",children:[r.hostname&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Hostname:"})," ",s.jsx("span",{className:"font-mono font-medium text-slate-700 dark:text-gray-200",children:r.hostname})]}),r.osType&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"OS Type:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200 capitalize",children:r.osType})]}),r.osDistro&&r.osDistro!==r.osType&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Distro:"})," ",s.jsx("span",{className:"font-medium text-slate-700 dark:text-gray-200 capitalize",children:r.osDistro})]}),r.osMajorVersion!==null&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Version:"})," ",s.jsx("span",{className:"font-mono font-medium text-slate-700 dark:text-gray-200",children:r.osMajorVersion})]})]}),r.machineIdMissing&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400",children:"/etc/machine-id not found"})})]})]})}function YN(e){const t=[],r=[],n={},a=[];let i="",l="",o="";const c={},d={},u=[],p=[];let f=!1,h="";for(let k=0;k<e.length;k++){const b=e[k],g=b.match(/(?:virt-v2v[\w-]*):\s*(This guest requires (?:UEFI|BIOS)[^.]*\.?)/i);g&&(o=g[1]);const m=b.match(/^target firmware:\s*(.+)/);m&&(i=m[1].trim());const x=b.match(/^target boot device:\s*(.+)/);x&&(l=x[1].trim());const j=b.match(/^\s{2,}(\S[^:]+):\s*(.+)/);if(j&&!f){const w=j[1].trim(),_=j[2].trim();_&&w!=="Size"&&w!=="Used"&&w!=="Available"&&(c[w]=_)}const N=b.match(/^\s+source name:\s*(.+)/);N&&(c["source name"]=N[1].trim());const y=b.match(/^(i_\w+)\s*=\s*(.+)/);y&&(c[y[1]]=y[2].trim());const C=b.match(/^(gcaps_\w+)\s*=\s*(.+)/);if(C&&(d[C[1]]=C[2].trim()),b.match(/^\s+\d+\s+\[\w+\]/)&&p.push(b.trim()),b.includes("mountpoint stats:")){f=!0;continue}if(f){if(b.includes("Size")&&b.includes("Used")&&b.includes("Available"))continue;const w=b.match(/^(\/\S+)\s+(\S+)\s+\((\w+)\):/);if(w){h=`${w[1]}|${w[2]}|${w[3]}`;continue}if(h){const _=b.trim(),L=_.split(/\s+/).filter(E=>/^\d+$/.test(E));if(L.length>=3){const[E,A,R]=h.split("|");u.push({device:E,mountpoint:A,fsType:R,sizeBytes:parseInt(L[0],10),usedBytes:parseInt(L[1],10),availBytes:parseInt(L[2],10),usePercent:""}),h="";continue}const I=_.match(/([\d.]+%)\s*$/);if(I&&u.length>0){u[u.length-1].usePercent=I[1];continue}}(b.startsWith("total ")||b.startsWith("drwx")||b.startsWith("srwx")||b.startsWith("-rw"))&&(f=!1)}const M=b.match(/list_partitions\s*=\s*\[([^\]]*)\]/);if(M){const w=M[1].match(/"([^"]+)"/g);if(w)for(const _ of w)t.push(_.replace(/"/g,""))}const P=b.match(/part_get_parttype\s*=\s*"([^"]+)"/);if(P)for(let w=k-1;w>=Math.max(0,k-20);w--){const _=e[w].match(/part_get_parttype\s+"([^"]+)"/);if(_){n[_[1]]=P[1];break}}if(b.includes("command: parted: stdout:")||b.includes("command: parted:stdout:")){const w={device:"",sizeBytes:0,transport:"",sectorSize:0,tableType:"",model:"",partitions:[]};for(let _=k+1;_<Math.min(k+20,e.length);_++){const L=e[_].trim();if(!L||L==="BYT;")continue;if(L.match(/^\/dev\/\w+:\d+B:/)){const E=L.split(":");E.length>=7&&(w.device=E[0],w.sizeBytes=parseInt(E[1].replace("B",""),10)||0,w.transport=E[2],w.sectorSize=parseInt(E[3],10)||512,w.tableType=E[5],w.model=E[6]);continue}const I=L.match(/^(\d+):(\d+)B:(\d+)B:(\d+)B:([^:]*):([^:]*):([^;]*);?/);if(I){w.partitions.push({number:parseInt(I[1],10),startBytes:parseInt(I[2],10),endBytes:parseInt(I[3],10),sizeBytes:parseInt(I[4],10),fsType:I[5]||"",name:I[6]||"",flags:I[7]||""});continue}break}w.device&&!r.some(_=>_.device===w.device)&&r.push(w)}b.startsWith("pci-")&&a.push(b.trim())}let v="unknown";if(i?v=i.toLowerCase()==="uefi"?"uefi":"bios":o.toLowerCase().includes("uefi")?v="uefi":o.toLowerCase().includes("bios")&&(v="bios"),v==="unknown"){const k=new Set(Object.values(n));for(const b of r)b.tableType&&k.add(b.tableType);if(k.size>0){const b=k.has("gpt"),g=k.has("msdos"),m=r.some(x=>x.partitions.some(j=>j.flags.includes("esp")||j.flags.includes("boot, esp")||j.name.toLowerCase().includes("efi")));b&&m||b?v="uefi":g&&(v="bios")}}return{allPartitions:t,diskLayouts:r,partTableTypes:n,byPathEntries:a,targetFirmware:i,targetBootDevice:l,uefiMessage:o,guestInfo:c,gcaps:d,mountpoints:u,disks:p,bootType:v}}function QN({content:e}){const t=S.useMemo(()=>YN(e),[e]),r=t.allPartitions.length>0||t.diskLayouts.length>0||t.byPathEntries.length>0,n=t.targetFirmware!==""||t.uefiMessage!==""||Object.keys(t.guestInfo).length>0||Object.keys(t.gcaps).length>0||t.mountpoints.length>0;return!r&&!n?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(H,{title:"Boot Type"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold ${t.bootType==="bios"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800":t.bootType==="uefi"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-300 border border-slate-200 dark:border-slate-700"}`,children:t.bootType==="bios"?"BIOS (MBR)":t.bootType==="uefi"?"UEFI (GPT)":"Unknown"}),t.uefiMessage&&s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-gray-400 italic",children:t.uefiMessage})]}),(t.targetFirmware||t.targetBootDevice)&&s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-1 px-3 py-2 text-[11px]",children:[t.targetFirmware&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Target Firmware"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200 font-semibold",children:t.targetFirmware})]}),t.targetBootDevice&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"Target Boot Device"}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:t.targetBootDevice})]})]})}),Object.keys(t.gcaps).length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Guest Capabilities"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsx("div",{className:"flex flex-wrap gap-1.5 px-3 py-2",children:Object.entries(t.gcaps).map(([a,i])=>{const l=a.replace("gcaps_",""),o=i==="true"||i==="false";return s.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-mono border ${o&&i==="true"?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800":o&&i==="false"?"bg-slate-50 dark:bg-slate-800 text-slate-400 dark:text-gray-500 border-slate-200 dark:border-slate-700":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800"}`,title:`${a} = ${i}`,children:[l,!o&&`=${i}`]},a)})})})]}),t.mountpoints.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Mountpoint Stats"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Device"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"Mount"}),s.jsx("th",{className:"px-3 py-1.5 text-left text-slate-500 dark:text-gray-400 font-semibold",children:"FS"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-slate-500 dark:text-gray-400 font-semibold",children:"Size"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-slate-500 dark:text-gray-400 font-semibold",children:"Used"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-slate-500 dark:text-gray-400 font-semibold",children:"Avail"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-slate-500 dark:text-gray-400 font-semibold",children:"Use%"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:t.mountpoints.map((a,i)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-700 dark:text-gray-200",children:a.device}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-600 dark:text-gray-300",children:a.mountpoint}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:"px-1 py-0 rounded bg-emerald-50 dark:bg-emerald-900/20 text-[9px] text-emerald-600 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800",children:a.fsType})}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(a.sizeBytes)}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(a.usedBytes)}),s.jsx("td",{className:"px-3 py-1.5 text-right text-slate-600 dark:text-gray-300",children:q(a.availBytes)}),s.jsx("td",{className:"px-3 py-1.5 text-right font-semibold text-slate-700 dark:text-gray-200",children:a.usePercent})]},i))})]})})]}),t.allPartitions.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Discovered Partitions"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.allPartitions.map(a=>s.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[11px] font-mono text-slate-700 dark:text-gray-200 border border-slate-200 dark:border-slate-700",children:a},a))})]}),t.diskLayouts.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Disk Layouts"}),s.jsx("div",{className:"space-y-2",children:t.diskLayouts.map(a=>s.jsx(XN,{disk:a,partTableType:t.partTableTypes[a.device]},a.device))})]}),t.byPathEntries.length>0&&s.jsxs("div",{children:[s.jsx(H,{title:"Device Paths (/dev/disk/by-path)"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:t.byPathEntries.map((a,i)=>s.jsx("div",{className:"px-3 py-1.5 text-[11px] font-mono text-slate-600 dark:text-gray-300",children:a},i))})})]})]})}function XN({disk:e,partTableType:t}){const r=t||e.tableType;return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-baseline gap-2 flex-wrap",children:[s.jsx("span",{className:"font-mono text-[11px] font-semibold text-slate-700 dark:text-gray-200",children:e.device}),s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:q(e.sizeBytes)}),r&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold border ${r==="gpt"?"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 border-purple-200 dark:border-purple-800":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 border-blue-200 dark:border-blue-800"}`,children:r.toUpperCase()}),e.transport&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-[9px] text-slate-600 dark:text-gray-300",children:e.transport}),e.model&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:e.model})]}),e.partitions.length>0&&s.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.partitions.map(n=>s.jsxs("div",{className:"px-3 py-1.5 flex items-baseline gap-2 text-[11px]",children:[s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 w-6 text-right",children:n.number}),s.jsx("span",{className:"text-slate-500 dark:text-gray-400 w-16 text-right",children:q(n.sizeBytes)}),n.fsType&&s.jsx("span",{className:"px-1.5 py-0 rounded bg-emerald-50 dark:bg-emerald-900/20 text-[9px] text-emerald-600 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800",children:n.fsType}),n.flags&&s.jsx("span",{className:"px-1.5 py-0 rounded bg-amber-50 dark:bg-amber-900/20 text-[9px] text-amber-600 dark:text-amber-300 border border-amber-200 dark:border-amber-800",children:n.flags}),n.name&&s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:n.name}),s.jsxs("span",{className:"ml-auto text-[9px] font-mono text-slate-400 dark:text-gray-500",children:[q(n.startBytes),"  ",q(n.endBytes)]})]},n.number))})]})}function qN(e){var p,f;const t=[],r=[],n=[],a=[],i=[],l=new Set,o=new Set,c=new Set,d=new Map;let u=0;for(;u<e.length;){const h=e[u],v=h.match(/list_filesystems:\s*adding\s+"([^"]+)",\s*"([^"]+)"/);if(v){const j=`${v[1]}:${v[2]}`;c.has(j)||(c.add(j),t.push({device:v[1],fsType:v[2]})),u++;continue}const k=h.match(/^\s*(\S+)\/(\S+)\s*$/);if(k){const j=`${k[1]}/${k[2]}`;l.has(j)||(l.add(j),n.push({vgName:k[1],lvName:k[2]})),u++;continue}const b=h.match(/^(pci-\S+)$/);if(b){o.has(b[1])||(o.add(b[1]),a.push(b[1])),u++;continue}const g=h.match(/command:\s*sfdisk\s+'--part-type'\s+'([^']+)'\s+'(\d+)'/);if(g){const j=g[1],N=g[2];for(let y=u+1;y<Math.min(u+10,e.length);y++){const C=e[y].match(/^([0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12})\s*$/);if(C){d.set(`${j}:${N}`,C[1]);break}}u++;continue}if(h.trim()==="BYT;"){const N=(u+1<e.length?e[u+1]:"").split(":");if(N.length>=7){const y=N[0];if(!r.find(C=>C.device===y)){const C={device:y,sizeBytes:parseInt(N[1])||0,transport:N[2]||"",sectorSize:parseInt(N[3])||512,tableType:N[5]||"",model:((p=N[6])==null?void 0:p.replace(/;$/,""))||"",partitions:[]};for(let M=u+2;M<e.length;M++){const P=e[M];if(!P.match(/^\d+:/))break;const w=P.split(":");if(w.length>=7){const _=parseInt(w[0]),L=`${y}:${_}`;C.partitions.push({number:_,startBytes:parseInt(w[1])||0,endBytes:parseInt(w[2])||0,sizeBytes:parseInt(w[3])||0,fsType:w[4]||"",name:w[5]||"",flags:((f=w[6])==null?void 0:f.replace(/;$/,""))||"",typeGuid:d.get(L)})}}r.push(C)}}u++;continue}const m=h.match(/commandrvf:\s*xfs_repair\s+.*\s+(\/dev\/\S+)/);if(m){const j=m[1],N=[];let y=0,C;for(let M=u+1;M<e.length;M++){const P=e[M],w=P.match(/^(Phase \d+ - .*)$/);if(w){N.push(w[1]);continue}if(P.match(/^\s+- /)){N.push(P.trimEnd());continue}if(P.match(/^No modify flag set/)){N.push(P.trim());continue}const _=P.match(/libguestfs: trace: v2v: xfs_repair = (\d+)/);if(_){y=parseInt(_[1]);break}const L=P.match(/guestfsd: => xfs_repair.*took ([\d.]+) secs/);if(L){C=`${L[1]}s`;continue}if(P.match(/^(nbdkit:|commandrvf:|guestfsd: <=|guestfsd: =>|libguestfs: trace:)/)){const I=P.match(/libguestfs: trace: v2v: xfs_repair = (\d+)/);if(I){y=parseInt(I[1]);break}continue}if(P.match(/^(command:|list_filesystems:)/))break}i.find(M=>M.device===j)||i.push({device:j,tool:"xfs_repair",exitCode:y,phases:N,duration:C}),u++;continue}const x=h.match(/commandrvf:\s*e2fsck\s+.*\s+(\/dev\/\S+)/);if(x){const j=x[1],N=[];let y=0,C;for(let M=u+1;M<e.length;M++){const P=e[M],w=P.match(/^(Pass \d+:.*)$/);if(w){N.push(w[1]);continue}if(P.match(/^\s/)&&!P.match(/^(command:|list_|guestfsd:|libguestfs:)/)){N.push(P.trimEnd());continue}const _=P.match(/libguestfs: trace: v2v: e2fsck = (\d+)/);if(_){y=parseInt(_[1]);break}const L=P.match(/guestfsd: => e2fsck.*took ([\d.]+) secs/);if(L){C=`${L[1]}s`;continue}if(P.match(/^(command:|list_filesystems:)/))break}i.find(M=>M.device===j)||i.push({device:j,tool:"e2fsck",exitCode:y,phases:N,duration:C}),u++;continue}u++}for(const h of r)for(const v of h.partitions)if(!v.typeGuid){const k=`${h.device}:${v.number}`;d.has(k)&&(v.typeGuid=d.get(k))}return{filesystems:t,disks:r,lvmVolumes:n,byPathDevices:a,fsChecks:i}}function ZN(e){return e===0?s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700/50",children:"Passed"}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-700/50",children:["Failed (exit ",e,")"]})}function Hs(e,t,r){return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${r}`,children:[e," ",t]})}function JN({content:e}){const t=S.useMemo(()=>qN(e),[e]);if(t.filesystems.length===0&&t.disks.length===0&&t.fsChecks.length===0&&t.lvmVolumes.length===0)return null;const n=t.fsChecks.filter(i=>i.exitCode===0).length,a=t.fsChecks.filter(i=>i.exitCode!==0).length;return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.filesystems.length>0&&Hs(t.filesystems.length,t.filesystems.length===1?"filesystem":"filesystems","bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"),t.disks.length>0&&Hs(t.disks.length,t.disks.length===1?"disk":"disks","bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-gray-300"),t.lvmVolumes.length>0&&Hs(t.lvmVolumes.length,"LVM","bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"),n>0&&Hs(n,"passed","bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),a>0&&Hs(a,"failed","bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300")]}),t.filesystems.length>0&&s.jsxs("section",{children:[s.jsx(H,{title:"Discovered Filesystems"}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/80 text-slate-500 dark:text-gray-400",children:[s.jsx("th",{className:"text-left px-3 py-1.5 font-medium",children:"Device"}),s.jsx("th",{className:"text-left px-3 py-1.5 font-medium",children:"Type"})]})}),s.jsx("tbody",{children:t.filesystems.map((i,l)=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/40",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-blue-600 dark:text-blue-300",children:i.device}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${dx(i.fsType)}`,children:i.fsType})})]},l))})]})})]}),t.disks.length>0&&s.jsxs("section",{children:[s.jsx(H,{title:"Disk Layout"}),s.jsx("div",{className:"space-y-3",children:t.disks.map((i,l)=>s.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-slate-50 dark:bg-slate-800/80 border-b border-slate-200 dark:border-slate-700/40",children:[s.jsx("span",{className:"font-mono text-blue-600 dark:text-blue-300 text-xs",children:i.device}),s.jsx("span",{className:"text-slate-500 dark:text-gray-400 text-xs",children:q(i.sizeBytes)}),s.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-slate-200 dark:bg-slate-700/60 text-slate-600 dark:text-gray-300",children:i.tableType.toUpperCase()}),s.jsx("span",{className:"text-slate-400 dark:text-gray-500 text-xs",children:i.model})]}),i.partitions.length>0&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-slate-500 dark:text-gray-500 bg-slate-50/50 dark:bg-slate-800/40",children:[s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"#"}),s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"Size"}),s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"FS"}),s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"Name"}),s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"Flags"}),s.jsx("th",{className:"text-left px-3 py-1 font-medium",children:"Type"})]})}),s.jsx("tbody",{children:i.partitions.map(o=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/30",children:[s.jsx("td",{className:"px-3 py-1 font-mono text-slate-700 dark:text-gray-300",children:o.number}),s.jsx("td",{className:"px-3 py-1 text-slate-700 dark:text-gray-300",children:q(o.sizeBytes)}),s.jsx("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:o.fsType||"-"}),s.jsx("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:o.name||"-"}),s.jsx("td",{className:"px-3 py-1",children:o.flags?s.jsx("span",{className:"text-yellow-600 dark:text-yellow-300/80 text-xs",children:o.flags}):s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:"-"})}),s.jsx("td",{className:"px-3 py-1 text-slate-400 dark:text-gray-500 text-xs",children:o.typeGuid?vw(o.typeGuid):"-"})]},o.number))})]})})]},l))})]}),t.lvmVolumes.length>0&&s.jsxs("section",{children:[s.jsx(H,{title:"LVM Volumes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.lvmVolumes.map((i,l)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700/40 text-xs",children:[s.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:i.vgName}),s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"/"}),s.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-mono",children:i.lvName})]},l))})]}),t.fsChecks.length>0&&s.jsxs("section",{children:[s.jsx(H,{title:"Integrity Checks"}),s.jsx("div",{className:"space-y-3",children:t.fsChecks.map((i,l)=>s.jsx(eS,{check:i},l))})]}),t.byPathDevices.length>0&&s.jsxs("section",{children:[s.jsx(H,{title:"Device Paths"}),s.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 px-3 py-2 bg-white dark:bg-transparent",children:s.jsx("div",{className:"font-mono text-xs text-slate-500 dark:text-gray-400 space-y-0.5",children:t.byPathDevices.map((i,l)=>s.jsx("div",{children:i},l))})})]})]})}function eS({check:e}){const[t,r]=S.useState(!1),n=e.phases.length>0;return s.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("div",{onClick:n?()=>r(!t):void 0,className:`flex items-center justify-between px-3 py-2 bg-slate-50 dark:bg-slate-800/80 ${n?"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/90":""} transition-colors ${t?"border-b border-slate-200 dark:border-slate-700/40":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[n&&s.jsx(Te,{expanded:t,className:"text-[9px] text-slate-400 dark:text-gray-500"}),s.jsx("span",{className:"font-mono text-blue-600 dark:text-blue-300 text-xs",children:e.device}),s.jsx("span",{className:"text-slate-400 dark:text-gray-500 text-xs",children:"via"}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-300 text-xs",children:e.tool})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.duration&&s.jsx("span",{className:"text-slate-400 dark:text-gray-500 text-xs",children:e.duration}),ZN(e.exitCode)]})]}),t&&n&&s.jsx("div",{className:"px-3 py-2 bg-white dark:bg-transparent",children:s.jsx("div",{className:"font-mono text-xs space-y-0.5",children:e.phases.map((a,i)=>{const l=a.match(/^Phase \d+/),o=a.match(/^No modify flag set/);return s.jsx("div",{className:l?"text-slate-700 dark:text-gray-300 font-medium mt-1":o?"text-green-600 dark:text-green-400 mt-1":"text-slate-500 dark:text-gray-500",children:a},i)})})})]})}function tS(e){let t=!1;const r=[],n=[],a=[],i=[],l=[],o=new Set;let c=null;for(let d=0;d<e.length;d++){const u=e[d].trim();/virt-v2v\s+monitoring:\s*Finished/i.test(u)&&(t=!0);const p=u.match(/rm\s+-rf\s+(?:--\s+)?['"]?([^'"]+?)['"]?\s*$/);if(p){const k=p[1];if(!o.has(k)){o.add(k);const b=k.includes("v2vnbdkit")?"nbdkit":k.includes("v2v")?"v2v":"other";r.push({path:k,kind:b})}}const f=u.match(/closing guestfs handle\s+(0x[0-9a-f]+)\s*\(state\s+(\d+)\)/i);f&&n.push({address:f[1],state:f[2]});const h=u.match(/nbdkit:\s*debug:\s*(\S+):\s*cleanup/);h&&a.push({plugin:h[1],action:"cleanup"});const v=u.match(/nbdkit:\s*debug:\s*(\S+):\s*unload\s+(plugin|filter)/);if(v&&a.push({plugin:v[1],action:"unload"}),u.includes("VDDK function stats")){c&&c.length>0&&i.push({rows:c}),c=[];continue}if(!(c!==null&&/VixDiskLib_\.\.\.\s+/.test(u))){if(c!==null){const k=u.match(/^\s*(\S+)\s+(\d+)\s+(\d+)(?:\s+(\d+))?\s*$/);k?c.push({func:k[1],microseconds:parseInt(k[2],10),calls:parseInt(k[3],10),bytes:k[4]?parseInt(k[4],10):null}):u.length>0&&!/nbdkit:\s*debug:/.test(u)&&(c.length>0&&i.push({rows:c}),c=null)}if(/error/i.test(u)&&!u.includes("nbdkit:")&&!u.includes("VDDK")){const k=u.match(/error[:\s]+(.+)/i);k&&l.push(k[1].trim())}}}return c&&c.length>0&&i.push({rows:c}),{finished:t,tempCleanups:r,guestfsHandles:n,nbdkitLifecycle:a,vddkStats:i,errors:l}}function rS({content:e}){const t=S.useMemo(()=>tS(e),[e]);return t.finished||t.tempCleanups.length>0||t.guestfsHandles.length>0||t.vddkStats.length>0?s.jsxs("div",{className:"space-y-4",children:[t.finished&&s.jsx(sS,{}),t.vddkStats.length>0&&s.jsx(nS,{tables:t.vddkStats}),t.guestfsHandles.length>0&&s.jsx(iS,{handles:t.guestfsHandles}),t.nbdkitLifecycle.length>0&&s.jsx(lS,{lifecycle:t.nbdkitLifecycle}),t.tempCleanups.length>0&&s.jsx(oS,{cleanups:t.tempCleanups}),t.errors.length>0&&s.jsx(cS,{errors:t.errors})]}):null}function sS(){return s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10",children:[s.jsx("span",{className:"text-green-500 dark:text-green-400 text-base",children:""}),s.jsx("span",{className:"text-[11px] font-medium text-green-700 dark:text-green-300",children:"virt-v2v monitoring: Finished"})]})}function nS({tables:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"VDDK Function Statistics",count:e.length}),s.jsx("div",{className:"space-y-3",children:e.map((t,r)=>s.jsx(aS,{table:t,index:r,total:e.length},r))})]})}function aS({table:e,index:t,total:r}){const[n,a]=S.useState(!1),i=e.rows.reduce((c,d)=>c+d.calls,0),l=e.rows.reduce((c,d)=>c+(d.bytes??0),0),o=e.rows.reduce((c,d)=>c+d.microseconds,0);return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{onClick:()=>a(!n),className:"flex items-center justify-between px-3 py-2 bg-slate-50 dark:bg-slate-800/80 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/90 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{expanded:n,className:"text-[9px] text-slate-400 dark:text-gray-500"}),s.jsx("span",{className:"text-[11px] font-medium text-slate-700 dark:text-gray-200",children:r>1?`Disk ${t+1}`:"VDDK Calls"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-gray-400",children:[e.rows.length," functions"]}),s.jsxs("span",{className:"text-[10px] font-mono text-slate-500 dark:text-gray-400",children:[i," calls"]}),l>0&&s.jsx("span",{className:"text-[10px] font-mono text-slate-500 dark:text-gray-400",children:q(l)}),s.jsx("span",{className:"text-[10px] font-mono text-slate-500 dark:text-gray-400",children:Ku(o)})]})]}),n&&s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700/40",children:s.jsxs("table",{className:"w-full text-[10px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Function"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Time"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Calls"}),s.jsx("th",{className:"px-3 py-1 font-medium text-right",children:"Bytes"})]})}),s.jsx("tbody",{children:e.rows.map((c,d)=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-b-0",children:[s.jsxs("td",{className:"px-3 py-1 font-mono text-slate-700 dark:text-gray-200",children:["VixDiskLib_",c.func]}),s.jsx("td",{className:"px-3 py-1 font-mono text-right text-slate-500 dark:text-gray-400",children:Ku(c.microseconds)}),s.jsx("td",{className:"px-3 py-1 font-mono text-right text-slate-500 dark:text-gray-400",children:c.calls.toLocaleString()}),s.jsx("td",{className:"px-3 py-1 font-mono text-right text-slate-500 dark:text-gray-400",children:c.bytes!==null?q(c.bytes):""})]},d))})]})})]})}function iS({handles:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Libguestfs Handles Closed",count:e.length}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((t,r)=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] border bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-300 border-slate-200 dark:border-slate-700 font-mono",children:[s.jsx("span",{className:"text-green-500 dark:text-green-400",children:""}),t.address,s.jsxs("span",{className:"text-slate-400 dark:text-gray-500",children:["state=",t.state]})]},r))})]})}function lS({lifecycle:e}){const t=new Map;for(const n of e)t.has(n.plugin)||t.set(n.plugin,new Set),t.get(n.plugin).add(n.action);const r=Array.from(t.entries()).sort((n,a)=>n[0].localeCompare(a[0]));return s.jsxs("div",{children:[s.jsx(H,{title:"nbdkit Plugin/Filter Lifecycle",count:r.length}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.map(([n,a],i)=>{const l=a.has("cleanup"),o=a.has("unload");return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 font-mono",children:[s.jsx("span",{className:o?"text-green-500 dark:text-green-400":"text-slate-400 dark:text-gray-500",children:o?"":""}),s.jsx("span",{className:"text-slate-700 dark:text-gray-200",children:n}),s.jsx("span",{className:"text-[9px] text-slate-400 dark:text-gray-500",children:l&&o?"cleaned+unloaded":l?"cleaned":"unloaded"})]},i)})})]})}function oS({cleanups:e}){const t={nbdkit:"text-purple-500 dark:text-purple-400",v2v:"text-sky-500 dark:text-sky-400",other:"text-slate-400 dark:text-gray-500"};return s.jsxs("div",{children:[s.jsx(H,{title:"Temp Directory Cleanup",count:e.length}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((r,n)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] border bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-gray-300 border-slate-200 dark:border-slate-700 font-mono",children:[s.jsx("span",{className:t[r.kind],children:"rm"}),r.path]},n))})]})}function cS({errors:e}){return s.jsxs("div",{children:[s.jsx(H,{title:"Errors"}),s.jsx("div",{className:"border border-red-200 dark:border-red-800 rounded-lg px-3 py-2 bg-red-50 dark:bg-red-900/10 space-y-1",children:e.map((t,r)=>s.jsx("div",{className:"text-[10px] font-mono text-red-700 dark:text-red-300",children:t},r))})]})}function dS({toolRun:e}){var u;const{stages:t,diskProgress:r,rawLines:n,startLine:a,hostCommands:i}=e,[l,o]=S.useState(null),c=S.useMemo(()=>t.map((p,f)=>{const h=f+1<t.length?t[f+1]:null,v=h?h.elapsedSeconds-p.elapsedSeconds:null,k=p.name.match(/^Copying disk (\d+)\/(\d+)/);let b=null;if(k){const C=parseInt(k[1],10),M=r.filter(P=>P.diskNumber===C);M.length>0&&(b=M[M.length-1])}let g=null;{const C=p.lineNumber-a+1,M=h?h.lineNumber-a:n.length;if(M>C&&C>=0&&M<=n.length){const P=n.slice(C,M).filter(_=>_.trim().length>0);P.filter(_=>!gS(_)).length>0&&(g=P)}}const m=p.lineNumber,x=h?h.lineNumber:1/0,j=i.filter(C=>C.lineNumber>=m&&C.lineNumber<x),N=f===t.length-1,y=kS(p.name)||N&&e.exitStatus==="error";return{...p,durationSeconds:v,progress:b,content:g,hostCommands:j,hasErrors:y}}),[t,r,n,a,i,e.exitStatus]);if(t.length===0)return s.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 italic",children:"No pipeline stages found in this tool run."});const d=t[t.length-1].elapsedSeconds;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400",children:["Total elapsed: ",s.jsx("span",{className:"font-semibold",children:Er(d)})," ",""," ",t.length," stage",t.length!==1?"s":""]}),s.jsx("div",{className:"flex flex-wrap items-start gap-y-5 gap-x-0",children:c.map((p,f)=>{var x;const h=f===c.length-1,v=p.hasErrors,k=p.content!==null,b=l===f,g=((x=p.content)==null?void 0:x.length)??0,m=Yc(p.name,p.content??void 0)||li(p.name,p.content??void 0);return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex flex-col items-stretch",children:[s.jsxs("div",{role:k?"button":void 0,tabIndex:k?0:void 0,"aria-expanded":k?b:void 0,onClick:k?()=>o(b?null:f):void 0,onKeyDown:k?j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),o(b?null:f))}:void 0,className:`
                      relative px-3 py-2 rounded-lg text-xs max-w-[200px] transition-all border-2
                      ${m?"font-bold":"font-medium"}
                      ${k?"cursor-pointer":""}
                      ${b?v?"shadow-md shadow-red-200 dark:shadow-red-900/40":"shadow-md shadow-emerald-200 dark:shadow-emerald-900/40":""}
                      ${v?h?"bg-red-500 dark:bg-red-600 text-white border-red-500 dark:border-red-600":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-400 dark:border-red-600":h?"bg-emerald-500 dark:bg-emerald-600 text-white border-emerald-500 dark:border-emerald-600":"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-200 border-emerald-400 dark:border-emerald-600"}
                      ${k&&!b&&!v?"hover:bg-emerald-100 dark:hover:bg-emerald-900/30 hover:shadow-sm":""}
                      ${k&&!b&&v?"hover:bg-red-100 dark:hover:bg-red-900/40 hover:shadow-sm":""}
                    `,title:`${p.name}
At: ${Er(p.elapsedSeconds)}${p.durationSeconds!==null?`
Duration: ${Er(p.durationSeconds)}`:""}${k?`
Click to view output`:""}
Line: ${p.lineNumber+1}`,children:[s.jsx("span",{className:"block truncate leading-tight text-center",children:vS(p.name)}),k&&g>0&&s.jsx("span",{className:`absolute -top-2.5 -right-2.5 min-w-[20px] h-5 flex items-center justify-center px-1 rounded-full text-[9px] font-bold border-2 border-white dark:border-slate-900 ${v?"bg-red-500 text-white":"bg-emerald-500 text-white"}`,children:g>999?`${(g/1e3).toFixed(0)}k`:g})]}),p.progress&&s.jsxs("div",{className:"mt-1 px-0.5",children:[s.jsx("div",{className:"h-1.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all",style:{width:`${p.progress.percentComplete}%`}})}),s.jsxs("span",{className:"block text-center text-[9px] text-emerald-600 dark:text-emerald-400",children:[p.progress.percentComplete,"%"]})]})]}),!h&&s.jsx("div",{className:`w-5 h-0.5 flex-shrink-0${p.progress?" self-start mt-4":""} ${v?"bg-red-300 dark:bg-red-700":"bg-emerald-300 dark:bg-emerald-700"}`})]}),s.jsxs("div",{className:"mt-1 flex flex-col items-center",children:[p.durationSeconds!==null&&p.durationSeconds>0&&s.jsx("span",{className:`text-[10px] font-medium ${v?"text-red-600 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:Er(p.durationSeconds)}),s.jsx(Je,{line:p.lineNumber})]})]},f)})}),l!==null&&((u=c[l])==null?void 0:u.content)&&(()=>{const p=c[l],f=c[l+1];return s.jsx(fS,{stageName:p.name,content:p.content,toolRun:e,hostCommands:p.hostCommands,stageStartLine:p.lineNumber,stageEndLine:f?f.lineNumber:e.endLine,onClose:()=>o(null)})})()]})}function Ex(e){return e.filter(t=>t.includes("virt-v2v: warning:")||t.includes("virt-v2v-in-place: warning:"))}const uS=[{match:jx,render:({content:e})=>s.jsx(tN,{content:e}),isSpecific:!0},{match:wx,render:({content:e})=>s.jsx(pN,{content:e}),isSpecific:!0},{match:Nx,render:({content:e})=>s.jsx(DN,{content:e}),isSpecific:!0},{match:Sx,render:({content:e})=>s.jsx(jN,{content:e}),isSpecific:!0},{match:Gc,render:({content:e,toolRun:t,stageStartLine:r,stageEndLine:n})=>{const a=t.apiCalls.filter(l=>l.lineNumber>=r&&l.lineNumber<n),i=t.virtioWin.fileCopies.filter(l=>l.lineNumber>=r&&l.lineNumber<n);return s.jsx(EN,{content:e,toolRun:t,stageApiCalls:a,stageFileCopies:i})},isSpecific:!0},{match:Cx,render:({content:e})=>s.jsx(VN,{content:e}),isSpecific:!0},{match:Mx,render:({content:e})=>s.jsx(rS,{content:e}),isSpecific:!0},{match:Lx,render:({content:e,stageName:t})=>s.jsx(KN,{content:e,stageName:t}),isSpecific:!0},{match:Kc,render:({content:e})=>s.jsx(QN,{content:e}),isSpecific:!0},{match:Uc,render:({content:e})=>s.jsx(JN,{content:e}),isSpecific:!0},{match:Hc,render:({content:e})=>s.jsx(bw,{content:e}),isSpecific:!0},{match:kx,render:({content:e,stageName:t})=>s.jsx(Iw,{content:e,stageName:t}),isSpecific:!0},{match:bx,render:({content:e})=>s.jsx(Vw,{content:e}),isSpecific:!0},{match:Yc,render:({content:e,toolRun:t,stageStartLine:r,stageEndLine:n})=>s.jsx(zw,{content:e,toolRun:t,stageStartLine:r,stageEndLine:n}),isSpecific:!1},{match:li,render:({content:e,toolRun:t,stageStartLine:r,stageEndLine:n})=>s.jsx(Xw,{content:e,toolRun:t,stageStartLine:r,stageEndLine:n}),isSpecific:!1}];function Px(e,t){return uS.find(r=>r.match(e,t))}function pS(e,t){return!!(Px(e,t)||t&&yN(t)||t&&Ex(t).length>0)}function fS({stageName:e,content:t,toolRun:r,hostCommands:n,stageStartLine:a,stageEndLine:i,onClose:l}){const[o,c]=S.useState(!1),[d,u]=S.useState(""),p=S.useCallback(N=>{if(N.key==="Escape"){const y=N.target;if(y.tagName==="INPUT"&&y.value)return;l()}},[l]);S.useEffect(()=>(document.addEventListener("keydown",p,!0),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",p,!0),document.body.style.overflow=""}),[p]);const f=S.useMemo(()=>r.apiCalls.filter(N=>N.lineNumber>=a&&N.lineNumber<i),[r.apiCalls,a,i]),h=S.useMemo(()=>r.virtioWin.fileCopies.filter(N=>N.lineNumber>=a&&N.lineNumber<i),[r.virtioWin.fileCopies,a,i]),v=S.useMemo(()=>r.registryHiveAccesses.filter(N=>N.lineNumber>=a&&N.lineNumber<i),[r.registryHiveAccesses,a,i]),k=S.useMemo(()=>xx(v),[v]),b=t.some(N=>/^(apiVersion:|kind:|metadata:|spec:|---\s*$)/.test(N.trim())),g=pS(e,t),m=b?"YAML Output":"Output",x=Yc(e,t)||li(e,t),j=x||Gc(e);return jf.createPortal(s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 md:p-10",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:l}),s.jsx(ax.Provider,{value:l,children:s.jsxs("div",{className:"relative w-full max-w-5xl max-h-[90vh] flex flex-col bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-indigo-50 dark:bg-indigo-900/30 border-b border-indigo-200 dark:border-indigo-800 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("span",{className:"text-sm font-semibold text-indigo-700 dark:text-indigo-300 truncate",children:e}),s.jsxs("span",{className:"text-[10px] text-indigo-500 dark:text-indigo-400 flex-shrink-0",children:[m," (",t.length," lines)"]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g&&s.jsx("button",{onClick:()=>c(!o),className:`text-[10px] px-2.5 py-1 rounded transition-colors ${o?"bg-indigo-200 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-300":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-500 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800"}`,children:o?"Structured":"Raw Log"}),s.jsx("button",{onClick:l,className:"p-1 rounded-md text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Close (Esc)",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto",children:[g&&!o?s.jsxs("div",{className:"px-5 py-4",children:[(()=>{const N=Px(e,t);return N?N.render({content:t,stageName:e,toolRun:r,stageStartLine:a,stageEndLine:i}):j?s.jsx(kN,{content:t}):null})(),!li(e,t)&&s.jsx(mS,{content:t}),!j&&s.jsx(mx,{apiCalls:f,fileCopies:h}),!x&&k.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-[10px] font-semibold text-slate-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Registry Hive Operations"}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[k.length," registry hive",k.length!==1?"s":""," accessed (",v.length," key path",v.length!==1?"s":""," traversed)"]}),s.jsx("div",{className:"space-y-2",children:k.map(N=>s.jsx(hx,{group:N},N.hivePath))})]})]}):s.jsx(hS,{content:t,search:d,onSearchChange:u}),!o&&n.length>0&&s.jsx(xS,{commands:n})]})]})})]}),document.body)}function mS({content:e}){const t=S.useMemo(()=>Ex(e),[e]);return t.length===0?null:s.jsxs("div",{className:"space-y-1.5 mt-3",children:[s.jsx("h4",{className:"text-[10px] font-semibold text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:"Warnings"}),t.map((r,n)=>{const a=r.replace(/^virt-v2v(-in-place)?:\s*warning:\s*/i,"").trim();return s.jsxs("div",{className:"flex items-start gap-2 px-3 py-2 rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/10 text-xs text-amber-800 dark:text-amber-200",children:[s.jsx("span",{className:"flex-shrink-0 mt-0.5",children:""}),s.jsx("span",{children:a})]},n)})]})}function xS({commands:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{className:"mx-5 my-3 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>r(!t),"aria-expanded":t,className:"w-full flex items-center justify-between px-4 py-2 bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[s.jsxs("span",{className:"text-xs font-semibold text-slate-700 dark:text-gray-300",children:["Host Commands (",e.length,")"]}),s.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&s.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.map((n,a)=>s.jsxs("div",{className:"flex items-baseline gap-2 px-4 py-1.5 text-[11px]",children:[s.jsx("span",{className:"flex-shrink-0 font-mono text-slate-400 dark:text-gray-500 w-5 text-right",children:a+1}),s.jsxs("code",{className:"flex-1 font-mono text-slate-700 dark:text-gray-300 break-all",children:[n.command," ",n.args.join(" ")]}),s.jsx("span",{className:"flex-shrink-0",children:s.jsx(Je,{line:n.lineNumber})})]},a))})]})}function hS({content:e,search:t,onSearchChange:r}){return s.jsx(gx,{lines:e,search:t,onSearchChange:r,config:{searchPlaceholder:"Search raw log..."}})}function gS(e){return!!(/^virt-v2v monitoring:/.test(e)||/^nbdkit:/.test(e)||/^rm -rf --/.test(e)||/^guestfsd: [<=>]/.test(e)||e==="SELinux enabled state cached to: disabled"||e.startsWith("No filesystem is currently mounted on /sys/fs/cgroup")||e.startsWith("Failed to determine unit we run in"))}function vS(e){const t=e.indexOf(":");if(t>0&&t<40){const r=e.slice(0,t),n=e.slice(t+1).trim();return n.length>30?`${r}: ${n.slice(0,27)}...`:e}return e.length>50?e.slice(0,47)+"...":e}function kS(e){const t=e.toLowerCase();return t.includes("error")||t.includes("fail")}const yS=300,bS={command:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300",chroot:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",commandrvf:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"},t0=new Set(["is_file","is_dir","is_symlink","is_blockdev","is_chardev","exists","stat","lstat","statvfs","case_sensitive_path","hivex_node_children","hivex_node_get_child","hivex_node_get_value","hivex_node_values","hivex_value_key","hivex_value_type","hivex_value_string","hivex_value_value","hivex_value_utf8","c_pointer","internal_feature_available"]);function jS({apiCalls:e}){const[t,r]=S.useState(""),[n,a]=S.useState(null),[i,l]=S.useState(null),[o,c]=S.useState(!1),[d,u]=S.useState(()=>new Set(t0)),[p,f]=S.useState(!1),h=S.useCallback(y=>{u(C=>{const M=new Set(C);return M.has(y)?M.delete(y):M.add(y),M})},[]),v=S.useCallback(()=>u(new Set),[]),k=S.useCallback(()=>u(new Set(t0)),[]),b=S.useMemo(()=>{const y=new Map;for(const C of e){const M=y.get(C.name)||{total:0,withCmds:0};M.total++,C.guestCommands.length>0&&M.withCmds++,y.set(C.name,M)}return[...y.entries()].sort((C,M)=>M[1].total-C[1].total)},[e]),g=S.useMemo(()=>{let y=0;for(const C of e)d.has(C.name)&&y++;return y},[e,d]),m=S.useMemo(()=>e.filter(y=>{if(d.has(y.name)||o&&y.guestCommands.length===0)return!1;if(t){const C=t.toLowerCase();if(!y.name.toLowerCase().includes(C)&&!y.args.toLowerCase().includes(C)&&!y.guestCommands.some(M=>M.command.toLowerCase().includes(C)||M.args.join(" ").toLowerCase().includes(C)))return!1}return!0}),[e,t,o,d]),x=S.useMemo(()=>e.reduce((y,C)=>y+C.guestCommands.length,0),[e]),j=(y,C)=>{n===y?(a(null),l(null)):(a(y),l(null))},N=(y,C,M)=>{const P=`${y}-${C}`;l(i===P?null:P)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-gray-400",children:[s.jsxs("span",{children:[e.length," API calls, ",x," guest commands"]}),g>0&&s.jsxs("button",{onClick:()=>f(!p),className:"text-amber-600 dark:text-amber-400 hover:underline",children:[d.size," hidden (",g.toLocaleString()," calls)"]})]}),p&&d.size>0&&s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:"Hidden API functions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:v,className:"text-[10px] text-amber-600 dark:text-amber-400 hover:underline",children:"Show all"}),s.jsx("button",{onClick:k,className:"text-[10px] text-amber-600 dark:text-amber-400 hover:underline",children:"Reset defaults"})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:[...d].sort().map(y=>{const C=b.find(([P])=>P===y),M=C?C[1].total:0;return s.jsxs("button",{onClick:()=>h(y),className:"px-2 py-0.5 rounded text-[10px] font-mono bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 hover:bg-amber-200 dark:hover:bg-amber-800/40 transition-colors group/hidden",title:`Click to unhide ${y}`,children:[s.jsx("span",{className:"line-through opacity-70",children:y}),M>0&&s.jsxs("span",{className:"opacity-50 ml-0.5",children:["(",M,")"]}),s.jsx("span",{className:"ml-1 opacity-0 group-hover/hidden:opacity-100",children:"+"})]},y)})})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:b.filter(([y])=>!d.has(y)).slice(0,25).map(([y,{total:C,withCmds:M}])=>s.jsxs("button",{onClick:()=>r(t===y?"":y),onContextMenu:P=>{P.preventDefault(),h(y)},title:"Click to filter, right-click to hide",className:`px-2 py-0.5 rounded text-[10px] font-mono transition-colors group/badge
                ${t===y?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[y,s.jsxs("span",{className:"opacity-60 ml-0.5",children:["(",C,M>0&&`, ${M} w/cmds`,")"]}),s.jsx("span",{onClick:P=>{P.stopPropagation(),h(y)},className:"ml-1 opacity-0 group-hover/badge:opacity-60 hover:!opacity-100 text-red-500 cursor-pointer",title:`Hide ${y}`,children:""})]},y))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",placeholder:"Filter API calls or commands...",value:t,onChange:y=>r(y.target.value),className:"flex-1 px-3 py-1.5 text-xs border border-slate-200 dark:border-slate-700 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-gray-100 placeholder:text-slate-400"}),s.jsx("button",{onClick:()=>c(!o),className:`px-3 py-1.5 rounded-md text-[11px] font-medium transition-colors whitespace-nowrap
            ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400"}`,children:o?"With commands":"All calls"})]}),s.jsxs("div",{className:"max-h-[600px] overflow-y-auto space-y-0.5",children:[m.slice(0,yS).map((y,C)=>{const M=n===C,P=y.guestCommands.length>0;return s.jsxs("div",{className:"rounded-md overflow-hidden",children:[s.jsxs("div",{onClick:()=>j(C),className:`
                  flex items-center gap-2 text-[11px] font-mono py-2 px-3 cursor-pointer group transition-colors
                  ${M?"bg-indigo-50 dark:bg-indigo-900/20 border-l-2 border-indigo-400 dark:border-indigo-500":"hover:bg-slate-50 dark:hover:bg-slate-800 border-l-2 border-transparent"}
                `,children:[s.jsx("span",{className:`flex-shrink-0 text-[9px] ${P?"text-indigo-500 dark:text-indigo-400":"text-slate-300 dark:text-slate-600"}`,children:P?s.jsx(Te,{expanded:M}):""}),s.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-semibold flex-shrink-0",children:y.name}),y.handle&&y.handle!=="v2v"&&s.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400 flex-shrink-0",children:y.handle}),y.args&&s.jsx("span",{className:"text-slate-500 dark:text-gray-400 truncate flex-1 min-w-0",children:y.args.length>60?y.args.slice(0,57)+"...":y.args}),y.result&&s.jsxs("span",{className:"text-green-600 dark:text-green-400 text-[10px] flex-shrink-0 max-w-[200px] truncate",children:["= ",y.result]}),y.durationSecs!==void 0&&s.jsxs("span",{className:"text-amber-600 dark:text-amber-400 text-[10px] flex-shrink-0",children:[y.durationSecs.toFixed(2),"s"]}),P&&s.jsxs("span",{className:"text-[9px] text-cyan-600 dark:text-cyan-400 flex-shrink-0 font-sans font-medium",children:[y.guestCommands.length," cmd",y.guestCommands.length!==1?"s":""]}),s.jsx("span",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 ml-1",children:s.jsx(Je,{line:y.lineNumber})})]}),M&&s.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/30 border-l-2 border-indigo-200 dark:border-indigo-800 ml-3",children:[(y.args||y.result)&&s.jsxs("div",{className:"px-4 py-2 text-[11px] font-mono space-y-1 border-b border-slate-100 dark:border-slate-700/50",children:[y.args&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"args: "}),s.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:y.args})]}),y.result&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"result: "}),s.jsx("span",{className:"text-green-600 dark:text-green-400",children:y.result})]}),y.durationSecs!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500",children:"duration: "}),s.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:[y.durationSecs.toFixed(3),"s"]})]})]}),y.guestCommands.length>0?s.jsx("div",{className:"py-1",children:y.guestCommands.map((w,_)=>{const L=`${C}-${_}`,I=i===L,E=w.stdoutLines.length>0;return s.jsxs("div",{children:[s.jsxs("div",{onClick:A=>{A.stopPropagation(),N(C,_)},className:`
                                flex items-start gap-2 text-[11px] font-mono py-1.5 px-4 cursor-pointer group/cmd
                                ${I?"bg-cyan-50 dark:bg-cyan-900/20":"hover:bg-white/50 dark:hover:bg-slate-700/30"}
                              `,children:[s.jsx("span",{className:`flex-shrink-0 text-[9px] mt-0.5 ${E?"text-cyan-500":"text-slate-300 dark:text-slate-600"}`,children:E?s.jsx(Te,{expanded:I}):""}),s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-sans font-medium flex-shrink-0 ${bS[w.source]||"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400"}`,children:w.source}),s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 flex-shrink-0",children:w.command}),s.jsx("span",{className:"text-slate-500 dark:text-gray-400 truncate flex-1 min-w-0",children:w.args.join(" ")}),E&&s.jsxs("span",{className:"text-[9px] text-green-600 dark:text-green-400 flex-shrink-0 font-sans",children:[w.stdoutLines.length," line",w.stdoutLines.length!==1?"s":""]}),w.returnCode!==void 0&&s.jsxs("span",{className:`flex-shrink-0 text-[10px] ${w.returnCode===0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["rc=",w.returnCode]}),s.jsx("span",{className:"flex-shrink-0 opacity-0 group-hover/cmd:opacity-100",children:s.jsx(Je,{line:w.lineNumber})})]}),I&&E&&s.jsxs("div",{className:"ml-8 mr-4 mt-1 mb-2",children:[s.jsx("div",{className:"text-[10px] text-green-700 dark:text-green-400 font-medium mb-1",children:"stdout:"}),s.jsx("pre",{className:"text-[11px] font-mono bg-slate-900 dark:bg-black text-green-400 p-3 rounded overflow-x-auto max-h-48 overflow-y-auto leading-relaxed",children:w.stdoutLines.join(`
`)})]}),I&&!E&&s.jsxs("div",{className:"ml-8 mr-4 mt-1 mb-2",children:[s.jsx("div",{className:"text-[10px] text-slate-400 dark:text-gray-500 italic",children:"No stdout captured."}),w.args.length>0&&s.jsxs("pre",{className:"mt-1 text-[11px] font-mono bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-gray-300 p-2 rounded overflow-x-auto",children:[w.command," ",w.args.join(" ")]})]})]},_)})}):s.jsx("div",{className:"px-4 py-3 text-[11px] text-slate-400 dark:text-gray-500 italic",children:"No guest commands executed for this API call."})]})]},C)}),m.length>300&&s.jsxs("div",{className:"text-xs text-slate-400 dark:text-gray-500 px-2 py-1",children:["... ",m.length-300," more API calls"]}),m.length===0&&s.jsx("p",{className:"text-xs text-slate-400 dark:text-gray-500 italic px-2 py-2",children:"No API calls match the current filter."})]})]})}function wS(e){if(!e.startsWith("cpe:"))return e;const t=e.split(":");if(t.length>=6){const r=t[4].replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),n=t[5]&&t[5]!=="*"?` ${t[5]}`:"";return`${r}${n}`}return e}function NS({info:e,sourceVM:t,apps:r=[]}){const n=!!e,a=(e==null?void 0:e.type)==="windows",[i,l]=S.useState(""),o=S.useMemo(()=>{if(!i)return r;const u=i.toLowerCase();return r.filter(p=>p.displayName.toLowerCase().includes(u)||p.name.toLowerCase().includes(u)||p.publisher.toLowerCase().includes(u)||p.version.toLowerCase().includes(u))},[r,i]),c=e?wS(e.productName)||e.distro||e.type:(t==null?void 0:t.name)||"Unknown",d=e?e.minorVersion?`${e.majorVersion}.${e.minorVersion}`:`${e.majorVersion}`:null;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:n?a?"":"":""}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-gray-200",children:[c,(t==null?void 0:t.name)&&n&&s.jsxs("span",{className:"text-slate-400 dark:text-gray-500 font-normal ml-2",children:["(",t.name,")"]})]}),e&&s.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:[e.productVariant&&`${e.productVariant}  `,e.arch,"  v",d,e.osinfo&&`  ${e.osinfo}`]})]})]}),t&&(t.vcpus!==void 0||t.memoryKB!==void 0||t.firmware)&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.vcpus!==void 0&&s.jsx(xl,{label:"vCPUs",value:String(t.vcpus)}),t.memoryKB!==void 0&&s.jsx(xl,{label:"Memory",value:dw(t.memoryKB)}),t.firmware&&s.jsx(xl,{label:"Firmware",value:t.firmware.toUpperCase()})]}),e&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-2",children:[s.jsx(tt,{label:"Root Device",value:e.root,mono:!0}),s.jsx(tt,{label:"Type",value:e.type}),s.jsx(tt,{label:"Distro",value:e.distro}),s.jsx(tt,{label:"Architecture",value:e.arch}),d&&s.jsx(tt,{label:"Version",value:d}),e.hostname&&s.jsx(tt,{label:"Hostname",value:e.hostname,mono:!0}),e.buildId&&s.jsx(tt,{label:"Build ID",value:e.buildId}),e.packageFormat&&e.packageFormat!=="unknown"&&s.jsx(tt,{label:"Package Format",value:e.packageFormat}),e.packageManagement&&e.packageManagement!=="unknown"&&s.jsx(tt,{label:"Package Mgmt",value:e.packageManagement})]}),e&&a&&(e.windowsSystemroot||e.windowsCurrentControlSet)&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-[11px] font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider mb-1.5",children:"Windows Details"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-2",children:[e.windowsSystemroot&&s.jsx(tt,{label:"System Root",value:e.windowsSystemroot,mono:!0}),e.windowsCurrentControlSet&&s.jsx(tt,{label:"Control Set",value:e.windowsCurrentControlSet,mono:!0}),e.windowsSoftwareHive&&s.jsx(tt,{label:"Software Hive",value:e.windowsSoftwareHive,mono:!0}),e.windowsSystemHive&&s.jsx(tt,{label:"System Hive",value:e.windowsSystemHive,mono:!0})]})]}),e&&e.driveMappings.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-[11px] font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider mb-1.5",children:"Drive Mappings"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.driveMappings.map(u=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-slate-100 dark:bg-slate-800 text-xs",children:[s.jsxs("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:[u.letter,":"]}),s.jsx("span",{className:"text-slate-500 dark:text-gray-500",children:""}),s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-300",children:u.device})]},u.letter))})]}),e&&e.fstab.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-[11px] font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider mb-1.5",children:"Filesystem Table"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.fstab.map(u=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-slate-100 dark:bg-slate-800 text-xs",children:[s.jsx("span",{className:"font-mono text-slate-700 dark:text-gray-300",children:u.device}),s.jsx("span",{className:"text-slate-500 dark:text-gray-500",children:""}),s.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400 font-mono",children:u.mountpoint})]},`${u.device}::${u.mountpoint}`))})]}),e&&e.blkid&&e.blkid.length>0&&s.jsx(CS,{entries:e.blkid}),r.length>0&&s.jsx(SS,{apps:r,filteredApps:o,appFilter:i,onFilterChange:l})]})}function SS({apps:e,filteredApps:t,appFilter:r,onFilterChange:n}){const[a,i]=S.useState(!1);return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between px-3 py-2 bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[s.jsxs("h5",{className:"text-[11px] font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider",children:["Installed Applications (",e.length,")"]}),s.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${a?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-2 border-t border-slate-100 dark:border-slate-800",children:s.jsx("input",{type:"text",placeholder:"Filter applications...",value:r,onChange:l=>n(l.target.value),className:"w-full max-w-xs px-3 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-gray-100 placeholder:text-slate-400"})}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500 dark:text-gray-400 text-left sticky top-0",children:[s.jsx("th",{className:"px-3 py-2 font-medium",children:"Application"}),s.jsx("th",{className:"px-3 py-2 font-medium",children:"Version"}),s.jsx("th",{className:"px-3 py-2 font-medium hidden md:table-cell",children:"Publisher"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[t.map((l,o)=>s.jsx(uw,{app:l},o)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-3 py-4 text-center text-slate-400 dark:text-gray-500 italic",children:r?"No matching applications":"No applications detected"})})]})]})})]})]})}function tt({label:e,value:t,mono:r}){return s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-gray-500 uppercase tracking-wider",children:e}),s.jsx("span",{className:`text-xs text-slate-700 dark:text-gray-300 ${r?"font-mono":""}`,children:t})]})}function CS({entries:e}){const[t,r]=S.useState(!1);return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-1.5 text-[11px] text-slate-600 dark:text-gray-400 hover:text-slate-800 dark:hover:text-gray-200 transition-colors uppercase tracking-wider font-semibold mb-1.5",children:[s.jsx(Te,{expanded:t,className:"text-[9px]"}),"Block Devices (blkid)",s.jsxs("span",{className:"text-[10px] font-normal text-slate-400 dark:text-gray-500",children:["(",e.length,")"]})]}),t&&s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-400 dark:text-gray-500 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-3 py-1 font-medium",children:"Device"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Type"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"Label"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"UUID"}),s.jsx("th",{className:"px-3 py-1 font-medium",children:"PARTUUID"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-3 py-1.5 font-mono text-slate-700 dark:text-gray-300",children:n.device}),s.jsx("td",{className:"px-3 py-1.5",children:n.type?s.jsx(Vc,{fsType:n.type}):s.jsx("span",{className:"text-slate-300 dark:text-gray-600",children:""})}),s.jsx("td",{className:"px-3 py-1.5 text-slate-500 dark:text-gray-400",children:n.partLabel||n.label||""}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400 truncate max-w-[180px]",title:n.uuid,children:n.uuid||""}),s.jsx("td",{className:"px-3 py-1.5 font-mono text-[10px] text-slate-500 dark:text-gray-400 truncate max-w-[180px]",title:n.partUuid,children:n.partUuid||""})]},n.device))})]})})]})}function MS({errors:e}){const t=S.useMemo(()=>{const n=e.filter(i=>i.level==="error"),a=e.filter(i=>i.level==="warning");return{errors:n,warnings:a}},[e]),r=S.useMemo(()=>{const n=a=>{const i=new Map;for(const l of a){const o=l.message.slice(0,200),c=i.get(o);c?(c.count++,l.lineNumber>c.error.lineNumber&&(c.error=l)):i.set(o,{error:l,count:1})}return[...i.values()].sort((l,o)=>{const c=r0(l.error.source),d=r0(o.error.source);return c!==d?c-d:o.error.lineNumber-l.error.lineNumber})};return{errors:n(t.errors),warnings:n(t.warnings)}},[t]);return e.length===0?s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"No errors or warnings found."}):s.jsxs("div",{className:"space-y-4",children:[r.errors.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-semibold text-red-600 dark:text-red-400 mb-2 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Errors (",t.errors.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:r.errors.map(({error:n,count:a},i)=>s.jsx(s0,{error:n,count:a},i))})]}),r.warnings.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 mb-2 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Warnings (",t.warnings.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:r.warnings.map(({error:n,count:a},i)=>s.jsx(s0,{error:n,count:a},i))})]})]})}function r0(e){return/^virt-v2v/.test(e)||e==="virt-customize"?0:e==="nbdkit"?1:e==="libguestfs"?2:e==="guestfsd"?3:4}function s0({error:e,count:t}){const r=e.level==="error";return s.jsxs("div",{className:`
        flex items-start gap-2 text-xs px-3 py-2 rounded transition-colors
        ${r?"bg-red-50 dark:bg-red-900/20":"bg-orange-50 dark:bg-orange-900/20"}
      `,children:[s.jsx("span",{className:`
          px-1.5 py-0.5 rounded text-[9px] font-medium flex-shrink-0
          ${r?"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200":"bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200"}
        `,children:e.source}),s.jsx("span",{className:`flex-1 font-mono text-[11px] break-all ${r?"text-red-700 dark:text-red-300":"text-orange-700 dark:text-orange-300"}`,children:e.message.length>300?e.message.slice(0,297)+"...":e.message}),t>1&&s.jsxs("span",{className:`
            px-1.5 py-0.5 rounded-full text-[10px] font-bold flex-shrink-0
            ${r?"bg-red-500 text-white":"bg-orange-500 text-white"}
          `,children:[t,"x"]}),s.jsx("span",{className:"flex-shrink-0",children:s.jsx(Je,{line:e.lineNumber})})]})}const LS=[{key:"all",label:"All",color:"bg-slate-600"},{key:"stage",label:"Stages",color:"bg-blue-500"},{key:"nbdkit",label:"nbdkit",color:"bg-purple-500"},{key:"libguestfs",label:"libguestfs",color:"bg-indigo-500"},{key:"guestfsd",label:"guestfsd",color:"bg-cyan-500"},{key:"command",label:"Commands",color:"bg-teal-500"},{key:"kernel",label:"Kernel",color:"bg-slate-500"},{key:"error",label:"Errors",color:"bg-red-500"},{key:"warning",label:"Warnings",color:"bg-orange-500"},{key:"monitor",label:"Monitor",color:"bg-green-500"},{key:"info",label:"Info",color:"bg-sky-500"}],_S={stage:"text-blue-600 dark:text-blue-400",nbdkit:"text-purple-600 dark:text-purple-400",libguestfs:"text-indigo-600 dark:text-indigo-400",guestfsd:"text-cyan-600 dark:text-cyan-400",command:"text-teal-600 dark:text-teal-400",kernel:"text-slate-500 dark:text-slate-500",info:"text-sky-600 dark:text-sky-400",error:"text-red-600 dark:text-red-400 font-semibold",warning:"text-orange-600 dark:text-orange-400",monitor:"text-green-600 dark:text-green-400",xml:"text-slate-500 dark:text-gray-500",yaml:"text-slate-500 dark:text-gray-500",other:"text-slate-700 dark:text-gray-300"},Ix=20,ES=600,n0=200;function PS({toolRun:e}){const{componentFilter:t,searchQuery:r,highlightedLine:n,highlightVersion:a,setComponentFilter:i,setSearchQuery:l}=$e(),[o,c]=S.useState(r),d=S.useRef();S.useEffect(()=>{i("all"),l(""),c("")},[]);const u=S.useCallback(m=>{c(m),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(m)},n0)},[l]);S.useEffect(()=>{c(r)},[r]);const p=S.useMemo(()=>{const m=new Map;m.set("all",e.rawLines.length);for(const x of e.lineCategories)m.set(x,(m.get(x)||0)+1);return m},[e.rawLines.length,e.lineCategories]),f=S.useMemo(()=>{const m=[],x=t!=="all";for(let j=0;j<e.rawLines.length;j++){const N=e.lineCategories[j]||"other";x&&N!==t||m.push({index:j,text:e.rawLines[j],category:N,globalLine:e.startLine+j})}return m},[e,t]),h=S.useMemo(()=>f.map(m=>m.text),[f]),v=S.useMemo(()=>{if(n===null)return-1;for(let m=0;m<f.length;m++){if(f[m].globalLine===n)return m;if(f[m].globalLine>n)break}return-1},[n,f]),k=S.useMemo(()=>r.toLowerCase(),[r]),b=S.useCallback(({lineIndex:m,isMatch:x,isCurrent:j,searchQuery:N})=>{const y=f[m];return y?s.jsx(IS,{line:y,isHighlighted:n===y.globalLine,isSearchMatch:x,isCurrentMatch:j,searchQuery:N}):null},[f,n]),g=S.useCallback(m=>s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-[200px]",children:[s.jsx("input",{type:"text",placeholder:"Search log...","aria-label":"Search log",value:o,onChange:x=>u(x.target.value),onKeyDown:x=>{x.key==="Escape"&&o?(x.stopPropagation(),u("")):x.key==="Enter"&&(x.preventDefault(),x.shiftKey?m.goPrev():m.goNext())},className:"flex-1 px-3 py-1.5 text-xs border border-slate-200 dark:border-slate-700 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-gray-100 placeholder:text-slate-400 outline-none focus:border-indigo-400 dark:focus:border-indigo-500"}),k&&m.matchCount>0&&s.jsx(vx,{matchCount:m.matchCount,currentMatchIdx:m.currentMatchIdx,goNext:m.goNext,goPrev:m.goPrev}),k&&m.matchCount===0&&s.jsx("span",{className:"text-[10px] text-red-400 dark:text-red-500 flex-shrink-0",children:"No matches"}),o&&s.jsx("button",{onClick:()=>u(""),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Clear search",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:LS.map(({key:x,label:j,color:N})=>{const y=t===x,C=p.get(x)||0;return C===0&&x!=="all"?null:s.jsxs("button",{onClick:()=>i(x),className:`
                    px-2 py-1 rounded text-[10px] font-medium transition-colors flex items-center gap-1
                    ${y?`${N} text-white`:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700"}
                  `,children:[j,s.jsxs("span",{className:"opacity-60",children:["(",C.toLocaleString(),")"]})]},x)})})]}),s.jsxs("div",{className:"text-[10px] text-slate-400 dark:text-gray-500",children:[f.length.toLocaleString()," lines",f.length!==e.rawLines.length&&` (filtered from ${e.rawLines.length.toLocaleString()})`]})]}),[o,k,t,p,f.length,e.rawLines.length,u,i]);return s.jsx(gx,{lines:h,search:r,onSearchChange:l,config:{rowHeight:Ix,viewportHeight:ES,searchDebounceMs:n0},renderHeader:g,renderRow:b,scrollToLine:v>=0?v:null,scrollToVersion:a,showLineCount:!1,emptyState:s.jsx("div",{className:"p-6 text-center text-slate-400 dark:text-gray-500 text-xs",children:"No lines match the current filters."}),scrollContainerClassName:"font-mono text-[11px] leading-[1.6] bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 overflow-auto"})}const IS=S.memo(function({line:t,isHighlighted:r,isSearchMatch:n,isCurrentMatch:a,searchQuery:i}){let l="";return a?l="bg-yellow-200 dark:bg-yellow-900/40":r?l="bg-yellow-100 dark:bg-yellow-900/30":n&&(l="bg-yellow-50 dark:bg-yellow-900/15"),s.jsxs("div",{className:`flex min-w-full hover:bg-slate-100 dark:hover:bg-slate-800/50 ${l}`,style:{height:Ix},children:[s.jsx("div",{className:"px-2 py-0 text-right select-none text-slate-400 dark:text-gray-600 w-[60px] flex-shrink-0 whitespace-nowrap border-r border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 z-10",style:{position:"sticky",left:0},children:t.globalLine+1}),s.jsx("div",{className:`px-3 py-0 whitespace-nowrap ${_S[t.category]}`,children:i&&n?px(t.text,i):t.text})]})}),TS=[{key:"virtV2v",label:"virt-v2v"},{key:"libvirt",label:"libvirt"},{key:"nbdkit",label:"nbdkit"},{key:"vddk",label:"VDDK"},{key:"libguestfs",label:"libguestfs"},{key:"qemu",label:"QEMU"},{key:"virtioWin",label:"virtio-win"}];function FS({versions:e}){const t=TS.filter(r=>e[r.key]);return t.length===0?null:s.jsx("div",{className:"flex flex-wrap items-baseline gap-x-4 gap-y-1 text-[11px] text-slate-500 dark:text-gray-500",children:t.map((r,n)=>s.jsxs("span",{className:"inline-flex items-baseline gap-1",children:[s.jsx("span",{children:r.label}),s.jsx("span",{className:"font-mono text-slate-600 dark:text-gray-400",children:e[r.key]}),n<t.length-1&&s.jsx("span",{className:"ml-3 text-slate-300 dark:text-gray-700",children:""})]},r.key))})}const a0=20;function AS({stages:e,apiCalls:t}){const[r,n]=S.useState(!1),a=S.useMemo(()=>{if(e.length<2)return[];const d=[];for(let p=0;p<e.length-1;p++)d.push({name:e[p].name,durationSecs:+(e[p+1].elapsedSeconds-e[p].elapsedSeconds).toFixed(1),startSecs:e[p].elapsedSeconds,lineNumber:e[p].lineNumber});const u=e[e.length-1];return d.push({name:u.name,durationSecs:0,startSecs:u.elapsedSeconds,lineNumber:u.lineNumber}),d},[e]),i=S.useMemo(()=>Math.max(...a.map(d=>d.durationSecs),1),[a]),l=S.useMemo(()=>[...t].filter(d=>d.durationSecs!==void 0&&d.durationSecs>0).sort((d,u)=>(u.durationSecs??0)-(d.durationSecs??0)),[t]),o=r?l:l.slice(0,a0),c=e.length>=2?e[e.length-1].elapsedSeconds-e[0].elapsedSeconds:0;return s.jsxs("div",{className:"space-y-6",children:[a.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider",children:"Stage Durations"}),c>0&&s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["Total: ",Er(c)]})]}),s.jsx("div",{className:"space-y-1",children:a.map((d,u)=>s.jsxs("div",{className:"flex items-center gap-2 text-[11px] group",children:[s.jsx("span",{className:"w-[200px] text-slate-700 dark:text-gray-300 truncate flex-shrink-0",title:d.name,children:d.name}),s.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-800 rounded overflow-hidden",children:d.durationSecs>0&&s.jsx("div",{className:`h-full rounded transition-all ${d.durationSecs/i>.5?"bg-orange-400 dark:bg-orange-500":d.durationSecs>1?"bg-blue-400 dark:bg-blue-500":"bg-blue-300 dark:bg-blue-600"}`,style:{width:`${Math.max(1,d.durationSecs/i*100)}%`}})}),s.jsx("span",{className:"w-16 text-right font-mono text-slate-500 dark:text-gray-400 flex-shrink-0",children:d.durationSecs>0?Er(d.durationSecs):"--"}),s.jsx(Je,{line:d.lineNumber})]},u))})]}),l.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-gray-400 uppercase tracking-wider",children:"Slowest API Calls"}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:[l.length," with timing data"]})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("table",{className:"w-full text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500 dark:text-gray-400",children:[s.jsx("th",{className:"px-3 py-1.5 text-left font-medium",children:"#"}),s.jsx("th",{className:"px-3 py-1.5 text-left font-medium",children:"API Call"}),s.jsx("th",{className:"px-3 py-1.5 text-left font-medium",children:"Handle"}),s.jsx("th",{className:"px-3 py-1.5 text-right font-medium",children:"Duration"}),s.jsx("th",{className:"px-3 py-1.5 text-right font-medium",children:"Line"})]})}),s.jsx("tbody",{children:o.map((d,u)=>s.jsxs("tr",{className:`border-t border-slate-100 dark:border-slate-800 ${(d.durationSecs??0)>1?"bg-orange-50/50 dark:bg-orange-900/10":""}`,children:[s.jsx("td",{className:"px-3 py-1 text-slate-400 dark:text-gray-500",children:u+1}),s.jsxs("td",{className:"px-3 py-1 font-mono text-slate-700 dark:text-gray-300",children:[d.name,d.args&&s.jsx("span",{className:"text-slate-400 dark:text-gray-500 ml-1",children:d.args.length>60?d.args.slice(0,60)+"...":d.args})]}),s.jsx("td",{className:"px-3 py-1 text-slate-500 dark:text-gray-400",children:d.handle}),s.jsx("td",{className:"px-3 py-1 text-right font-mono font-medium text-slate-700 dark:text-gray-300",children:Er(d.durationSecs??0)}),s.jsx("td",{className:"px-3 py-1 text-right",children:s.jsx(Je,{line:d.lineNumber})})]},`${d.lineNumber}-${u}`))})]})}),l.length>a0&&s.jsx("button",{onClick:()=>n(!r),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:r?"Show top 20":`Show all ${l.length}`})]})]})}const i0={"virt-v2v":"virt-v2v","virt-v2v-in-place":"virt-v2v-in-place","virt-v2v-inspector":"virt-v2v-inspector","virt-v2v-customize":"virt-customize"};function l0(){var f,h,v,k,b;const e=$e(g=>g.v2vFileEntries),t=$e(g=>g.selectedFileIndex),r=$e(g=>g.selectedToolRun),{setSelectedToolRun:n}=$e(),a=Si(),i=he(g=>g.plans),l=he(g=>g.setViewMode),o=((f=e[t])==null?void 0:f.data)??null,c=(h=e[t])==null?void 0:h.filePath,d=S.useMemo(()=>!o||o.toolRuns.length===0?null:o.toolRuns[r]??o.toolRuns[0],[o,r]),u=S.useMemo(()=>{if(!o)return{guestInfo:null,sourceVM:null};const g=o.toolRuns.reduce((x,j)=>{if(!j.guestInfo)return x;if(!x)return j.guestInfo;const N=y=>(y.productName?1:0)+(y.distro?1:0)+(y.arch?1:0)+(y.hostname?1:0)+(y.majorVersion?1:0)+y.driveMappings.length+y.fstab.length;return N(j.guestInfo)>N(x)?j.guestInfo:x},null),m=o.toolRuns.reduce((x,j)=>{if(!j.sourceVM)return x;if(!x)return j.sourceVM;const N=y=>(y.name?1:0)+(y.vcpus!==void 0?1:0)+(y.memoryKB!==void 0?1:0)+(y.firmware?1:0);return N(j.sourceVM)>N(x)?j.sourceVM:x},null);return{guestInfo:g,sourceVM:m}},[o]),p=S.useMemo(()=>{if(!d)return{lines:0,stages:0,apiCalls:0,guestCmds:0,errors:0,warnings:0};const g=d.apiCalls.reduce((m,x)=>m+x.guestCommands.length,0);return{lines:d.rawLines.length,stages:d.stages.length,apiCalls:d.apiCalls.length,guestCmds:g,errors:d.errors.filter(m=>m.level==="error").length,warnings:d.errors.filter(m=>m.level==="warning").length}},[d]);return!o||!d?null:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 space-y-4",children:[i.length>0&&s.jsxs("button",{onClick:()=>l("plans"),className:"inline-flex items-center gap-1.5 text-sm text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-200 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Plans"]}),s.jsx(DS,{toolRun:d}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-gray-100",children:"V2V Log Analysis"}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:[o.totalLines.toLocaleString()," total lines"]})]}),c&&s.jsx("p",{className:"text-xs font-mono text-slate-400 dark:text-gray-500 truncate",title:c,children:c})]}),o.toolRuns.length>1&&s.jsx("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:o.toolRuns.map((g,m)=>s.jsxs("button",{onClick:()=>n(m),className:`
                px-4 py-2 rounded-md text-sm font-medium transition-colors
                ${m===r?"bg-white dark:bg-slate-700 text-slate-900 dark:text-gray-100 shadow-sm":"text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-gray-200"}
              `,children:[g.exitStatus==="success"&&s.jsx("span",{className:"mr-1.5 text-green-600 dark:text-green-400",children:""}),g.exitStatus==="error"&&s.jsx("span",{className:"mr-1.5 text-red-600 dark:text-red-400",children:""}),g.exitStatus==="in_progress"&&s.jsx("span",{className:"mr-1.5 text-blue-600 dark:text-blue-400",children:""}),i0[g.tool]||g.tool,s.jsxs("span",{className:"ml-2 text-xs opacity-60",children:["(",g.rawLines.length.toLocaleString()," lines)"]})]},m))}),(a||d.exitStatus==="error"&&(p.errors>0||p.warnings>0))&&s.jsxs("div",{className:"flex flex-wrap gap-3",children:[a&&s.jsx(Kr,{label:"Lines",value:p.lines}),a&&s.jsx(Kr,{label:"Stages",value:p.stages,color:"blue"}),a&&s.jsx(Kr,{label:"API Calls",value:p.apiCalls,color:"cyan"}),a&&p.guestCmds>0&&s.jsx(Kr,{label:"Guest Cmds",value:p.guestCmds,color:"cyan"}),d.exitStatus==="error"&&p.errors>0&&s.jsx(Kr,{label:"Errors",value:p.errors,color:"red"}),d.exitStatus==="error"&&p.warnings>0&&s.jsx(Kr,{label:"Warnings",value:p.warnings,color:"orange"})]}),d.commandLine&&s.jsx("div",{className:"px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[s.jsx("span",{className:"text-slate-400 dark:text-gray-500 flex-shrink-0",children:"$"}),s.jsxs("code",{className:"font-mono text-slate-700 dark:text-gray-300 break-all",children:[i0[d.tool]||d.tool," ",d.commandLine]})]})}),Object.keys(d.versions).length>0&&s.jsx(FS,{versions:d.versions}),s.jsx(wr,{id:"pipeline",title:"Pipeline Stages",defaultOpen:!0,children:s.jsx(dS,{toolRun:d})}),(u.guestInfo||u.sourceVM||d.installedApps.length>0)&&s.jsx(wr,{id:"guestinfo",title:`Guest Information${d.installedApps.length>0?`  ${d.installedApps.length} apps`:""}`,defaultOpen:!0,children:s.jsx(NS,{info:u.guestInfo,sourceVM:u.sourceVM,apps:d.installedApps})}),d.errors.length>0&&s.jsx(wr,{id:"errors",title:`Errors & Warnings (${d.errors.length})`,defaultOpen:d.exitStatus==="error",children:s.jsx(MS,{errors:d.errors})}),a&&d.apiCalls.length>0&&s.jsx(wr,{id:"commands",title:`Libguestfs API Calls (${d.apiCalls.length})`,devPreview:!0,children:s.jsx(jS,{apiCalls:d.apiCalls})}),a&&(d.apiCalls.some(g=>["is_file","is_dir","is_symlink","is_blockdev","is_chardev","exists","stat","lstat"].includes(g.name))||d.virtioWin.fileCopies.length>0)&&s.jsx(wr,{id:"filetree",title:"File Operations",devPreview:!0,children:s.jsx(zc,{apiCalls:d.apiCalls,fileCopies:d.virtioWin.fileCopies,driveMappings:(v=u.guestInfo)==null?void 0:v.driveMappings,fstab:(k=u.guestInfo)==null?void 0:k.fstab,virtioWinIsoPath:(b=d.virtioWin)==null?void 0:b.isoPath})}),a&&(d.stages.length>=2||d.apiCalls.some(g=>g.durationSecs!==void 0))&&s.jsx(wr,{id:"performance",title:"Performance",devPreview:!0,children:s.jsx(AS,{stages:d.stages,apiCalls:d.apiCalls})}),s.jsx(wr,{id:"rawlog",title:"Raw Log",children:s.jsx(PS,{toolRun:d})})]})}function DS({toolRun:e}){if(e.exitStatus==="unknown")return null;const t=e.exitStatus==="error"?e.errors.find(o=>o.level==="error"&&/^virt-v2v/.test(o.source)&&!/warning/i.test(o.message)&&!/ignored\)/i.test(o.message)):null,r=t?t.rawLine.replace(/^virt-v2v[\w-]*:\s*error:\s*/i,"").trim():null,n=e.exitStatus==="success"?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":e.exitStatus==="in_progress"?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700":"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700",a=e.exitStatus==="success"?"":e.exitStatus==="in_progress"?"":"",i=e.exitStatus==="success"?"text-green-700 dark:text-green-300":e.exitStatus==="in_progress"?"text-blue-700 dark:text-blue-300":"text-red-700 dark:text-red-300",l=e.exitStatus==="success"?"Conversion completed successfully (exit 0)":e.exitStatus==="in_progress"?"Conversion in progress (no exit status detected)":"Conversion failed (exit 1)";return s.jsxs("div",{className:`rounded-lg border-2 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[s.jsx("span",{className:"text-xl",children:a}),s.jsx("span",{className:`text-sm font-semibold ${i}`,children:l}),e.stages.length>0&&s.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400 ml-auto",children:[e.stages[e.stages.length-1].elapsedSeconds.toFixed(1),"s elapsed"]})]}),r&&s.jsx("div",{className:"px-4 pb-3 pt-0",children:s.jsx("code",{className:"block text-xs font-mono text-red-800 dark:text-red-200 bg-red-100 dark:bg-red-900/30 rounded px-3 py-2 whitespace-pre-wrap break-words",children:r})})]})}function Kr({label:e,value:t,color:r="slate"}){const n={slate:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-gray-300",blue:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",purple:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300",cyan:"bg-cyan-100 dark:bg-cyan-900/40 text-cyan-700 dark:text-cyan-300",red:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",orange:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300"};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${n[r]}`,children:[e,": ",t.toLocaleString()]})}function wr({id:e,title:t,defaultOpen:r,devPreview:n,children:a}){const{expandedPanels:i,togglePanel:l}=$e(),o=i[e]??r??!1;return s.jsxs("div",{className:`border rounded-lg overflow-hidden ${n?"border-amber-300 dark:border-amber-700":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("button",{onClick:()=>l(e),className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${n?"bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30":"bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:`text-sm font-semibold ${n?"text-amber-700 dark:text-amber-300":"text-slate-700 dark:text-gray-300"}`,children:t}),n&&s.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wider px-1.5 py-0.5 rounded bg-amber-200 dark:bg-amber-800/50 text-amber-700 dark:text-amber-300",children:"Dev"})]}),s.jsx("svg",{className:`w-4 h-4 transition-transform ${o?"rotate-180":""} ${n?"text-amber-400 dark:text-amber-500":"text-slate-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&s.jsx("div",{className:"p-4",children:a})]})}function $S(e,t=!0){const r=S.useRef(e);r.current=e,S.useEffect(()=>{if(!t)return;const n=a=>{const i=a.target;if(!((i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)&&a.key!=="Escape"))for(const l of r.current){const o=a.key.toLowerCase()===l.key.toLowerCase(),c=l.ctrl?a.ctrlKey||a.metaKey:!(a.ctrlKey||a.metaKey),d=l.shift?a.shiftKey:!a.shiftKey,u=l.alt?a.altKey:!a.altKey;if(o&&c&&d&&u){a.preventDefault(),l.action();return}}};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t])}const RS=[{key:"/",description:"Focus search"},{key:"Escape",description:"Close modal / Clear search"},{key:"j",description:"Navigate to next plan"},{key:"k",description:"Navigate to previous plan"},{key:"Enter",description:"Expand/collapse selected plan"},{key:"Ctrl+D",description:"Toggle dark mode"},{key:"?",description:"Show keyboard shortcuts"}];function OS(){const e=zv(),{setShowKeyboardHelp:t}=he();return e?s.jsx(Rn,{isOpen:e,onClose:()=>t(!1),title:"Keyboard Shortcuts",maxWidth:"md",children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:RS.map((r,n)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:r.description}),s.jsx("kbd",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-sm font-mono text-slate-900 dark:text-gray-100",children:r.key})]},n))})})}):null}function BS(){const{theme:e,plans:t,devMode:r,initializeTheme:n,toggleTheme:a,toggleDevMode:i,navigatePlan:l,toggleSelectedPlanExpanded:o,setShowKeyboardHelp:c,setSearchQuery:d}=he(),u=Bv(),p=$e(g=>g.v2vFileEntries.length>0),f=Wv(),h=bc(),v=jc();S.useEffect(()=>{n()},[n]),S.useEffect(()=>{!r&&new URLSearchParams(window.location.search).has("dev")&&i()},[]),S.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const g=window.matchMedia("(prefers-color-scheme: dark)"),m=x=>{localStorage.getItem("forklift-log-inspector")||he.getState().setTheme(x.matches?"dark":"light")};return g.addEventListener("change",m),()=>g.removeEventListener("change",m)},[]),S.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const k=S.useCallback(()=>{const g=document.getElementById("global-search-input");g&&(g.focus(),g.select())},[]),b=S.useCallback(()=>{d("");const g=document.getElementById("global-search-input");g&&document.activeElement===g&&g.blur()},[d]);return $S([{key:"/",action:k,description:"Focus search"},{key:"Escape",action:b,description:"Clear search"},{key:"j",action:()=>l("down"),description:"Navigate down"},{key:"k",action:()=>l("up"),description:"Navigate up"},{key:"Enter",action:o,description:"Toggle expand"},{key:"d",ctrl:!0,action:a,description:"Toggle theme"},{key:"d",ctrl:!0,shift:!0,action:i,description:"Toggle dev mode"},{key:"?",shift:!0,action:()=>c(!0),description:"Show help"}]),s.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-slate-900 text-slate-900 dark:text-gray-100 transition-colors",children:[s.jsx(Kv,{}),s.jsxs("main",{className:"flex-1",children:[s.jsx(kj,{}),f==="v2v"&&p?s.jsx(l0,{}):t.length>0||u.length>0||h.length>0||v.length>0?s.jsxs(s.Fragment,{children:[t.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Ej,{}),s.jsx(Tj,{})]}),u.length>0&&s.jsx(Xj,{events:u}),s.jsx(Gu,{})]}):p?s.jsx(l0,{}):s.jsx(Gu,{})]}),s.jsxs("footer",{className:"py-4 text-center text-sm text-slate-500 dark:text-gray-400 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("span",{children:"Forklift Log Inspector - A tool for visualizing MTV migration logs"}),s.jsx("span",{className:"mx-2",children:"|"}),s.jsx("button",{onClick:()=>c(!0),className:"hover:text-slate-700 dark:hover:text-gray-200 transition-colors",children:"Keyboard shortcuts (?)"})]}),s.jsx(OS,{})]})}function VS(){return s.jsx(Uv,{children:s.jsx(BS,{})})}class zS extends _o.Component{constructor(r){super(r);$t(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-8",children:s.jsxs("div",{className:"max-w-lg w-full bg-white dark:bg-slate-800 rounded-xl shadow-lg p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"!"}),s.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"The application encountered an unexpected error. You can try reloading or resetting the app."}),this.state.error&&s.jsx("pre",{className:"text-left text-xs bg-slate-100 dark:bg-slate-700 rounded-lg p-4 mb-4 overflow-auto max-h-40 text-red-600 dark:text-red-400",children:this.state.error.message}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Try Again"}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 text-sm font-medium hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Reload Page"})]})]})}):this.props.children}}hl.createRoot(document.getElementById("root")).render(s.jsx(_o.StrictMode,{children:s.jsx(zS,{children:s.jsx(VS,{})})}));
//# sourceMappingURL=index-Be5UrpnV.js.map
